<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Figure | KLineChart</title>
    <meta name="description" content="ðŸ’¹ðŸ“ˆ Highly customizable professional lightweight financial chart.">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.HEAi5L2w.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.265b2fab.js"></script>
    <script type="module" src="/assets/app.DfEsjdMa.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.x4Z5Tc0C.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DYFzKSfR.js">
    <link rel="modulepreload" href="/assets/en-US_guide_figure.md.4Hi1YHPq.lean.js">
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <script>/**
     * @license
     * KLineChart v10.0.0-alpha1
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */(function(x,Pt){typeof exports=="object"&&typeof module<"u"?Pt(exports):typeof define=="function"&&define.amd?define(["exports"],Pt):Pt((x=typeof globalThis<"u"?globalThis:x||self).klinecharts={})})(this,function(x){"use strict";var Pt=function(r,e){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},Pt(r,e)};function V(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=r}Pt(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Le,pe,ge,Oe,ve,Ve,Ft,M=function(){return M=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},M.apply(this,arguments)};function $t(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]])}return t}function We(r,e,t,i){return new(t||(t=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(c){o(c)}}function s(u){try{l(i.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?n(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(a,s)}l((i=i.apply(r,e||[])).next())})}function Ne(r,e){var t,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(t=1,i&&(n=2&c[0]?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(c[0]===6&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(r,o)}catch(h){c=[6,h],i=0}finally{t=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function J(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i,n,o=t.call(r),a=[];try{for(;(e===void 0||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){n={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}return a}function Yt(r,e,t){if(t||arguments.length===2)for(var i,n=0,o=e.length;n<o;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError,x.LineType=void 0,(Le=x.LineType||(x.LineType={})).Dashed="dashed",Le.Solid="solid",x.PolygonType=void 0,(pe=x.PolygonType||(x.PolygonType={})).Stroke="stroke",pe.Fill="fill",pe.StrokeFill="stroke_fill",x.TooltipShowRule=void 0,(ge=x.TooltipShowRule||(x.TooltipShowRule={})).Always="always",ge.FollowCross="follow_cross",ge.None="none",x.TooltipShowType=void 0,(Oe=x.TooltipShowType||(x.TooltipShowType={})).Standard="standard",Oe.Rect="rect",x.TooltipIconPosition=void 0,(ve=x.TooltipIconPosition||(x.TooltipIconPosition={})).Left="left",ve.Middle="middle",ve.Right="right",x.CandleTooltipRectPosition=void 0,(Ve=x.CandleTooltipRectPosition||(x.CandleTooltipRectPosition={})).Fixed="fixed",Ve.Pointer="pointer",x.CandleType=void 0,(Ft=x.CandleType||(x.CandleType={})).CandleSolid="candle_solid",Ft.CandleStroke="candle_stroke",Ft.CandleUpStroke="candle_up_stroke",Ft.CandleDownStroke="candle_down_stroke",Ft.Ohlc="ohlc",Ft.Area="area";var Qt="#F92855",fe="rgba(249, 40, 85, .7)",te="#2DC08E",ye="rgba(45, 192, 142, .7)",It="#888888",ee="#FFFFFF",et="#1677FF",kt="#76808F",me="#DDDDDD";function Rt(r){return"rgba(22, 119, 255, ".concat(r,")")}function ji(){function r(){return{show:!0,size:1,color:"#EDEDED",style:x.LineType.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:r(),vertical:r()}}function ze(){return{show:!0,size:"auto",axisLine:{show:!0,color:me,size:1},tickText:{show:!0,color:kt,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:me}}}function qi(){function r(){return{show:!0,line:{show:!0,style:x.LineType.Dashed,dashedValue:[4,2],size:1,color:kt},text:{show:!0,style:x.PolygonType.Fill,color:ee,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:x.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:kt,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:kt}}}return{show:!0,horizontal:r(),vertical:r()}}function Y(r,e){if(nt(r)||nt(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=r[t],n=e[t];nt(n)&&nt(i)?Y(i,n):T(e[t])&&(r[t]=Bt(e[t]))}}}function Bt(r){if(!nt(r))return r;var e=null;for(var t in e=st(r)?[]:{},r)if(Object.prototype.hasOwnProperty.call(r,t)){var i=r[t];nt(i)?e[t]=Bt(i):e[t]=i}return e}function st(r){return Object.prototype.toString.call(r)==="[object Array]"}function U(r){return typeof r=="function"}function nt(r){return typeof r=="object"&&T(r)}function R(r){return typeof r=="number"&&Number.isFinite(r)}function T(r){return r!=null}function Ht(r){return typeof r=="boolean"}function W(r){return typeof r=="string"}var Ji=/\\(\\)?/g,$i=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function G(r,e,t){if(T(r)){var i=[];e.replace($i,function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=s;return T(l[1])?c=l[2].replace(Ji,"$1"):T(l[0])&&(c=l[0].trim()),i.push(c),""});for(var n=r,o=0,a=i.length;T(n)&&o<a;)n=n?.[i[o++]];return T(n)?n:t??"--"}return t??"--"}function _e(r,e){var t={};return r.formatToParts(new Date(e)).forEach(function(i){var n=i.type,o=i.value;switch(n){case"year":t.YYYY=o;break;case"month":t.MM=o;break;case"day":t.DD=o;break;case"hour":t.HH=o==="24"?"00":o;break;case"minute":t.mm=o;break;case"second":t.ss=o}}),t}function Ye(r,e,t){var i=_e(r,e);return t.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return i[n]})}function Z(r,e){var t=+r;return R(t)?t.toFixed(e??2):"".concat(r)}function He(r){var e=+r;if(R(e)){if(e>1e9)return"".concat(+(e/1e9).toFixed(3),"B");if(e>1e6)return"".concat(+(e/1e6).toFixed(3),"M");if(e>1e3)return"".concat(+(e/1e3).toFixed(3),"K")}return"".concat(r)}function Xe(r,e){var t="".concat(r);if(e.length===0)return t;if(t.includes(".")){var i=t.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)}),".").concat(i[1])}return t.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(e)})}function Ge(r,e){var t="".concat(r);if(new RegExp("\\.0{"+e+",}[1-9][0-9]*$").test(t)){var i=t.split("."),n=i.length-1,o=i[n],a=/0*/.exec(o);if(T(a)){var s=a[0].length;return i[n]=o.replace(/0*/,"0{".concat(s,"}")),i.join(".")}}return t}var Mt,ie=null;function Tt(r){var e,t;return(t=(e=r.ownerDocument.defaultView)===null||e===void 0?void 0:e.devicePixelRatio)!==null&&t!==void 0?t:1}function Dt(r,e,t){return"".concat(e??"normal"," ").concat(r??12,"px ").concat(t??"Helvetica Neue")}function Xt(r,e,t,i){if(!T(ie)){var n=document.createElement("canvas"),o=Tt(n);(ie=n.getContext("2d")).scale(o,o)}return ie.font=Dt(e,t,i),Math.round(ie.measureText(r).width)}x.ActionType=void 0,(Mt=x.ActionType||(x.ActionType={})).OnZoom="onZoom",Mt.OnScroll="onScroll",Mt.OnVisibleRangeChange="onVisibleRangeChange",Mt.OnTooltipIconClick="onTooltipIconClick",Mt.OnCrosshairChange="onCrosshairChange",Mt.OnCandleBarClick="onCandleBarClick",Mt.OnPaneDrag="onPaneDrag";var xe,Gt,Qi=function(){function r(){this._callbacks=[]}return r.prototype.subscribe=function(e){this._callbacks.indexOf(e)<0&&this._callbacks.push(e)},r.prototype.unsubscribe=function(e){if(U(e)){var t=this._callbacks.indexOf(e);t>-1&&this._callbacks.splice(t,1)}else this._callbacks=[]},r.prototype.execute=function(e){this._callbacks.forEach(function(t){t(e)})},r.prototype.isEmpty=function(){return this._callbacks.length===0},r}();function be(r,e,t,i){var n,o=r.result,a=r.figures,s=r.styles,l=G(s,"circles",t.circles),u=l.length,c=G(s,"bars",t.bars),h=c.length,p=G(s,"lines",t.lines),d=p.length,g=0,v=0,f=0,y=0;a.forEach(function(_){var m;switch(_.type){case"circle":y=g;var b=l[g%u];n=M(M({},b),{color:b.noChangeColor}),g++;break;case"bar":y=v;var S=c[v%h];n=M(M({},S),{color:S.noChangeColor}),v++;break;case"line":y=f,n=p[f%d],f++}if(T(_.type)){var C=(m=_.styles)===null||m===void 0?void 0:m.call(_,{data:{prev:o[e-1],current:o[e],next:o[e+1]},indicator:r,defaultStyles:t});i(_,M(M({},n),C),y)}})}x.IndicatorSeries=void 0,(xe=x.IndicatorSeries||(x.IndicatorSeries={})).Normal="normal",xe.Price="price",xe.Volume="volume",function(r){r.Loading="loading",r.Error="error",r.Ready="ready"}(Gt||(Gt={}));var Ce,Ke=function(){function r(e){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series=x.IndicatorSeries.Normal,this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(t,i){var n=JSON.stringify(t.calcParams)!==JSON.stringify(i.calcParams)||t.figures!==i.figures||t.calc!==i.calc;return{calc:n,draw:n||t.shortName!==i.shortName||t.series!==i.series||t.minValue!==i.minValue||t.maxValue!==i.maxValue||t.precision!==i.precision||t.shouldOhlc!==i.shouldOhlc||t.shouldFormatBigNumber!==i.shouldFormatBigNumber||t.visible!==i.visible||t.zLevel!==i.zLevel||t.extendData!==i.extendData||t.regenerateFigures!==i.regenerateFigures||t.createTooltipDataSource!==i.createTooltipDataSource||t.draw!==i.draw}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result=[],this._lockSeriesPrecision=!1,this.override(e),this._lockSeriesPrecision=!1}return r.prototype.override=function(e){var t,i,n=this.result,o=$t(this,["result"]);this._prevIndicator=M(M({},Bt(o)),{result:n});var a=e.name,s=e.shortName,l=e.precision,u=e.styles,c=e.figures,h=e.calcParams,p=$t(e,["name","shortName","precision","styles","figures","calcParams"]);W(this.name)||(this.name=a??""),this.shortName=(t=s??this.shortName)!==null&&t!==void 0?t:this.name,R(l)&&(this.precision=l,this._lockSeriesPrecision=!0),T(u)&&((i=this.styles)!==null&&i!==void 0||(this.styles={}),Y(this.styles,u)),Y(this,p),T(h)&&(this.calcParams=h,U(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=c??this.figures},r.prototype.setSeriesPrecision=function(e){this._lockSeriesPrecision||(this.precision=e)},r.prototype.shouldUpdateImp=function(){var e=this._prevIndicator.zLevel!==this.zLevel,t=this.shouldUpdate(this._prevIndicator,this);return Ht(t)?{calc:t,draw:t,sort:e}:M(M({},t),{sort:e})},r.prototype.calcImp=function(e){return We(this,void 0,void 0,function(){var t;return Ne(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(e,this)];case 1:return t=i.sent(),this.result=t,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},r.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return V(i,t),i}(r)},r}();x.OverlayMode=void 0,(Ce=x.OverlayMode||(x.OverlayMode={})).Normal="normal",Ce.WeakMagnet="weak_magnet",Ce.StrongMagnet="strong_magnet";var Lt,Ot="overlay_figure_",Ue=function(){function r(e){this.groupId="",this.totalStep=1,this.currentStep=1,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode=x.OverlayMode.Normal,this.modeSensitivity=8,this.points=[],this.extendData=null,this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(e)}return r.prototype.override=function(e){var t,i;this._prevOverlay=Bt(this);var n=e.id,o=e.name;e.currentStep;var a=e.points,s=e.styles;if(Y(this,$t(e,["id","name","currentStep","points","styles"])),W(this.name)||(this.name=o??""),!W(this.id)&&W(n)&&(this.id=n),T(s)&&((t=this.styles)!==null&&t!==void 0||(this.styles={}),Y(this.styles,s)),st(a)&&a.length>0){var l=0;if(this.points=Yt([],dt(a),!1),a.length>=this.totalStep-1?(this.currentStep=-1,l=this.totalStep-1):(this.currentStep=a.length+1,l=a.length),U(this.performEventMoveForDrawing))for(var u=0;u<l;u++)this.performEventMoveForDrawing({currentStep:u+2,mode:this.mode,points:this.points,performPointIndex:u,performPoint:this.points[u]});this.currentStep===-1&&((i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},r.prototype.shouldUpdate=function(){var e=this._prevOverlay.zLevel!==this.zLevel;return{sort:e,draw:e||JSON.stringify(this._prevOverlay)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles}},r.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=-1:this.currentStep++},r.prototype.forceComplete=function(){this.currentStep=-1},r.prototype.isDrawing=function(){return this.currentStep!==-1},r.prototype.isStart=function(){return this.currentStep===1},r.prototype.eventMoveForDrawing=function(e){var t,i=this.currentStep-1,n={};R(e.timestamp)&&(n.timestamp=e.timestamp),R(e.dataIndex)&&(n.dataIndex=e.dataIndex),R(e.value)&&(n.value=e.value),this.points[i]=n,(t=this.performEventMoveForDrawing)===null||t===void 0||t.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},r.prototype.eventPressedPointMove=function(e,t){var i;R(e.dataIndex)&&(this.points[t].dataIndex=e.dataIndex,this.points[t].timestamp=e.timestamp),R(e.value)&&(this.points[t].value=e.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:t,performPoint:this.points[t]})},r.prototype.startPressedMove=function(e){this._prevPressedPoint=M({},e),this._prevPressedPoints=Bt(this.points)},r.prototype.eventPressedOtherMove=function(e,t){if(this._prevPressedPoint!==null){var i=null;R(e.dataIndex)&&R(this._prevPressedPoint.dataIndex)&&(i=e.dataIndex-this._prevPressedPoint.dataIndex);var n=null;R(e.value)&&R(this._prevPressedPoint.value)&&(n=e.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var a;R(o.timestamp)&&(o.dataIndex=t.timestampToDataIndex(o.timestamp));var s=M({},o);return R(i)&&R(o.dataIndex)&&(s.dataIndex=o.dataIndex+i,s.timestamp=(a=t.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),R(n)&&R(o.value)&&(s.value=o.value+n),s})}},r.extend=function(e){return function(t){function i(){return t.call(this,e)||this}return V(i,t),i}(r)},r}();function ne(r){var e={width:0,height:0,left:0,right:0,top:0,bottom:0};return T(r)&&Y(e,r),e}x.FormatDateType=void 0,(Lt=x.FormatDateType||(x.FormatDateType={}))[Lt.Tooltip=0]="Tooltip",Lt[Lt.Crosshair=1]="Crosshair",Lt[Lt.XAxis=2]="XAxis";var Vt=-1;function re(r){return U(window.requestAnimationFrame)?window.requestAnimationFrame(r):window.setTimeout(r,20)}function Ze(r){U(window.cancelAnimationFrame)?window.cancelAnimationFrame(r):window.clearTimeout(r)}function je(r){if(U(window.requestIdleCallback))return window.requestIdleCallback(r);var e=performance.now();return window.setTimeout(function(){r({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-e))}})},1)}var $,Te=function(){function r(e){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Y(this._options,e)}return r.prototype._loop=function(){var e=this;this._running=!0;var t=function(){var i;if(e._running){var n=new Date().getTime()-e._time;n<e._options.duration?((i=e._doFrameCallback)===null||i===void 0||i.call(e,n),re(t)):(e.stop(),e._currentIterationCount++,e._currentIterationCount<e._options.iterationCount&&e.start())}};re(t)},r.prototype.doFrame=function(e){return this._doFrameCallback=e,this},r.prototype.setDuration=function(e){return this._options.duration=e,this},r.prototype.setIterationCount=function(e){return this._options.iterationCount=e,this},r.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},r.prototype.stop=function(){var e;this._running&&((e=this._doFrameCallback)===null||e===void 0||e.call(this,this._options.duration)),this._running=!1},r}(),we=1,qe=new Date().getTime();function Je(r){var e=new Date().getTime();return e===qe?++we:we=1,qe=e,"".concat(r??"").concat(e,"_").concat(we)}function pt(r,e){var t,i=document.createElement(r),n=e??{};for(var o in n)i.style[o]=(t=n[o])!==null&&t!==void 0?t:"";return i}function Se(r,e,t){var i=0,n=0;for(n=r.length-1;i!==n;){var o=Math.floor((n+i)/2),a=n-i,s=r[o][e];if(t===r[i][e])return i;if(t===r[n][e])return n;if(t===s)return o;if(t>s?i=o:n=o,a<=2)break}return i}function $e(r,e){e=Math.max(0,e??0);var t=Math.pow(10,e);return Math.round(r*t)/t}function Qe(r,e,t){for(var i,n,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],a=r.length,s=0;s<a;){var l=r[s];o[0]=Math.max((i=l[e])!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((n=l[t])!==null&&n!==void 0?n:Number.MAX_SAFE_INTEGER,o[1]),++s}return o}function gt(r){return r===0?0:Math.log10(r)}function At(r){return Math.pow(10,r)}function ti(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.join("_")}(function(r){r.Init="init",r.Forward="forward",r.Backward="backward",r.Update="update"})($||($={}));var tn=function(){function r(e){this._requestIdleCallbackId=Vt,this._tasks=e??[],this._operateTasks()}return r.prototype._operateTasks=function(e){var t,i=this;this._requestIdleCallbackId!==Vt&&(t=this._requestIdleCallbackId,U(window.cancelIdleCallback)?window.cancelIdleCallback(t):window.clearTimeout(t),this._requestIdleCallbackId=Vt),e?.(),this._requestIdleCallbackId=je(function(n){i._runTasks(n)})},r.prototype._runTasks=function(e){for(var t=this;e.timeRemaining()>0&&this._tasks.length>0;){var i=this._tasks.shift();i?.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=je(function(n){t._runTasks(n)}))},r.prototype.addTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e.id});i>-1?t._tasks[i]=e:t._tasks.push(e)}),this},r.prototype.removeTask=function(e){var t=this;return this._operateTasks(function(){var i=t._tasks.findIndex(function(n){return n.id===e});i>-1&&t._tasks.splice(i,1)}),this},r}(),en={name:"AVP",shortName:"AVP",series:x.IndicatorSeries.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(r){var e=0,t=0;return r.map(function(i){var n,o,a={},s=(n=i.turnover)!==null&&n!==void 0?n:0,l=(o=i.volume)!==null&&o!==void 0?o:0;return e+=s,(t+=l)!==0&&(a.avp=e/t),a})}},nn={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(r){var e,t,i=r.data,n=r.indicator,o=r.defaultStyles,a=i.prev,s=i.current,l=(e=a?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return{color:c=u>l?G(n.styles,"bars[0].upColor",o.bars[0].upColor):G(n.styles,"bars[0].downColor",o.bars[0].downColor),style:u>l?x.PolygonType.Stroke:x.PolygonType.Fill,borderColor:c}}}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,a=0,s=0;return r.map(function(l,u){var c={},h=(l.low+l.high)/2;if(n+=h,o+=h,u>=t[0]-1){a=n/t[0];var p=r[u-(t[0]-1)];n-=(p.low+p.high)/2}return u>=t[1]-1&&(s=o/t[1],p=r[u-(t[1]-1)],o-=(p.low+p.high)/2),u>=i-1&&(c.ao=a-s),c})}},rn={name:"BOLL",shortName:"BOLL",series:x.IndicatorSeries.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0;return r.map(function(o,a){var s=o.close,l={};if(n+=s,a>=i){l.mid=n/t[0];var u=function(c,h){var p=c.length,d=0;return c.forEach(function(g){var v=g.close-h;d+=v*v}),d=Math.abs(d),Math.sqrt(d/p)}(r.slice(a-i,a+1),l.mid);l.up=l.mid+t[1]*u,l.dn=l.mid-t[1]*u,n-=r[a-i].close}return l})}},on={name:"BBI",shortName:"BBI",series:x.IndicatorSeries.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max.apply(Math,Yt([],dt(t),!1)),n=[],o=[];return r.map(function(a,s){var l={},u=a.close;if(t.forEach(function(h,p){var d;n[p]=((d=n[p])!==null&&d!==void 0?d:0)+u,s>=h-1&&(o[p]=n[p]/h,n[p]-=r[s-(h-1)].close)}),s>=i-1){var c=0;o.forEach(function(h){c+=h}),l.bbi=c/4}return l})}},an={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=t[0]-1,n=0,o=[];return r.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(n+=u,o.push(u),s>=i){var c=n/t[0],h=o.slice(s-i,s+1),p=0;h.forEach(function(v){p+=Math.abs(v-c)});var d=p/t[0];l.cci=d!==0?(u-c)/d/.015:0;var g=(r[s-i].high+r[s-i].low+r[s-i].close)/3;n-=g}return l})}},sn={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.ceil(t[1]/2.5+1),n=Math.ceil(t[2]/2.5+1),o=Math.ceil(t[3]/2.5+1),a=Math.ceil(t[4]/2.5+1),s=0,l=[],u=0,c=[],h=0,p=[],d=0,g=[],v=[];return r.forEach(function(f,y){var _,m,b,S,C,w={},E=(_=r[y-1])!==null&&_!==void 0?_:f,P=(E.high+E.close+E.low+E.open)/4,D=Math.max(0,f.high-P),A=Math.max(0,P-f.low);y>=t[0]-1&&(w.cr=A!==0?D/A*100:0,s+=w.cr,u+=w.cr,h+=w.cr,d+=w.cr,y>=t[0]+t[1]-2&&(l.push(s/t[1]),y>=t[0]+t[1]+i-3&&(w.ma1=l[l.length-1-i]),s-=(m=v[y-(t[1]-1)].cr)!==null&&m!==void 0?m:0),y>=t[0]+t[2]-2&&(c.push(u/t[2]),y>=t[0]+t[2]+n-3&&(w.ma2=c[c.length-1-n]),u-=(b=v[y-(t[2]-1)].cr)!==null&&b!==void 0?b:0),y>=t[0]+t[3]-2&&(p.push(h/t[3]),y>=t[0]+t[3]+o-3&&(w.ma3=p[p.length-1-o]),h-=(S=v[y-(t[3]-1)].cr)!==null&&S!==void 0?S:0),y>=t[0]+t[4]-2&&(g.push(d/t[4]),y>=t[0]+t[4]+a-3&&(w.ma4=g[g.length-1-a]),d-=(C=v[y-(t[4]-1)].cr)!==null&&C!==void 0?C:0)),v.push(w)}),v}},ln={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=Math.max(t[0],t[1]),n=0,o=0,a=0,s=[];return r.forEach(function(l,u){var c,h={},p=l.close;n+=p,o+=p;var d=0,g=0;if(u>=t[0]-1&&(d=n/t[0],n-=r[u-(t[0]-1)].close),u>=t[1]-1&&(g=o/t[1],o-=r[u-(t[1]-1)].close),u>=i-1){var v=d-g;h.dma=v,a+=v,u>=i+t[2]-2&&(h.ama=a/t[2],a-=(c=s[u-(t[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(h)}),s}},un={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=0,c=0,h=[];return r.forEach(function(p,d){var g,v,f={},y=(g=r[d-1])!==null&&g!==void 0?g:p,_=y.close,m=p.high,b=p.low,S=m-b,C=Math.abs(m-_),w=Math.abs(_-b),E=m-y.high,P=y.low-b,D=Math.max(Math.max(S,C),w),A=E>0&&E>P?E:0,B=P>0&&P>E?P:0;if(i+=D,n+=A,o+=B,d>=t[0]-1){d>t[0]-1?(a=a-a/t[0]+D,s=s-s/t[0]+A,l=l-l/t[0]+B):(a=i,s=n,l=o);var k=0,I=0;a!==0&&(k=100*s/a,I=100*l/a),f.pdi=k,f.mdi=I;var F=0;I+k!==0&&(F=Math.abs(I-k)/(I+k)*100),u+=F,d>=2*t[0]-2&&(c=d>2*t[0]-2?(c*(t[0]-1)+F)/t[0]:u/t[0],f.adx=c,d>=2*t[0]+t[1]-3&&(f.adxr=(((v=h[d-(t[1]-1)].adx)!==null&&v!==void 0?v:0)+c)/2))}h.push(f)}),h}},cn={name:"EMA",shortName:"EMA",series:x.IndicatorSeries.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ema".concat(t+1),title:"EMA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=0,o=[];return r.map(function(a,s){var l={},u=a.close;return n+=u,t.forEach(function(c,h){s>=c-1&&(o[h]=s>c-1?(2*u+(c-1)*o[h])/(c+1):n/c,l[i[h].key]=o[h])}),l})}},hn={name:"MA",shortName:"MA",series:x.IndicatorSeries.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"ma".concat(t+1),title:"MA".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=[];return r.map(function(o,a){var s={},l=o.close;return t.forEach(function(u,c){var h;n[c]=((h=n[c])!==null&&h!==void 0?h:0)+l,a>=u-1&&(s[i[c].key]=n[c]/u,n[c]-=r[a-(u-1)].close)}),s})}},dn={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(r){var e,t,i=r.data,n=r.indicator,o=r.defaultStyles,a=i.prev,s=i.current,l=(e=a?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,u=(t=s?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,c="";return c=u>0?G(n.styles,"bars[0].upColor",o.bars[0].upColor):u<0?G(n.styles,"bars[0].downColor",o.bars[0].downColor):G(n.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor),{style:l<u?x.PolygonType.Stroke:x.PolygonType.Fill,color:c,borderColor:c}}}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=Math.max(t[0],t[1]);return r.map(function(c,h){var p={},d=c.close;return i+=d,h>=t[0]-1&&(n=h>t[0]-1?(2*d+(t[0]-1)*n)/(t[0]+1):i/t[0]),h>=t[1]-1&&(o=h>t[1]-1?(2*d+(t[1]-1)*o)/(t[1]+1):i/t[1]),h>=u-1&&(a=n-o,p.dif=a,s+=a,h>=u+t[2]-2&&(l=h>u+t[2]-2?(2*a+l*(t[2]-1))/(t[2]+1):s/t[2],p.macd=2*(a-l),p.dea=l)),p})}},pn={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){var i=t+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t,o=[],a=[];return r.map(function(s,l){var u,c={},h=((u=r[l-1])!==null&&u!==void 0?u:s).close,p=s.close-h;return n.forEach(function(d,g){var v,f,y;if(p>0?o[g]=((v=o[g])!==null&&v!==void 0?v:0)+p:a[g]=((f=a[g])!==null&&f!==void 0?f:0)+Math.abs(p),l>=d-1){a[g]!==0?c[i[g].key]=100-100/(1+o[g]/a[g]):c[i[g].key]=0;var _=r[l-(d-1)],m=(y=r[l-d])!==null&&y!==void 0?y:_,b=_.close-m.close;b>0?o[g]-=b:a[g]-=Math.abs(b)}}),c})}},gn={name:"SMA",shortName:"SMA",series:x.IndicatorSeries.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(r,e){var t=e.calcParams,i=0,n=0;return r.map(function(o,a){var s={},l=o.close;return i+=l,a>=t[0]-1&&(n=a>t[0]-1?(l*t[1]+n*(t[0]-t[1]+1))/(t[0]+1):i/t[0],s.sma=n),s})}},vn={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[];return r.forEach(function(n,o){var a,s,l,u,c={},h=n.close;if(o>=t[0]-1){var p=Qe(r.slice(o-(t[0]-1),o+1),"high","low"),d=p[0],g=p[1],v=d-g,f=(h-g)/(v===0?1:v)*100;c.k=((t[1]-1)*((s=(a=i[o-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+f)/t[1],c.d=((t[2]-1)*((u=(l=i[o-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/t[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},fn={name:"SAR",shortName:"SAR",series:x.IndicatorSeries.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(r){var e,t,i,n=r.data,o=r.indicator,a=r.defaultStyles,s=n.current;return{color:((e=s?.sar)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER)<(((t=s?.high)!==null&&t!==void 0?t:0)+((i=s?.low)!==null&&i!==void 0?i:0))/2?G(o.styles,"circles[0].upColor",a.circles[0].upColor):G(o.styles,"circles[0].downColor",a.circles[0].downColor)}}}],calc:function(r,e){var t=e.calcParams,i=t[0]/100,n=t[1]/100,o=t[2]/100,a=i,s=-100,l=!1,u=0;return r.map(function(c,h){var p=u,d=c.high,g=c.low;if(l){(s===-100||s<d)&&(s=d,a=Math.min(a+n,o)),u=p+a*(s-p);var v=Math.min(r[Math.max(1,h)-1].low,g);u>c.low?(u=s,a=i,s=-100,l=!l):u>v&&(u=v)}else{(s===-100||s>g)&&(s=g,a=Math.min(a+n,o)),u=p+a*(s-p);var f=Math.max(r[Math.max(1,h)-1].high,d);u<c.high?(u=s,a=0,s=-100,l=!l):u<f&&(u=f)}return{high:d,low:g,sar:u}})}};function ei(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(r){var e=r.data,t=r.indicator,i=r.defaultStyles,n=e.current,o=G(t.styles,"bars[0].noChangeColor",i.bars[0].noChangeColor);return T(n)&&(n.close>n.open?o=G(t.styles,"bars[0].upColor",i.bars[0].upColor):n.close<n.open&&(o=G(t.styles,"bars[0].downColor",i.bars[0].downColor))),{color:o}}}}var yn={name:"VOL",shortName:"VOL",series:x.IndicatorSeries.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},ei()],regenerateFigures:function(r){var e=r.map(function(t,i){return{key:"ma".concat(i+1),title:"MA".concat(t,": "),type:"line"}});return e.push(ei()),e},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t,o=[];return r.map(function(a,s){var l,u=(l=a.volume)!==null&&l!==void 0?l:0,c={volume:u,open:a.open,close:a.close};return n.forEach(function(h,p){var d,g;o[p]=((d=o[p])!==null&&d!==void 0?d:0)+u,s>=h-1&&(c[i[p].key]=o[p]/h,o[p]-=(g=r[s-(h-1)].volume)!==null&&g!==void 0?g:0)}),c})}},mn={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"wr".concat(t+1),title:"WR".concat(t+1,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t;return r.map(function(o,a){var s={},l=o.close;return n.forEach(function(u,c){var h=u-1;if(a>=h){var p=Qe(r.slice(a-h,a+1),"high","low"),d=p[0],g=d-p[1];s[i[c].key]=g===0?0:(l-d)/g*100}}),s})}},oe={},_n=[en,nn,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(r){return r.map(function(e,t){return{key:"bias".concat(t+1),title:"BIAS".concat(e,": "),type:"line"}})},calc:function(r,e){var t=e.calcParams,i=e.figures,n=t,o=[];return r.map(function(a,s){var l={},u=a.close;return n.forEach(function(c,h){var p;if(o[h]=((p=o[h])!==null&&p!==void 0?p:0)+u,s>=c-1){var d=o[h]/n[h];l[i[h].key]=(u-d)/d*100,o[h]-=r[s-(c-1)].close}}),l})}},rn,{name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0;return r.map(function(s,l){var u,c,h={},p=s.high,d=s.low,g=s.open,v=((u=r[l-1])!==null&&u!==void 0?u:s).close;if(o+=p-g,a+=g-d,i+=p-v,n+=v-d,l>=t[0]-1){h.ar=a!==0?o/a*100:0,h.br=n!==0?i/n*100:0;var f=r[l-(t[0]-1)],y=f.high,_=f.low,m=f.open,b=((c=r[l-t[0]])!==null&&c!==void 0?c:r[l-(t[0]-1)]).close;i-=y-b,n-=b-_,o-=y-m,a-=m-_}return h})}},on,an,sn,ln,un,{name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.map(function(o,a){var s,l={};if(a>0){var u=r[a-1],c=o.high,h=o.low,p=(s=o.volume)!==null&&s!==void 0?s:0,d=(c+h)/2-(u.high+u.low)/2;if(p===0||c-h==0)l.emv=0;else{var g=p/1e8/(c-h);l.emv=d/g}i+=l.emv,n.push(l.emv),a>=t[0]&&(l.maEmv=i/t[0],i-=n[a-t[0]])}return l})}},cn,{name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=[];return r.forEach(function(o,a){var s,l={};if(a>=t[0]){var u=o.close,c=r[a-t[0]].close;l.mtm=u-c,i+=l.mtm,a>=t[0]+t[1]-1&&(l.maMtm=i/t[1],i-=(s=n[a-(t[1]-1)].mtm)!==null&&s!==void 0?s:0)}n.push(l)}),n}},hn,dn,{name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[];return r.forEach(function(a,s){var l,u,c,h,p=(l=r[s-1])!==null&&l!==void 0?l:a;a.close<p.close?n-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>p.close&&(n+=(c=a.volume)!==null&&c!==void 0?c:0);var d={obv:n};i+=n,s>=t[0]-1&&(d.maObv=i/t[0],i-=(h=o[s-(t[0]-1)].obv)!==null&&h!==void 0?h:0),o.push(d)}),o}},{name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(r){var e=0;return r.map(function(t,i){var n,o,a={},s=t.close,l=(n=t.volume)!==null&&n!==void 0?n:1,u=((o=r[i-1])!==null&&o!==void 0?o:t).close,c=0,h=u*l;return h!==0&&(c=(s-u)/h),e+=c,a.pvt=e,a})}},{name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=[],a=[];return r.forEach(function(s,l){var u,c,h={},p=((u=r[l-1])!==null&&u!==void 0?u:s).close,d=s.close-p>0?1:0;o.push(d),i+=d,l>=t[0]-1&&(h.psy=i/t[0]*100,n+=h.psy,l>=t[0]+t[1]-2&&(h.maPsy=n/t[1],n-=(c=a[l-(t[1]-1)].psy)!==null&&c!==void 0?c:0),i-=o[l-(t[0]-1)]),a.push(h)}),a}},{name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=[],n=0;return r.forEach(function(o,a){var s,l,u={};if(a>=t[0]-1){var c=o.close,h=((s=r[a-t[0]])!==null&&s!==void 0?s:r[a-(t[0]-1)]).close;u.roc=h!==0?(c-h)/h*100:0,n+=u.roc,a>=t[0]-1+t[1]-1&&(u.maRoc=n/t[1],n-=(l=i[a-(t[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},pn,gn,vn,fn,{name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=0,c=[];return r.forEach(function(h,p){var d,g={},v=h.close;if(i+=v,p>=t[0]-1&&(n=p>t[0]-1?(2*v+(t[0]-1)*n)/(t[0]+1):i/t[0],s+=n,p>=2*t[0]-2&&(o=p>2*t[0]-2?(2*n+(t[0]-1)*o)/(t[0]+1):s/t[0],l+=o,p>=3*t[0]-3))){var f=0,y=0;p>3*t[0]-3?y=((f=(2*o+(t[0]-1)*a)/(t[0]+1))-a)/a*100:f=l/t[0],a=f,g.trix=y,u+=y,p>=3*t[0]+t[1]-4&&(g.maTrix=u/t[1],u-=(d=c[p-(t[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(g)}),c}},yn,{name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(r,e){var t=e.calcParams,i=0,n=0,o=0,a=0,s=[];return r.forEach(function(l,u){var c,h,p,d,g,v={},f=l.close,y=((c=r[u-1])!==null&&c!==void 0?c:l).close,_=(h=l.volume)!==null&&h!==void 0?h:0;if(f>y?i+=_:f<y?n+=_:o+=_,u>=t[0]-1){var m=o/2;v.vr=n+m===0?0:(i+m)/(n+m)*100,a+=v.vr,u>=t[0]+t[1]-2&&(v.maVr=a/t[1],a-=(p=s[u-(t[1]-1)].vr)!==null&&p!==void 0?p:0);var b=r[u-(t[0]-1)],S=(d=r[u-t[0]])!==null&&d!==void 0?d:b,C=b.close,w=(g=b.volume)!==null&&g!==void 0?g:0;C>S.close?i-=w:C<S.close?n-=w:o-=w}s.push(v)}),s}},mn];function ii(r){var e;return(e=oe[r])!==null&&e!==void 0?e:null}_n.forEach(function(r){oe[r.name]=Ke.extend(r)});var xn={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t,i=r.chart,n=r.coordinates,o=r.bounding,a=r.overlay,s=r.yAxis,l=a.points;if(n.length>0){var u=0;(e=s?.isInCandle())===null||e===void 0||e?u=i.getPrecision().price:((t=i.getIndicators({paneId:a.paneId}).get(a.paneId))!==null&&t!==void 0?t:[]).forEach(function(v){u=Math.max(u,v.precision)});var c=[],h=[],p=o.width;if(n.length>1&&R(l[0].value)&&R(l[1].value)){var d=n[0].y-n[1].y,g=l[0].value-l[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(v){var f,y=n[1].y+d*v,_=i.getDecimalFold().format(i.getThousandsSeparator().format((((f=l[1].value)!==null&&f!==void 0?f:0)+g*v).toFixed(u)));c.push({coordinates:[{x:0,y},{x:p,y}]}),h.push({x:0,y,text:"".concat(_," (").concat((100*v).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:c},{type:"text",isCheckEvent:!1,attrs:h}]}return[]}},bn={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding,i={x:0,y:e[0].y};return T(e[1])&&e[0].x<e[1].x&&(i.x=t.width),[{type:"line",attrs:{coordinates:[e[0],i]}}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},Ee=function(){function r(){this._children=[],this._callbacks=new Map}return r.prototype.registerEvent=function(e,t){return this._callbacks.set(e,t),this},r.prototype.onEvent=function(e,t,i){var n=this._callbacks.get(e);return!(!T(n)||!this.checkEventOn(t))&&n(t,i)},r.prototype.checkEventOn=function(e){var t,i;try{for(var n=J(this._children),o=n.next();!o.done;o=n.next())if(o.value.checkEventOn(e))return!0}catch(a){t={error:a}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!1},r.prototype.dispatchEvent=function(e,t,i){var n=this._children.length-1;if(n>-1){for(var o=n;o>-1;o--)if(this._children[o].dispatchEvent(e,t,i))return!0}return this.onEvent(e,t,i)},r.prototype.addChild=function(e){return this._children.push(e),this},r.prototype.clear=function(){this._children=[]},r}(),ni=function(r){function e(t){var i=r.call(this)||this;return i.attrs=t.attrs,i.styles=t.styles,i}return V(e,r),e.prototype.checkEventOn=function(t){return this.checkEventOnImp(t,this.attrs,this.styles)},e.prototype.setAttrs=function(t){return this.attrs=t,this},e.prototype.setStyles=function(t){return this.styles=t,this},e.prototype.draw=function(t){this.drawImp(t,this.attrs,this.styles)},e.extend=function(t){var i=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return V(o,n),o.prototype.checkEventOnImp=function(a,s,l){return t.checkEventOn(a,s,l)},o.prototype.drawImp=function(a,s,l){t.draw(a,s,l)},o}(e);return i},e}(Ee);function ri(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),a=o.next();!a.done;a=o.next()){var s=a.value.coordinates;if(s.length>1)for(var l=1;l<s.length;l++){var u=s[l-1],c=s[l];if(u.x===c.x){if(Math.abs(u.y-r.y)+Math.abs(c.y-r.y)-Math.abs(u.y-c.y)<4&&Math.abs(r.x-u.x)<2)return!0}else{var h=ae(u,c),p=Pe(h,r),d=Math.abs(p-r.y);if(Math.abs(u.x-r.x)+Math.abs(c.x-r.x)-Math.abs(u.x-c.x)<4&&d*d/(h[0]*h[0]+1)<4)return!0}}}}catch(g){t={error:g}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function Pe(r,e){return r!==null?e.x*r[0]+r[1]:e.y}function Kt(r,e,t){return Pe(ae(r,e),t)}function ae(r,e){var t=r.x-e.x;if(t!==0){var i=(r.y-e.y)/t;return[i,r.y-i*r.x]}return null}function oi(r,e,t){var i=e.length,n=R(t)?t>0&&t<1?t:0:t?.5:0;if(n>0&&i>2){for(var o=e[0].x,a=e[0].y,s=1;s<i-1;s++){var l=e[s-1],u=e[s],c=e[s+1],h=u.x-l.x,p=u.y-l.y,d=c.x-u.x,g=c.y-u.y,v=c.x-l.x,f=c.y-l.y,y=Math.sqrt(h*h+p*p),_=Math.sqrt(d*d+g*g),m=_/(_+y),b=u.x+v*n*m,S=u.y+f*n*m;b=Math.min(b,Math.max(c.x,u.x)),S=Math.min(S,Math.max(c.y,u.y)),b=Math.max(b,Math.min(c.x,u.x)),S=Math.max(S,Math.min(c.y,u.y)),v=b-u.x,f=S-u.y;var C=u.x-v*y/_,w=u.y-f*y/_;C=Math.min(C,Math.max(l.x,u.x)),w=Math.min(w,Math.max(l.y,u.y)),C=Math.max(C,Math.min(l.x,u.x)),w=Math.max(w,Math.min(l.y,u.y)),v=u.x-C,f=u.y-w,b=u.x+v*_/y,S=u.y+f*_/y,r.bezierCurveTo(o,a,C,w,u.x,u.y),o=b,a=S}var E=e[i-1];r.bezierCurveTo(o,a,E.x,E.y,E.x,E.y)}else for(s=1;s<i;s++)r.lineTo(e[s].x,e[s].y)}var Cn={name:"line",checkEventOn:ri,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?x.LineType.Solid:s,u=o.smooth,c=u!==void 0&&u,h=o.size,p=h===void 0?1:h,d=o.color,g=d===void 0?"currentColor":d,v=o.dashedValue,f=v===void 0?[2,2]:v;i.lineWidth=p,i.strokeStyle=g,l===x.LineType.Dashed?i.setLineDash(f):i.setLineDash([]);var y=p%2==1?.5:0;a.forEach(function(_){var m=_.coordinates;m.length>1&&(m.length!==2||m[0].x!==m[1].x&&m[0].y!==m[1].y?(i.save(),p%2==1&&i.translate(.5,.5),i.beginPath(),i.moveTo(m[0].x,m[0].y),oi(i,m,c),i.stroke(),i.closePath(),i.restore()):(i.beginPath(),m[0].x===m[1].x?(i.moveTo(m[0].x+y,m[0].y),i.lineTo(m[1].x+y,m[1].y)):(i.moveTo(m[0].x,m[0].y+y),i.lineTo(m[1].x,m[1].y+y)),i.stroke(),i.closePath()))})})(r,e,t)}};function ai(r,e,t){var i=t??0,n=[];if(r.length>1)if(r[0].x===r[1].x){var o=e.height;if(n.push({coordinates:[{x:r[0].x,y:0},{x:r[0].x,y:o}]}),r.length>2){n.push({coordinates:[{x:r[2].x,y:0},{x:r[2].x,y:o}]});for(var a=r[0].x-r[2].x,s=0;s<i;s++){var l=a*(s+1);n.push({coordinates:[{x:r[0].x+l,y:0},{x:r[0].x+l,y:o}]})}}}else{var u=e.width,c=ae(r[0],r[1]),h=c[0],p=c[1];if(n.push({coordinates:[{x:0,y:0*h+p},{x:u,y:u*h+p}]}),r.length>2){var d=r[2].y-h*r[2].x;for(n.push({coordinates:[{x:0,y:0*h+d},{x:u,y:u*h+d}]}),a=p-d,s=0;s<i;s++){var g=p+a*(s+1);n.push({coordinates:[{x:0,y:0*h+g},{x:u,y:u*h+g}]})}}}return n}var Tn={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:ai(r.coordinates,r.bounding)}]}},wn={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:ai(r.coordinates,r.bounding,1)}]}},Sn={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e,t,i=r.chart,n=r.coordinates,o=r.bounding,a=r.overlay,s=r.yAxis,l=0;(e=s?.isInCandle())===null||e===void 0||e?l=i.getPrecision().price:((t=i.getIndicators({paneId:a.paneId}).get(a.paneId))!==null&&t!==void 0?t:[]).forEach(function(h){l=Math.max(l,h.precision)});var u=a.points[0].value,c=u===void 0?0:u;return[{type:"line",attrs:{coordinates:[n[0],{x:o.width,y:n[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:n[0].x,y:n[0].y,text:i.getDecimalFold().format(i.getThousandsSeparator().format(c.toFixed(l))),baseline:"bottom"}}]}};function En(r,e){if(r.length>1){var t={x:0,y:0};return t=r[0].x===r[1].x&&r[0].y!==r[1].y?r[0].y<r[1].y?{x:r[0].x,y:e.height}:{x:r[0].x,y:0}:r[0].x>r[1].x?{x:0,y:Kt(r[0],r[1],{x:0,y:r[0].y})}:{x:e.width,y:Kt(r[0],r[1],{x:e.width,y:r[0].y})},{coordinates:[r[0],t]}}return[]}var Pn={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){return[{type:"line",attrs:En(r.coordinates,r.bounding)}]}},In={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return e.length===2?e[0].x===e[1].x?[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Kt(e[0],e[1],{x:0,y:e[0].y})},{x:t.width,y:Kt(e[0],e[1],{x:t.width,y:e[0].y})}]}}]:[]}},kn={name:"simpleAnnotation",totalStep:2,styles:{line:{style:x.LineType.Dashed}},createPointFigures:function(r){var e,t=r.overlay,i=r.coordinates,n="";T(t.extendData)&&(n=U(t.extendData)?t.extendData(t):(e=t.extendData)!==null&&e!==void 0?e:"");var o=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:o,y:a},{x:o,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:s},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:n,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},Mn={name:"simpleTag",totalStep:2,styles:{line:{style:x.LineType.Dashed}},createPointFigures:function(r){var e=r.bounding,t=r.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(r){var e,t,i=r.chart,n=r.overlay,o=r.coordinates,a=r.bounding,s=r.yAxis,l="left",u=0;(e=s?.isFromZero())!==null&&e!==void 0&&e?(l="left",u=0):(l="right",u=a.width);var c="";return T(n.extendData)&&(c=U(n.extendData)?n.extendData(n):(t=n.extendData)!==null&&t!==void 0?t:""),!T(c)&&R(n.points[0].value)&&(c=Z(n.points[0].value,i.getPrecision().price)),{type:"text",attrs:{x:u,y:o[0].y,text:c,align:l,baseline:"middle"}}}},Ut={};function Dn(r){var e;return(e=Ut[r])!==null&&e!==void 0?e:null}[xn,bn,{name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=[];return e.length===2&&t.push({coordinates:e}),[{type:"line",attrs:t}]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].value=t.value,e[1].value=t.value},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].value=i.value)}},{name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]}}]}},Tn,wn,Sn,Pn,{name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]}},In,{name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;if(e.length===2){var i={x:e[0].x,y:0};return e[0].y<e[1].y&&(i.y=t.height),[{type:"line",attrs:{coordinates:[e[0],i]}}]}return[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates;return e.length===2?[{type:"line",attrs:{coordinates:e}}]:[]},performEventPressedMove:function(r){var e=r.points,t=r.performPoint;e[0].timestamp=t.timestamp,e[0].dataIndex=t.dataIndex,e[1].timestamp=t.timestamp,e[1].dataIndex=t.dataIndex},performEventMoveForDrawing:function(r){var e=r.currentStep,t=r.points,i=r.performPoint;e===2&&(t[0].timestamp=i.timestamp,t[0].dataIndex=i.dataIndex)}},{name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var e=r.coordinates,t=r.bounding;return[{type:"line",attrs:{coordinates:[{x:e[0].x,y:0},{x:e[0].x,y:t.height}]}}]}},kn,Mn].forEach(function(r){Ut[r.name]=Ue.extend(r)});var si={light:{grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},dark:{grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}}};function An(r){var e;return(e=si[r])!==null&&e!==void 0?e:null}var q="candle_pane",Fn="indicator_pane_",z="x_axis_pane",li=31536e3,ui=2592e3,ci=86400,hi=3600,di=60,pi=1,Rn=1,Bn=50,Ln=function(){function r(e,t){var i,n,o,a,s=this;this._styles={grid:ji(),candle:(a={show:!0,color:kt,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},{type:x.CandleType.CandleSolid,bar:{upColor:te,downColor:Qt,noChangeColor:It,upBorderColor:te,downBorderColor:Qt,noChangeBorderColor:It,upWickColor:te,downWickColor:Qt,noChangeWickColor:It},area:{lineSize:2,lineColor:et,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Rt(.01)},{offset:1,color:Rt(.2)}],point:{show:!0,color:et,radius:4,rippleColor:Rt(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:M({},a),low:M({},a),last:{show:!0,upColor:te,downColor:Qt,noChangeColor:It,line:{show:!0,style:x.LineType.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:x.PolygonType.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:x.LineType.Solid,borderSize:0,borderDashedValue:[2,2],color:ee,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:x.TooltipShowRule.Always,showType:x.TooltipShowType.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:x.CandleTooltipRectPosition.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:kt,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),indicator:(o=["#FF9600","#935EBD",et,"#E11D74","#01C5C4"].map(function(v){return{style:x.LineType.Solid,smooth:!1,size:1,dashedValue:[2,2],color:v}}),{ohlc:{upColor:ye,downColor:fe,noChangeColor:It},bars:[{style:x.PolygonType.Fill,borderStyle:x.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:ye,downColor:fe,noChangeColor:It}],lines:o,circles:[{style:x.PolygonType.Fill,borderStyle:x.LineType.Solid,borderSize:1,borderDashedValue:[2,2],upColor:ye,downColor:fe,noChangeColor:It}],lastValueMark:{show:!1,text:{show:!1,style:x.PolygonType.Fill,color:ee,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:x.LineType.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:x.TooltipShowRule.Always,showType:x.TooltipShowType.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:kt,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}),xAxis:ze(),yAxis:ze(),separator:{size:1,color:me,fill:!0,activeBackgroundColor:Rt(.08)},crosshair:qi(),overlay:(i=Rt(.35),n=Rt(.25),{point:{color:et,borderColor:i,borderSize:1,radius:5,activeColor:et,activeBorderColor:i,activeBorderSize:3,activeRadius:5},line:{style:x.LineType.Solid,smooth:!1,color:et,size:1,dashedValue:[2,2]},rect:{style:x.PolygonType.Fill,color:n,borderColor:et,borderSize:1,borderRadius:0,borderStyle:x.LineType.Solid,borderDashedValue:[2,2]},polygon:{style:x.PolygonType.Fill,color:et,borderColor:et,borderSize:1,borderStyle:x.LineType.Solid,borderDashedValue:[2,2]},circle:{style:x.PolygonType.Fill,color:n,borderColor:et,borderSize:1,borderStyle:x.LineType.Solid,borderDashedValue:[2,2]},arc:{style:x.LineType.Solid,color:et,size:1,dashedValue:[2,2]},text:{style:x.PolygonType.Fill,color:ee,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:x.LineType.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:et,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:et}})},this._customApi={formatDate:function(v,f){return Ye(s._dateTimeFormat,v,f)},formatBigNumber:He},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(v){return Xe(v,s._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(v){return Ge(v,s._decimalFold.threshold)}},this._precision={price:2,volume:0},this._dataList=[],this._loadMoreDataCallback=null,this._loading=!0,this._loadDataMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=10,this._offsetRightDistance=80,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._cacheVisibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeTicks=new Map,this._visibleRangeTimeTickList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._activeTooltipIcon=null,this._actions=new Map,this._indicators=new Map,this._taskScheduler=new tn,this._overlays=new Map,this._progressOverlayInfo=null,this._pressedOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickOverlayInfo={paneId:"",overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chart=e,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var l=t??{},u=l.styles,c=l.locale,h=l.timezone,p=l.customApi,d=l.thousandsSeparator,g=l.decimalFold;T(u)&&this.setStyles(u),W(c)&&this.setLocale(c),this.setTimezone(h??""),T(p)&&this.setCustomApi(p),T(d)&&this.setThousandsSeparator(d),T(g)&&this.setDecimalFold(g)}return r.prototype.setStyles=function(e){var t,i,n=null;n=W(e)?An(e):e,Y(this._styles,n),st((i=(t=n?.candle)===null||t===void 0?void 0:t.tooltip)===null||i===void 0?void 0:i.custom)&&(this._styles.candle.tooltip.custom=n.candle.tooltip.custom)},r.prototype.getStyles=function(){return this._styles},r.prototype.setCustomApi=function(e){Y(this._customApi,e)},r.prototype.getCustomApi=function(){return this._customApi},r.prototype.setLocale=function(e){this._locale=e},r.prototype.getLocale=function(){return this._locale},r.prototype.setTimezone=function(e){if(!T(this._dateTimeFormat)||this.getTimezone()!==e){var t={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};e.length>0&&(t.timeZone=e);var i=null;try{i=new Intl.DateTimeFormat("en",t)}catch{}i!==null&&(this._classifyTimeTicks(this._dataList),this._adjustVisibleRangeTimeTickList(),this._dateTimeFormat=i)}},r.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},r.prototype.setThousandsSeparator=function(e){Y(this._thousandsSeparator,e)},r.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},r.prototype.setDecimalFold=function(e){Y(this._decimalFold,e)},r.prototype.getDecimalFold=function(){return this._decimalFold},r.prototype.getPrecision=function(){return this._precision},r.prototype.setPrecision=function(e){Y(this._precision,e),this._synchronizeIndicatorSeriesPrecision()},r.prototype.getDataList=function(){return this._dataList},r.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},r.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},r.prototype.addData=function(e,t,i){var n,o,a,s,l=this,u=!1,c=!1,h=0;if(st(e)){switch(h=e.length,t){case $.Init:this.clearData(),this._dataList=e,this._loadDataMore.backward=(n=i?.forward)!==null&&n!==void 0&&n,this._loadDataMore.forward=(o=i?.forward)!==null&&o!==void 0&&o,this._classifyTimeTicks(this._dataList),this.setOffsetRightDistance(this._offsetRightDistance),c=!0;break;case $.Backward:this._classifyTimeTicks(e,!0),this._dataList=this._dataList.concat(e),this._loadDataMore.backward=(a=i?.backward)!==null&&a!==void 0&&a,c=h>0;break;case $.Forward:this._dataList=e.concat(this._dataList),this._classifyTimeTicks(this._dataList),this._loadDataMore.forward=(s=i?.forward)!==null&&s!==void 0&&s,c=h>0}this._loading=!1,u=!0}else{var p=this._dataList.length,d=e.timestamp,g=G(this._dataList[p-1],"timestamp",0);if(d>g){this._classifyTimeTicks([e],!0),this._dataList.push(e);var v=this.getLastBarRightSideDiffBarCount();v<0&&this.setLastBarRightSideDiffBarCount(--v),h=1,u=!0,c=!0}else d===g&&(this._dataList[p-1]=e,u=!0,c=!0)}u&&(h>0&&this._overlays.forEach(function(f){f.forEach(function(y){y.points.forEach(function(_){if(!T(_.timestamp)&&T(_.dataIndex)){t===$.Forward&&(_.dataIndex=_.dataIndex+h);var m=l._dataList[_.dataIndex];_.timestamp=m?.timestamp}})})}),c&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this.getIndicatorsByFilter({}).forEach(function(f,y){f.forEach(function(_){l._addIndicatorCalcTask(y,_,t)})}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})))},r.prototype.setLoadMoreDataCallback=function(e){this._loadMoreDataCallback=e},r.prototype._calcOptimalBarSpace=function(){var e=1-.2*Math.atan(Math.max(4,this._barSpace)-4)/(.5*Math.PI),t=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));t%2==0&&t+2>=this._barSpace&&--t,this._gapBarSpace=Math.max(1,t)},r.prototype._classifyTimeTicks=function(e,t){var i,n=0,o=null;t!=null&&t?(n=this._dataList.length,o=this._dataList[n-1]):this._timeTicks.clear();for(var a=0;a<e.length;a++){var s=e[a],l=pi,u=_e(this._dateTimeFormat,s.timestamp);if(T(o)){var c=_e(this._dateTimeFormat,o.timestamp);l=u.YYYY!==c.YYYY?li:u.MM!==c.MM?ui:u.DD!==c.DD?ci:u.HH!==c.HH?hi:u.mm!==c.mm?di:pi}var h=(i=this._timeTicks.get(l))!==null&&i!==void 0?i:[];h.push({dataIndex:a+n,weight:l,dateTime:u,timestamp:s.timestamp}),this._timeTicks.set(l,h),o=s}},r.prototype._adjustVisibleRangeTimeTickList=function(){var e,t,i=this,n=this._styles.xAxis.tickText,o=Math.max(Math.ceil(this._totalBarSpace/10),Xt("0000-00-00 00:00",n.size,n.weight,n.family)),a=Math.ceil(o/this._barSpace),s=[];Array.from(this._timeTicks.keys()).sort(function(h,p){return p-h}).forEach(function(h){var p=s;s=[];for(var d=p.length,g=0,v=i._timeTicks.get(h),f=v.length,y=1/0,_=-1/0,m=0;m<f;m++){for(var b=v[m],S=b.dataIndex;g<d;){var C=p[g],w=C.dataIndex;if(!(w<S)){y=w;break}g++,s.push(C),_=w,y=1/0}y-S>=a&&S-_>=a&&(s.push(b),_=S)}for(;g<d;g++)s.push(p[g])}),this._visibleRangeTimeTickList=[];try{for(var l=J(s),u=l.next();!u.done;u=l.next()){var c=u.value;c.dataIndex>=this._visibleRange.from&&c.dataIndex<=this._visibleRange.to&&this._visibleRangeTimeTickList.push(c)}}catch(h){e={error:h}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}},r.prototype.getVisibleRangeTimeTickList=function(){return this._visibleRangeTimeTickList},r.prototype._adjustVisibleRange=function(){var e,t,i=this,n=this._dataList.length,o=this._totalBarSpace/this._barSpace,a=0,s=0;this._scrollLimitRole===1?(a=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,s=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(a=this._minVisibleBarCount.left,s=this._minVisibleBarCount.right),a=Math.max(0,a),s=Math.max(0,s);var l=o-Math.min(a,n);this._lastBarRightSideDiffBarCount>l&&(this._lastBarRightSideDiffBarCount=l);var u=-n+Math.min(s,n);this._lastBarRightSideDiffBarCount<u&&(this._lastBarRightSideDiffBarCount=u);var c=Math.round(this._lastBarRightSideDiffBarCount+n+.5),h=c;c>n&&(c=n);var p=Math.round(c-o)-1;p<0&&(p=0);var d=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-o)-1:p;this._visibleRange={from:p,to:c,realFrom:d,realTo:h},this.executeAction(x.ActionType.OnVisibleRangeChange,this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var g=d;g<h;g++){var v=this._dataList[g],f=this.dataIndexToCoordinate(g);this._visibleRangeDataList.push({dataIndex:g,x:f,data:v}),T(v)&&(this._visibleRangeHighLowPrice[0].price<v.high&&(this._visibleRangeHighLowPrice[0].price=v.high,this._visibleRangeHighLowPrice[0].x=f),this._visibleRangeHighLowPrice[1].price>v.low&&(this._visibleRangeHighLowPrice[1].price=v.low,this._visibleRangeHighLowPrice[1].x=f))}if(this._cacheVisibleRange.from===this._visibleRange.from&&this._cacheVisibleRange.to===this._visibleRange.to||(this._cacheVisibleRange=M({},this._visibleRange),this._adjustVisibleRangeTimeTickList()),!this._loading&&T(this._loadMoreDataCallback)){var y=null;p===0?this._loadDataMore.forward&&(this._loading=!0,y={type:$.Forward,data:(e=this._dataList[0])!==null&&e!==void 0?e:null,callback:function(_,m){i.addData(_,$.Forward,{forward:m!=null&&m,backward:m!=null&&m})}}):c===n&&this._loadDataMore.backward&&(this._loading=!0,y={type:$.Backward,data:(t=this._dataList[n-1])!==null&&t!==void 0?t:null,callback:function(_,m){i.addData(_,$.Backward,{forward:m!=null&&m,backward:m!=null&&m})}}),T(y)&&this._loadMoreDataCallback(y)}},r.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},r.prototype.setBarSpace=function(e,t){e<Rn||e>Bn||this._barSpace===e||(this._barSpace=e,this._calcOptimalBarSpace(),t?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}))},r.prototype.setTotalBarSpace=function(e){this._totalBarSpace!==e&&(this._totalBarSpace=e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0))},r.prototype.setOffsetRightDistance=function(e,t){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,e):e,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,t!=null&&t&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})),this},r.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},r.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},r.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},r.prototype.setLastBarRightSideDiffBarCount=function(e){this._lastBarRightSideDiffBarCount=e},r.prototype.setMaxOffsetLeftDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.left=e},r.prototype.setMaxOffsetRightDistance=function(e){this._scrollLimitRole=1,this._maxOffsetDistance.right=e},r.prototype.setLeftMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.left=e},r.prototype.setRightMinVisibleBarCount=function(e){this._scrollLimitRole=0,this._minVisibleBarCount.right=e},r.prototype.getVisibleRange=function(){return this._visibleRange},r.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},r.prototype.scroll=function(e){if(this._scrollEnabled){var t=e/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0});var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this.executeAction(x.ActionType.OnScroll,{distance:n})}},r.prototype.getDataByDataIndex=function(e){var t;return(t=this._dataList[e])!==null&&t!==void 0?t:null},r.prototype.coordinateToFloatIndex=function(e){var t=this._dataList.length,i=(this._totalBarSpace-e)/this._barSpace,n=t+this._lastBarRightSideDiffBarCount-i;return Math.round(1e6*n)/1e6},r.prototype.dataIndexToTimestamp=function(e){var t,i=this.getDataByDataIndex(e);return(t=i?.timestamp)!==null&&t!==void 0?t:null},r.prototype.timestampToDataIndex=function(e){return this._dataList.length===0?0:Se(this._dataList,"timestamp",e)},r.prototype.dataIndexToCoordinate=function(e){var t=this._dataList.length+this._lastBarRightSideDiffBarCount-e;return Math.floor(this._totalBarSpace-(t-.5)*this._barSpace+.5)},r.prototype.coordinateToDataIndex=function(e){return Math.ceil(this.coordinateToFloatIndex(e))-1},r.prototype.zoom=function(e,t){var i,n=this;if(this._zoomEnabled){var o=t??null;R(o?.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var a=o.x,s=this.coordinateToFloatIndex(a),l=this._barSpace,u=this._barSpace+e*(this._barSpace/10);this.setBarSpace(u,function(){n._lastBarRightSideDiffBarCount+=s-n.coordinateToFloatIndex(a)});var c=this._barSpace/l;c!==1&&this.executeAction(x.ActionType.OnZoom,{scale:c})}},r.prototype.setZoomEnabled=function(e){this._zoomEnabled=e},r.prototype.isZoomEnabled=function(){return this._zoomEnabled},r.prototype.setScrollEnabled=function(e){this._scrollEnabled=e},r.prototype.isScrollEnabled=function(){return this._scrollEnabled},r.prototype.setCrosshair=function(e,t){var i=e??{},n=0,o=0;o=R(i.x)?(n=this.coordinateToDataIndex(i.x))<0?0:n>this._dataList.length-1?this._dataList.length-1:n:n=this._dataList.length-1;var a=this._dataList[o],s=this.dataIndexToCoordinate(n),l=this._crosshair.x,u=this._crosshair.y,c=this._crosshair.paneId;this._crosshair=M(M({},i),{realX:s,kLineData:a,realDataIndex:n,dataIndex:o}),l===i.x&&u===i.y&&c===i.paneId||(T(a)&&this._chart.crosshairChange(this._crosshair),t!=null&&t||this._chart.updatePane(1))},r.prototype.getCrosshair=function(){return this._crosshair},r.prototype.setActiveTooltipIcon=function(e){this._activeTooltipIcon=e??null},r.prototype.getActiveTooltipIcon=function(){return this._activeTooltipIcon},r.prototype.executeAction=function(e,t){var i;(i=this._actions.get(e))===null||i===void 0||i.execute(t)},r.prototype.subscribeAction=function(e,t){var i;this._actions.has(e)||this._actions.set(e,new Qi),(i=this._actions.get(e))===null||i===void 0||i.subscribe(t)},r.prototype.unsubscribeAction=function(e,t){var i=this._actions.get(e);T(i)&&(i.unsubscribe(t),i.isEmpty()&&this._actions.delete(e))},r.prototype.hasAction=function(e){var t=this._actions.get(e);return T(t)&&!t.isEmpty()},r.prototype._sortIndicators=function(e){var t;W(e)?(t=this._indicators.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._indicators.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype._addIndicatorCalcTask=function(e,t,i){var n=this;this._taskScheduler.addTask({id:ti(e,t.name),handler:function(){var o;(o=t.onDataStateChange)===null||o===void 0||o.call(t,{state:Gt.Loading,type:i,indicator:t}),t.calcImp(n._dataList).then(function(a){var s;a&&(n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),(s=t.onDataStateChange)===null||s===void 0||s.call(t,{state:Gt.Ready,type:i,indicator:t}))}).catch(function(){var a;(a=t.onDataStateChange)===null||a===void 0||a.call(t,{state:Gt.Error,type:i,indicator:t})})}})},r.prototype.addIndicator=function(e,t,i){var n=e.name,o=this._indicators.get(t);if(T(o)&&T(o.find(function(s){return s.name===n})))return!1;T(o)||(o=[]);var a=new(ii(n));return this._synchronizeIndicatorSeriesPrecision(a),a.override(e),i||(this.removeIndicator({paneId:t}),o=[]),o.push(a),this._indicators.set(t,o),this._sortIndicators(t),this._addIndicatorCalcTask(t,a,$.Init),!0},r.prototype.getIndicatorsByPaneId=function(e){var t;return(t=this._indicators.get(e))!==null&&t!==void 0?t:[]},r.prototype.getIndicatorsByFilter=function(e){var t=function(s,l){return s.filter(function(u){return!T(l)||u.name===l})},i=e.paneId,n=e.name,o=new Map;if(T(i)){var a=this.getIndicatorsByPaneId(i);o.set(i,t(a,n))}else T(n)?this._indicators.forEach(function(s,l){o.set(l,t(s,n))}):this._indicators.forEach(function(s,l){o.set(l,t(s))});return o},r.prototype.removeIndicator=function(e){var t=this,i=!1;return this.getIndicatorsByFilter(e).forEach(function(n,o){var a=t.getIndicatorsByPaneId(o);n.forEach(function(s){var l=a.findIndex(function(u){return u.name===s.name});l>-1&&(t._taskScheduler.removeTask(ti(o,s.name)),a.splice(l,1),i=!0)}),a.length===0&&t._indicators.delete(o)}),i},r.prototype.hasIndicators=function(e){return this._indicators.has(e)},r.prototype._synchronizeIndicatorSeriesPrecision=function(e){var t=this._precision,i=t.price,n=t.volume,o=function(a){switch(a.series){case x.IndicatorSeries.Price:a.setSeriesPrecision(i);break;case x.IndicatorSeries.Volume:a.setSeriesPrecision(n)}};T(e)?o(e):this._indicators.forEach(function(a){a.forEach(function(s){o(s)})})},r.prototype.overrideIndicator=function(e,t){var i=this,n=e.name,o=new Map;if(T(t)){var a=this._indicators.get(t);T(a)&&o.set(t,a)}else o=this._indicators;var s=!1,l=!1;return o.forEach(function(u,c){var h=u.find(function(v){return v.name===n});if(T(h)){h.override(e);var p=h.shouldUpdateImp(),d=p.calc,g=p.draw;p.sort&&(l=!0),d?i._addIndicatorCalcTask(c,h,$.Update):g&&(s=!0)}}),l&&this._sortIndicators(),!!s&&(this._chart.layout({update:!0}),!0)},r.prototype.getOverlaysByFilter=function(e){var t,i,n=e.id,o=e.groupId,a=e.paneId,s=e.name,l=function(d){return d.filter(function(g){return T(n)?g.id===n:T(o)?g.groupId===o&&(!T(s)||g.name===s):!T(s)||g.name===s})},u=new Map;if(T(a)){var c=this.getOverlaysByPaneId(a);u.set(a,l(c))}else this._overlays.forEach(function(d,g){u.set(g,l(d))});var h=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay;if(T(h)){var p=(i=u.get(h.paneId))!==null&&i!==void 0?i:[];p.push(h),u.set(h.paneId,p)}return u},r.prototype.getOverlaysByPaneId=function(e){var t;if(!W(e)){var i=[];return this._overlays.forEach(function(n){i=i.concat(n)}),i}return(t=this._overlays.get(e))!==null&&t!==void 0?t:[]},r.prototype._sortOverlays=function(e){var t;W(e)?(t=this._overlays.get(e))===null||t===void 0||t.sort(function(i,n){return i.zLevel-n.zLevel}):this._overlays.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},r.prototype.addOverlays=function(e,t){var i=this,n=[],o=e.map(function(a,s){var l,u,c,h,p,d;if(T(a.id)){var g=null;try{for(var v=J(i._overlays),f=v.next();!f.done;f=v.next())if(T(m=dt(f.value,2)[1].find(function(S){return S.id===a.id}))){g=m;break}}catch(S){l={error:S}}finally{try{f&&!f.done&&(u=v.return)&&u.call(v)}finally{if(l)throw l.error}}if(T(g))return a.id}var y=Dn(a.name);if(T(y)){var _=(c=a.id)!==null&&c!==void 0?c:Je("overlay_"),m=new y;a.id=_,(h=a.groupId)!==null&&h!==void 0||(a.groupId=_),m.override(a);var b=m.paneId;return n.includes(b)||n.push(b),m.isDrawing()?i._progressOverlayInfo={paneId:b,overlay:m,appointPaneFlag:t[s]}:(i._overlays.has(b)||i._overlays.set(b,[]),(p=i._overlays.get(b))===null||p===void 0||p.push(m)),m.isStart()&&((d=m.onDrawStart)===null||d===void 0||d.call(m,{overlay:m,chart:i._chart})),_}return null});return n.length>0&&(this._sortOverlays(),n.forEach(function(a){i._chart.updatePane(1,a)}),this._chart.updatePane(1,z)),o},r.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},r.prototype.progressOverlayComplete=function(){var e;if(this._progressOverlayInfo!==null){var t=this._progressOverlayInfo,i=t.overlay,n=t.paneId;i.isDrawing()||(this._overlays.has(n)||this._overlays.set(n,[]),(e=this._overlays.get(n))===null||e===void 0||e.push(i),this._sortOverlays(n),this._progressOverlayInfo=null)}},r.prototype.updateProgressOverlayInfo=function(e,t){this._progressOverlayInfo!==null&&(Ht(t)&&t&&(this._progressOverlayInfo.appointPaneFlag=t),this._progressOverlayInfo.paneId=e,this._progressOverlayInfo.overlay.override({paneId:e}))},r.prototype.overrideOverlay=function(e){var t=this,i=!1,n=[];return this.getOverlaysByFilter(e).forEach(function(o,a){o.forEach(function(s){s.override(e);var l=s.shouldUpdate(),u=l.sort,c=l.draw;u&&(i=!0),(u||c)&&(n.includes(a)||n.push(a))})}),i&&this._sortOverlays(),n.length>0&&(n.forEach(function(o){t._chart.updatePane(1,o)}),this._chart.updatePane(1,z),!0)},r.prototype.removeOverlay=function(e){var t=this,i=[];return this.getOverlaysByFilter(e).forEach(function(n,o){var a=t.getOverlaysByPaneId(o);n.forEach(function(s){var l;if((l=s.onRemoved)===null||l===void 0||l.call(s,{overlay:s,chart:t._chart}),i.includes(o)||i.push(o),s.isDrawing())t._progressOverlayInfo=null;else{var u=a.findIndex(function(c){return c.id===s.id});u>-1&&a.splice(u,1)}a.length===0&&t._overlays.delete(o)})}),i.length>0&&(i.forEach(function(n){t._chart.updatePane(1,n)}),this._chart.updatePane(1,z),!0)},r.prototype.setPressedOverlayInfo=function(e){this._pressedOverlayInfo=e},r.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},r.prototype.setHoverOverlayInfo=function(e,t){var i=this._hoverOverlayInfo,n=i.overlay,o=i.figureType,a=i.figureKey,s=i.figureIndex,l=e.overlay;if((n?.id!==l?.id||o!==e.figureType||s!==e.figureIndex)&&(this._hoverOverlayInfo=e,n?.id!==l?.id)){var u=!1,c=!1;n!==null&&(c=!0,U(n.onMouseLeave)&&(n.onMouseLeave(M({chart:this._chart,overlay:n,figureKey:a,figureIndex:s},t)),u=!0)),l!==null&&(c=!0,U(l.onMouseEnter)&&(l.onMouseEnter(M({chart:this._chart,overlay:l,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),u=!0)),c&&this._sortOverlays(),u||this._chart.updatePane(1)}},r.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},r.prototype.setClickOverlayInfo=function(e,t){var i,n,o,a,s=this._clickOverlayInfo,l=s.paneId,u=s.overlay,c=s.figureType,h=s.figureKey,p=s.figureIndex,d=e.overlay;(i=d?.isDrawing())!==null&&i!==void 0&&i||(n=d?.onClick)===null||n===void 0||n.call(d,M({chart:this._chart,overlay:d,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),u?.id===d?.id&&c===e.figureType&&p===e.figureIndex||(this._clickOverlayInfo=e,u?.id!==d?.id&&((o=u?.onDeselected)===null||o===void 0||o.call(u,M({chart:this._chart,overlay:u,figureKey:h,figureIndex:p},t)),(a=d?.onSelected)===null||a===void 0||a.call(d,M({chart:this._chart,overlay:d,figureKey:e.figureKey,figureIndex:e.figureIndex},t)),this._chart.updatePane(1,e.paneId),l!==e.paneId&&this._chart.updatePane(1,l),this._chart.updatePane(1,z)))},r.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},r.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},r.prototype.isOverlayDrawing=function(){var e,t;return(t=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay.isDrawing())!==null&&t!==void 0&&t},r.prototype.clearData=function(){this._loadDataMore.backward=!1,this._loadDataMore.forward=!1,this._loading=!0,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange={from:0,to:0,realFrom:0,realTo:0},this._cacheVisibleRange={from:0,to:0,realFrom:0,realTo:0},this._timeTicks.clear(),this._crosshair={},this._activeTooltipIcon=null},r.prototype.getChart=function(){return this._chart},r}(),Q="main",vt="xAxis",lt="yAxis",Zt="separator",gi=function(){function r(e,t){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Vt,this._mediaQueryListener=function(){var n=Tt(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*n),i._nextPixelHeight=Math.round(i._element.clientHeight*n),i._resetPixelRatio()},this._listener=t,this._element=pt("canvas",e),this._ctx=this._element.getContext("2d"),function(){return We(this,void 0,void 0,function(){return Ne(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o){var a=new ResizeObserver(function(s){o(s.every(function(l){return"devicePixelContentBoxSize"in l})),a.disconnect()});a.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,n.sent()]}})})}().then(function(n){i._supportedDevicePixelContentBox=n,n?(i._resizeObserver=new ResizeObserver(function(o){var a=o.find(function(l){return l.target===i._element}),s=a?.devicePixelContentBoxSize[0];T(s)&&(i._nextPixelWidth=s.inlineSize,i._nextPixelHeight=s.blockSize,i._pixelWidth===i._nextPixelWidth&&i._pixelHeight===i._nextPixelHeight||i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(Tt(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(n){return!1})}return r.prototype._resetPixelRatio=function(){var e=this;this._executeListener(function(){var t=e._element.clientWidth,i=e._element.clientHeight;e._width=t,e._height=i,e._pixelWidth=e._nextPixelWidth,e._pixelHeight=e._nextPixelHeight,e._element.width=e._nextPixelWidth,e._element.height=e._nextPixelHeight;var n=e._nextPixelWidth/t,o=e._nextPixelHeight/i;e._ctx.scale(n,o)})},r.prototype._executeListener=function(e){var t=this;this._requestAnimationId===Vt&&(this._requestAnimationId=re(function(){t._ctx.clearRect(0,0,t._width,t._height),e?.(),t._listener(),t._requestAnimationId=Vt}))},r.prototype.update=function(e,t){if(this._width!==e||this._height!==t){if(this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px"),!this._supportedDevicePixelContentBox){var i=Tt(this._element);this._nextPixelWidth=Math.round(e*i),this._nextPixelHeight=Math.round(t*i),this._resetPixelRatio()}}else this._executeListener()},r.prototype.getElement=function(){return this._element},r.prototype.getContext=function(){return this._ctx},r.prototype.destroy=function(){T(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),T(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},r}(),vi=function(r){function e(t,i){var n=r.call(this)||this;return n._bounding=ne(),n._pane=i,n._rootContainer=t,n._container=n.createContainer(),t.appendChild(n._container),n}return V(e,r),e.prototype.setBounding=function(t){return Y(this._bounding,t),this},e.prototype.getContainer=function(){return this._container},e.prototype.getBounding=function(){return this._bounding},e.prototype.getPane=function(){return this._pane},e.prototype.update=function(t){this.updateImp(this._container,this._bounding,t??3)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(Ee),Ie=function(r){function e(t,i){var n=r.call(this,t,i)||this;n._mainCanvas=new gi({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateMain(n._mainCanvas.getContext())}),n._overlayCanvas=new gi({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){n.updateOverlay(n._overlayCanvas.getContext())});var o=n.getContainer();return o.appendChild(n._mainCanvas.getElement()),o.appendChild(n._overlayCanvas.getElement()),n}return V(e,r),e.prototype.createContainer=function(){return pt("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},e.prototype.updateImp=function(t,i,n){var o=i.width,a=i.height,s=i.left;t.style.left="".concat(s,"px");var l=n,u=t.clientWidth,c=t.clientHeight;switch(o===u&&a===c||(t.style.width="".concat(o,"px"),t.style.height="".concat(a,"px"),l=3),l){case 0:this._mainCanvas.update(o,a);break;case 1:this._overlayCanvas.update(o,a);break;case 3:case 4:this._mainCanvas.update(o,a),this._overlayCanvas.update(o,a)}},e.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=pt("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Tt(a);return a.width=n*l,a.height=o*l,s.scale(l,l),s.drawImage(this._mainCanvas.getElement(),0,0,n,o),t&&s.drawImage(this._overlayCanvas.getElement(),0,0,n,o),a},e}(vi);function Wt(r){return r==="transparent"||r==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(r)||/^[hH][Ss][Ll][Aa]\(([\s]*(360ï½œ3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(r)}function fi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.y,c=s.r,h=r.x-l,p=r.y-u;if(!(h*h+p*p>c*c))return!0}}catch(d){t={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var On={name:"circle",checkEventOn:fi,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?x.PolygonType.Fill:s,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,g=d===void 0?"currentColor":d,v=o.borderStyle,f=v===void 0?x.LineType.Solid:v,y=o.borderDashedValue,_=y===void 0?[2,2]:y,m=!(l!==x.PolygonType.Fill&&o.style!==x.PolygonType.StrokeFill||W(c)&&Wt(c));m&&(i.fillStyle=c,a.forEach(function(b){var S=b.x,C=b.y,w=b.r;i.beginPath(),i.arc(S,C,w,0,2*Math.PI),i.closePath(),i.fill()})),(l===x.PolygonType.Stroke||o.style===x.PolygonType.StrokeFill)&&p>0&&!Wt(g)&&(i.strokeStyle=g,i.lineWidth=p,f===x.LineType.Dashed?i.setLineDash(_):i.setLineDash([]),a.forEach(function(b){var S=b.x,C=b.y,w=b.r;(!m||w>p)&&(i.beginPath(),i.arc(S,C,w,0,2*Math.PI),i.closePath(),i.stroke())}))})(r,e,t)}};function yi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),a=o.next();!a.done;a=o.next()){for(var s=a.value,l=!1,u=s.coordinates,c=0,h=u.length-1;c<u.length;h=c++)u[c].y>r.y!=u[h].y>r.y&&r.x<(u[h].x-u[c].x)*(r.y-u[c].y)/(u[h].y-u[c].y)+u[c].x&&(l=!l);if(l)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}var Vn={name:"polygon",checkEventOn:yi,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?x.PolygonType.Fill:s,u=o.color,c=u===void 0?"currentColor":u,h=o.borderSize,p=h===void 0?1:h,d=o.borderColor,g=d===void 0?"currentColor":d,v=o.borderStyle,f=v===void 0?x.LineType.Solid:v,y=o.borderDashedValue,_=y===void 0?[2,2]:y;l!==x.PolygonType.Fill&&o.style!==x.PolygonType.StrokeFill||W(c)&&Wt(c)||(i.fillStyle=c,a.forEach(function(m){var b=m.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var S=1;S<b.length;S++)i.lineTo(b[S].x,b[S].y);i.closePath(),i.fill()})),(l===x.PolygonType.Stroke||o.style===x.PolygonType.StrokeFill)&&p>0&&!Wt(g)&&(i.strokeStyle=g,i.lineWidth=p,f===x.LineType.Dashed?i.setLineDash(_):i.setLineDash([]),a.forEach(function(m){var b=m.coordinates;i.beginPath(),i.moveTo(b[0].x,b[0].y);for(var S=1;S<b.length;S++)i.lineTo(b[S].x,b[S].y);i.closePath(),i.stroke()}))})(r,e,t)}};function mi(r,e){var t,i,n=[];n=n.concat(e);try{for(var o=J(n),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.x,u=s.width;u<4&&(l-=2,u=4);var c=s.y,h=s.height;if(h<4&&(c-=2,h=4),r.x>=l&&r.x<=l+u&&r.y>=c&&r.y<=c+h)return!0}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!1}function _i(r,e,t){var i,n=[];n=n.concat(e);var o=t.style,a=o===void 0?x.PolygonType.Fill:o,s=t.color,l=s===void 0?"transparent":s,u=t.borderSize,c=u===void 0?1:u,h=t.borderColor,p=h===void 0?"transparent":h,d=t.borderStyle,g=d===void 0?x.LineType.Solid:d,v=t.borderRadius,f=v===void 0?0:v,y=t.borderDashedValue,_=y===void 0?[2,2]:y,m=(i=r.roundRect)!==null&&i!==void 0?i:r.rect,b=!(a!==x.PolygonType.Fill&&t.style!==x.PolygonType.StrokeFill||W(l)&&Wt(l));if(b&&(r.fillStyle=l,n.forEach(function(w){var E=w.x,P=w.y,D=w.width,A=w.height;r.beginPath(),m.call(r,E,P,D,A,f),r.closePath(),r.fill()})),(a===x.PolygonType.Stroke||t.style===x.PolygonType.StrokeFill)&&c>0&&!Wt(p)){r.strokeStyle=p,r.fillStyle=p,r.lineWidth=c,g===x.LineType.Dashed?r.setLineDash(_):r.setLineDash([]);var S=c%2==1?.5:0,C=Math.round(2*S);n.forEach(function(w){var E=w.x,P=w.y,D=w.width,A=w.height;D>2*c&&A>2*c?(r.beginPath(),m.call(r,E+S,P+S,D-C,A-C,f),r.closePath(),r.stroke()):b||r.fillRect(E,P,D,A)})}}var Wn={name:"rect",checkEventOn:mi,draw:function(r,e,t){_i(r,e,t)}};function xi(r,e){var t=e.size,i=t===void 0?12:t,n=e.paddingLeft,o=n===void 0?0:n,a=e.paddingTop,s=a===void 0?0:a,l=e.paddingRight,u=l===void 0?0:l,c=e.paddingBottom,h=c===void 0?0:c,p=e.weight,d=p===void 0?"normal":p,g=e.family,v=r.x,f=r.y,y=r.text,_=r.align,m=_===void 0?"left":_,b=r.baseline,S=b===void 0?"top":b,C=r.width,w=r.height,E=C??o+Xt(y,i,d,g)+u,P=w??s+i+h,D=0;switch(m){case"left":case"start":D=v;break;case"right":case"end":D=v-E;break;default:D=v-E/2}var A=0;switch(S){case"top":case"hanging":A=f;break;case"bottom":case"ideographic":case"alphabetic":A=f-P;break;default:A=f-P/2}return{x:D,y:A,width:E,height:P}}function bi(r,e,t){var i,n,o=[];o=o.concat(e);try{for(var a=J(o),s=a.next();!s.done;s=a.next()){var l=xi(s.value,t),u=l.x,c=l.y,h=l.width,p=l.height;if(r.x>=u&&r.x<=u+h&&r.y>=c&&r.y<=c+p)return!0}}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return!1}var Nn={name:"text",checkEventOn:bi,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.color,l=s===void 0?"currentColor":s,u=o.size,c=u===void 0?12:u,h=o.family,p=o.weight,d=o.paddingLeft,g=d===void 0?0:d,v=o.paddingTop,f=v===void 0?0:v,y=o.paddingRight,_=y===void 0?0:y,m=a.map(function(b){return xi(b,o)});_i(i,m,M(M({},o),{color:o.backgroundColor})),i.textAlign="left",i.textBaseline="top",i.font=Dt(c,p,h),i.fillStyle=l,a.forEach(function(b,S){var C=m[S];i.fillText(b.text,C.x+g,C.y+f,C.width-g-_)})})(r,e,t)}};function Ci(r,e){var t,i,n,o,a,s,l=[];l=l.concat(e);try{for(var u=J(l),c=u.next();!c.done;c=u.next()){var h=c.value;if(Math.abs((o=h,a=void 0,s=void 0,a=(n=r).x-o.x,s=n.y-o.y,Math.sqrt(a*a+s*s)-h.r))<2){var p=h.r,d=h.startAngle,g=h.endAngle,v=p*Math.cos(d)+h.x,f=p*Math.sin(d)+h.y,y=p*Math.cos(g)+h.x,_=p*Math.sin(g)+h.y;if(r.x<=Math.max(v,y)+2&&r.x>=Math.min(v,y)-2&&r.y<=Math.max(f,_)+2&&r.y>=Math.min(f,_)-2)return!0}}}catch(m){t={error:m}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return!1}var zn={name:"arc",checkEventOn:Ci,draw:function(r,e,t){(function(i,n,o){var a=[];a=a.concat(n);var s=o.style,l=s===void 0?x.LineType.Solid:s,u=o.size,c=u===void 0?1:u,h=o.color,p=h===void 0?"currentColor":h,d=o.dashedValue,g=d===void 0?[2,2]:d;i.lineWidth=c,i.strokeStyle=p,l===x.LineType.Dashed?i.setLineDash(g):i.setLineDash([]),a.forEach(function(v){var f=v.x,y=v.y,_=v.r,m=v.startAngle,b=v.endAngle;i.beginPath(),i.arc(f,y,_,m,b),i.stroke(),i.closePath()})})(r,e,t)}},jt={};[On,Cn,Vn,Wn,Nn,zn].forEach(function(r){jt[r.name]=ni.extend(r)});var ft,rt=function(r){function e(t){var i=r.call(this)||this;return i._widget=t,i}return V(e,r),e.prototype.getWidget=function(){return this._widget},e.prototype.createFigure=function(t,i){var n,o,a=(n=t.name,(o=jt[n])!==null&&o!==void 0?o:null);if(a!==null){var s=new a(t);if(T(i)){for(var l in i)i.hasOwnProperty(l)&&s.registerEvent(l,i[l]);this.addChild(s)}return s}return null},e.prototype.draw=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.clear(),this.drawImp(t,i)},e}(Ee),Yn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n,o=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=o.getBounding(),u=s.getStyles().grid;if(u.show){t.save(),t.globalCompositeOperation="destination-over";var c=u.horizontal;if(c.show){var h=a.getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:0,y:d.coord},{x:l.width,y:d.coord}]}});(i=this.createFigure({name:"line",attrs:h,styles:c}))===null||i===void 0||i.draw(t)}var p=u.vertical;p.show&&(h=s.getXAxisPane().getAxisComponent().getTicks().map(function(d){return{coordinates:[{x:d.coord,y:0},{x:d.coord,y:l.height}]}}),(n=this.createFigure({name:"line",attrs:h,styles:p}))===null||n===void 0||n.draw(t)),t.restore()}},e}(rt),Ti=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.eachChildren=function(t){for(var i=this.getWidget().getPane().getChart().getChartStore(),n=i.getVisibleRangeDataList(),o=i.getBarSpace(),a=n.length,s=0;s<a;)t(n[s],o,s),++s},e}(rt),wi=function(r){function e(){var t=r.apply(this,Yt([],dt(arguments),!1))||this;return t._boundCandleBarClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().executeAction(x.ActionType.OnCandleBarClick,i),!1}},t}return V(e,r),e.prototype.drawImp=function(t){var i=this,n=this.getWidget().getPane(),o=n.getId()===q,a=n.getChart().getChartStore(),s=this.getCandleBarOptions();if(s!==null){var l=0,u=0;if(s.type===x.CandleType.Ohlc){var c=a.getBarSpace().gapBar;(l=Math.min(Math.max(Math.round(.2*c),1),8))>2&&l%2==1&&l--,u=Math.floor(u/2)}var h=n.getAxisComponent();this.eachChildren(function(p,d){var g=p.data,v=p.x;if(T(g)){var f=g.open,y=g.high,_=g.low,m=g.close,b=s.type,S=s.styles,C=[];m>f?(C[0]=S.upColor,C[1]=S.upBorderColor,C[2]=S.upWickColor):m<f?(C[0]=S.downColor,C[1]=S.downBorderColor,C[2]=S.downWickColor):(C[0]=S.noChangeColor,C[1]=S.noChangeBorderColor,C[2]=S.noChangeWickColor);var w=h.convertToPixel(f),E=h.convertToPixel(m),P=[w,E,h.convertToPixel(y),h.convertToPixel(_)];P.sort(function(B,k){return B-k});var D=d.gapBar%2==0?1:0,A=[];switch(b){case x.CandleType.CandleSolid:A=i._createSolidBar(v,P,d,C,D);break;case x.CandleType.CandleStroke:A=i._createStrokeBar(v,P,d,C,D);break;case x.CandleType.CandleUpStroke:A=m>f?i._createStrokeBar(v,P,d,C,D):i._createSolidBar(v,P,d,C,D);break;case x.CandleType.CandleDownStroke:A=f>m?i._createStrokeBar(v,P,d,C,D):i._createSolidBar(v,P,d,C,D);break;case x.CandleType.Ohlc:A=[{name:"rect",attrs:[{x:v-u,y:P[0],width:l,height:P[3]-P[0]},{x:v-d.halfGapBar,y:w+l>P[3]?P[3]-l:w,width:d.halfGapBar,height:l},{x:v+u,y:E+l>P[3]?P[3]-l:E,width:d.halfGapBar-u,height:l}],styles:{color:C[0]}}]}A.forEach(function(B){var k,I=null;o&&(I={mouseClickEvent:i._boundCandleBarClickEvent(p)}),(k=i.createFigure(B,I??void 0))===null||k===void 0||k.draw(t)})}})}},e.prototype.getCandleBarOptions=function(){var t=this.getWidget().getPane().getChart().getStyles().candle;return{type:t.type,styles:t.bar}},e.prototype._createSolidBar=function(t,i,n,o,a){return[{name:"rect",attrs:{x:t,y:i[0],width:1,height:i[3]-i[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:x.PolygonType.StrokeFill,color:o[0],borderColor:o[1]}}]},e.prototype._createStrokeBar=function(t,i,n,o,a){return[{name:"rect",attrs:[{x:t,y:i[0],width:1,height:i[1]-i[0]},{x:t,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:t-n.halfGapBar,y:i[1],width:n.gapBar+a,height:Math.max(1,i[2]-i[1])},styles:{style:x.PolygonType.Stroke,borderColor:o[1]}}]},e}(Ti),Hn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.getCandleBarOptions=function(){var t,i,n=this.getWidget().getPane();if(!n.getAxisComponent().isInCandle()){var o=n.getChart().getChartStore(),a=o.getIndicatorsByPaneId(n.getId());try{for(var s=J(a),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.shouldOhlc&&u.visible){var c=u.styles,h=o.getStyles().indicator,p=G(c,"ohlc.upColor",h.ohlc.upColor),d=G(c,"ohlc.downColor",h.ohlc.downColor),g=G(c,"ohlc.noChangeColor",h.ohlc.noChangeColor);return{type:x.CandleType.Ohlc,styles:{upColor:p,downColor:d,noChangeColor:g,upBorderColor:p,downBorderColor:d,noChangeBorderColor:g,upWickColor:p,downWickColor:d,noChangeWickColor:g}}}}}catch(v){t={error:v}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}}return null},e.prototype.drawImp=function(t){var i=this;r.prototype.drawImp.call(this,t);var n=this.getWidget(),o=n.getPane(),a=o.getChart(),s=n.getBounding(),l=a.getXAxisPane().getAxisComponent(),u=o.getAxisComponent(),c=a.getChartStore(),h=c.getIndicatorsByPaneId(o.getId()),p=c.getStyles().indicator;t.save(),h.forEach(function(d){if(d.visible){d.zLevel<0?t.globalCompositeOperation="destination-over":t.globalCompositeOperation="source-over";var g=!1;if(d.draw!==null&&(t.save(),g=d.draw({ctx:t,chart:a,indicator:d,bounding:s,xAxis:l,yAxis:u}),t.restore()),!g){var v=d.result,f=[];i.eachChildren(function(y,_){var m,b,S,C=_.halfGapBar,w=y.dataIndex,E=y.x,P=l.convertToPixel(w-1),D=l.convertToPixel(w+1),A=(m=v[w-1])!==null&&m!==void 0?m:null,B=(b=v[w])!==null&&b!==void 0?b:null,k=(S=v[w+1])!==null&&S!==void 0?S:null,I={x:P},F={x:E},O={x:D};d.figures.forEach(function(L){var N=L.key,j=A?.[N];R(j)&&(I[N]=u.convertToPixel(j));var K=B?.[N];R(K)&&(F[N]=u.convertToPixel(K));var tt=k?.[N];R(tt)&&(O[N]=u.convertToPixel(tt))}),be(d,w,p,function(L,N,j){var K,tt,H;if(T(B?.[L.key])){var yt=F[L.key],X=(K=L.attrs)===null||K===void 0?void 0:K.call(L,{data:{prev:A,current:B,next:k},coordinate:{prev:I,current:F,next:O},bounding:s,barSpace:_,xAxis:l,yAxis:u});if(!T(X))switch(L.type){case"circle":X={x:E,y:yt,r:Math.max(1,C)};break;case"rect":case"bar":var wt=(tt=L.baseValue)!==null&&tt!==void 0?tt:u.getRange().from,St=u.convertToPixel(wt),mt=Math.abs(St-yt);wt!==B?.[L.key]&&(mt=Math.max(1,mt)),X={x:E-C,y:yt>St?St:yt,width:Math.max(1,2*C),height:mt};break;case"line":T(f[j])||(f[j]=[]),R(F[L.key])&&R(O[L.key])&&f[j].push({coordinates:[{x:F.x,y:F[L.key]},{x:O.x,y:O[L.key]}],styles:N})}var ot=L.type;T(X)&&ot!=="line"&&((H=i.createFigure({name:ot==="bar"?"rect":ot,attrs:X,styles:N}))===null||H===void 0||H.draw(t))}})}),f.forEach(function(y){var _,m,b,S;if(y.length>1){for(var C=[{coordinates:[y[0].coordinates[0],y[0].coordinates[1]],styles:y[0].styles}],w=1;w<y.length;w++){var E=C[C.length-1],P=y[w],D=E.coordinates[E.coordinates.length-1];D.x===P.coordinates[0].x&&D.y===P.coordinates[0].y&&E.styles.style===P.styles.style&&E.styles.color===P.styles.color&&E.styles.size===P.styles.size&&E.styles.smooth===P.styles.smooth&&((_=E.styles.dashedValue)===null||_===void 0?void 0:_[0])===((m=P.styles.dashedValue)===null||m===void 0?void 0:m[0])&&((b=E.styles.dashedValue)===null||b===void 0?void 0:b[1])===((S=P.styles.dashedValue)===null||S===void 0?void 0:S[1])?E.coordinates.push(P.coordinates[1]):C.push({coordinates:[P.coordinates[0],P.coordinates[1]],styles:P.styles})}C.forEach(function(A){var B,k=A.coordinates,I=A.styles;(B=i.createFigure({name:"line",attrs:{coordinates:k},styles:I}))===null||B===void 0||B.draw(t)})}})}}}),t.restore()},e}(wi),Xn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane(),o=i.getBounding(),a=i.getPane().getChart().getChartStore(),s=a.getCrosshair(),l=a.getStyles().crosshair;if(W(s.paneId)&&l.show){if(s.paneId===n.getId()){var u=s.y;this._drawLine(t,[{x:0,y:u},{x:o.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(t,[{x:c,y:0},{x:c,y:o.height}],l.vertical)}},e.prototype._drawLine=function(t,i,n){var o;if(n.show){var a=n.line;a.show&&((o=this.createFigure({name:"line",attrs:{coordinates:i},styles:a}))===null||o===void 0||o.draw(t))}},e}(rt),Si=function(r){function e(){var t=r.apply(this,Yt([],dt(arguments),!1))||this;return t._boundIconClickEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().executeAction(x.ActionType.OnTooltipIconClick,M({},i)),!0}},t._boundIconMouseMoveEvent=function(i){return function(){return t.getWidget().getPane().getChart().getChartStore().setActiveTooltipIcon(M({},i)),!0}},t}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore();if(T(n.getCrosshair().kLineData)){var o=i.getBounding(),a=n.getStyles().indicator.tooltip,s=a.offsetLeft,l=a.offsetTop,u=a.offsetRight;this.drawIndicatorTooltip(t,s,l,o.width-u)}},e.prototype.drawIndicatorTooltip=function(t,i,n,o){var a=this,s=this.getWidget().getPane(),l=s.getChart().getChartStore(),u=l.getStyles().indicator.tooltip;if(this.isDrawTooltip(l.getCrosshair(),u)){var c=l.getIndicatorsByPaneId(s.getId()),h=u.text;c.forEach(function(p){var d=0,g={x:i,y:n},v=a.getIndicatorTooltipData(p),f=v.name,y=v.calcParamsText,_=v.legends,m=v.icons,b=f.length>0,S=_.length>0;if(b||S){var C=dt(a.classifyTooltipIcons(m),3),w=C[0],E=C[1],P=C[2];if(d=a.drawStandardTooltipIcons(t,w,g,p.name,i,d,o),b){var D=f;y.length>0&&(D="".concat(D).concat(y)),d=a.drawStandardTooltipLegends(t,[{title:{text:"",color:h.color},value:{text:D,color:h.color}}],g,i,d,o,h)}d=a.drawStandardTooltipIcons(t,E,g,p.name,i,d,o),S&&(d=a.drawStandardTooltipLegends(t,_,g,i,d,o,u.text)),d=a.drawStandardTooltipIcons(t,P,g,p.name,i,d,o),n=g.y+d}})}return n},e.prototype.drawStandardTooltipIcons=function(t,i,n,o,a,s,l){var u=this;if(i.length>0){var c=0,h=0;i.forEach(function(v){var f=v.marginLeft,y=f===void 0?0:f,_=v.marginTop,m=_===void 0?0:_,b=v.marginRight,S=b===void 0?0:b,C=v.marginBottom,w=C===void 0?0:C,E=v.paddingLeft,P=E===void 0?0:E,D=v.paddingTop,A=D===void 0?0:D,B=v.paddingRight,k=B===void 0?0:B,I=v.paddingBottom,F=I===void 0?0:I,O=v.size,L=v.fontFamily,N=v.icon;t.font=Dt(O,"normal",L),c+=y+P+t.measureText(N).width+k+S,h=Math.max(h,m+A+O+F+w)}),n.x+c>l?(n.x=a,n.y+=s,s=h):s=Math.max(s,h);var p=this.getWidget().getPane(),d=p.getId(),g=p.getChart().getChartStore().getActiveTooltipIcon();i.forEach(function(v){var f,y=v.marginLeft,_=y===void 0?0:y,m=v.marginTop,b=m===void 0?0:m,S=v.marginRight,C=S===void 0?0:S,w=v.paddingLeft,E=w===void 0?0:w,P=v.paddingTop,D=P===void 0?0:P,A=v.paddingRight,B=A===void 0?0:A,k=v.paddingBottom,I=k===void 0?0:k,F=v.color,O=v.activeColor,L=v.size,N=v.fontFamily,j=v.icon,K=v.backgroundColor,tt=v.activeBackgroundColor,H=g?.paneId===d&&g.indicatorName===o&&g.iconId===v.id;(f=u.createFigure({name:"text",attrs:{text:j,x:n.x+_,y:n.y+b},styles:{paddingLeft:E,paddingTop:D,paddingRight:B,paddingBottom:I,color:H?O:F,size:L,family:N,backgroundColor:H?tt:K}},{mouseClickEvent:u._boundIconClickEvent({paneId:d,indicatorName:o,iconId:v.id}),mouseMoveEvent:u._boundIconMouseMoveEvent({paneId:d,indicatorName:o,iconId:v.id})}))===null||f===void 0||f.draw(t),n.x+=_+E+t.measureText(j).width+B+C})}return s},e.prototype.drawStandardTooltipLegends=function(t,i,n,o,a,s,l){var u=this;if(i.length>0){var c=l.marginLeft,h=l.marginTop,p=l.marginRight,d=l.marginBottom,g=l.size,v=l.family,f=l.weight;t.font=Dt(g,f,v),i.forEach(function(y){var _,m,b=y.title,S=y.value,C=t.measureText(b.text).width,w=C+t.measureText(S.text).width,E=h+g+d;n.x+c+w+p>s?(n.x=o,n.y+=a,a=E):a=Math.max(a,E),b.text.length>0&&((_=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+h,text:b.text},styles:{color:b.color,size:g,family:v,weight:f}}))===null||_===void 0||_.draw(t)),(m=u.createFigure({name:"text",attrs:{x:n.x+c+C,y:n.y+h,text:S.text},styles:{color:S.color,size:g,family:v,weight:f}}))===null||m===void 0||m.draw(t),n.x+=c+w+p})}return a},e.prototype.isDrawTooltip=function(t,i){var n=i.showRule;return n===x.TooltipShowRule.Always||n===x.TooltipShowRule.FollowCross&&W(t.paneId)},e.prototype.getIndicatorTooltipData=function(t){var i,n,o=this.getWidget().getPane().getChart().getChartStore(),a=o.getStyles().indicator,s=a.tooltip,l=s.showName?t.shortName:"",u="",c=t.calcParams;c.length>0&&s.showParams&&(u="(".concat(c.join(","),")"));var h={name:l,calcParamsText:u,legends:[],icons:s.icons},p=o.getCrosshair().dataIndex,d=t.result,g=o.getCustomApi(),v=o.getDecimalFold(),f=o.getThousandsSeparator(),y=[];if(t.visible){var _=(n=(i=d[p])!==null&&i!==void 0?i:d[p-1])!==null&&n!==void 0?n:{};be(t,p,a,function(k,I){if(W(k.title)){var F=I.color,O=_[k.key];R(O)&&(O=Z(O,t.precision),t.shouldFormatBigNumber&&(O=g.formatBigNumber(O))),y.push({title:{text:k.title,color:F},value:{text:v.format(f.format(O??s.defaultValue)),color:F}})}}),h.legends=y}if(U(t.createTooltipDataSource)){var m=this.getWidget(),b=m.getPane(),S=b.getChart(),C=t.createTooltipDataSource({chart:S,indicator:t,crosshair:o.getCrosshair(),bounding:m.getBounding(),xAxis:b.getChart().getXAxisPane().getAxisComponent(),yAxis:b.getAxisComponent()}),w=C.name,E=C.calcParamsText,P=C.legends,D=C.icons;if(W(w)&&s.showName&&(h.name=w),W(E)&&s.showParams&&(h.calcParamsText=E),T(D)&&(h.icons=D),T(P)&&t.visible){var A=[],B=a.tooltip.text.color;P.forEach(function(k){var I={text:"",color:B};nt(k.title)?I=k.title:I.text=k.title;var F={text:"",color:B};nt(k.value)?F=k.value:F.text=k.value,R(Number(F.text))&&(F.text=v.format(f.format(F.text))),A.push({title:I,value:F})}),h.legends=A}}return h},e.prototype.classifyTooltipIcons=function(t){var i=[],n=[],o=[];return t.forEach(function(a){switch(a.position){case x.TooltipIconPosition.Left:i.push(a);break;case x.TooltipIconPosition.Middle:n.push(a);break;case x.TooltipIconPosition.Right:o.push(a)}}),[i,n,o]},e}(rt),Ei=function(r){function e(t){var i=r.call(this,t)||this;return i._initEvent(),i}return V(e,r),e.prototype._initEvent=function(){var t=this,i=this.getWidget().getPane(),n=i.getId(),o=i.getChart(),a=o.getChartStore();this.registerEvent("mouseMoveEvent",function(s){var l,u=a.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;c.isStart()&&(a.updateProgressOverlayInfo(n),h=n);var p=c.points.length-1,d="".concat(Ot,"point_").concat(p);return c.isDrawing()&&h===n&&(c.eventMoveForDrawing(t._coordinateToPoint(c,s)),(l=c.onDrawing)===null||l===void 0||l.call(c,M({chart:o,overlay:c,figureKey:d,figureIndex:p},s))),t._figureMouseMoveEvent(c,1,d,p,0)(s)}return a.setHoverOverlayInfo({paneId:n,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},s),!1}).registerEvent("mouseClickEvent",function(s){var l,u,c=a.getProgressOverlayInfo();if(c!==null){var h=c.overlay,p=c.paneId;h.isStart()&&(a.updateProgressOverlayInfo(n,!0),p=n);var d=h.points.length-1,g="".concat(Ot,"point_").concat(d);return h.isDrawing()&&p===n&&(h.eventMoveForDrawing(t._coordinateToPoint(h,s)),(l=h.onDrawing)===null||l===void 0||l.call(h,M({chart:o,overlay:h,figureKey:g,figureIndex:d},s)),h.nextStep(),h.isDrawing()||(a.progressOverlayComplete(),(u=h.onDrawEnd)===null||u===void 0||u.call(h,M({chart:o,overlay:h,figureKey:g,figureIndex:d},s)))),t._figureMouseClickEvent(h,1,g,d,0)(s)}return a.setClickOverlayInfo({paneId:n,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},s),!1}).registerEvent("mouseDoubleClickEvent",function(s){var l,u=a.getProgressOverlayInfo();if(u!==null){var c=u.overlay,h=u.paneId;if(c.isDrawing()&&h===n&&(c.forceComplete(),!c.isDrawing())){a.progressOverlayComplete();var p=c.points.length-1,d="".concat(Ot,"point_").concat(p);(l=c.onDrawEnd)===null||l===void 0||l.call(c,M({chart:o,overlay:c,figureKey:d,figureIndex:p},s))}var g=c.points.length-1;return t._figureMouseClickEvent(c,1,"".concat(Ot,"point_").concat(g),g,0)(s)}return!1}).registerEvent("mouseRightClickEvent",function(s){var l=a.getProgressOverlayInfo();if(l!==null){var u=l.overlay;if(u.isDrawing()){var c=u.points.length-1;return t._figureMouseRightClickEvent(u,1,"".concat(Ot,"point_").concat(c),c,0)(s)}}return!1}).registerEvent("mouseUpEvent",function(s){var l,u=a.getPressedOverlayInfo(),c=u.overlay,h=u.figureIndex,p=u.figureKey;return c!==null&&((l=c.onPressedMoveEnd)===null||l===void 0||l.call(c,M({chart:o,overlay:c,figureKey:p,figureIndex:h},s))),a.setPressedOverlayInfo({paneId:n,overlay:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(s){var l,u,c=a.getPressedOverlayInfo(),h=c.overlay,p=c.figureType,d=c.figureIndex,g=c.figureKey;if(h!==null){if(!(h.lock||(u=(l=h.onPressedMoving)===null||l===void 0?void 0:l.call(h,M({chart:o,overlay:h,figureIndex:d,figureKey:g},s)))!==null&&u!==void 0&&u)){var v=t._coordinateToPoint(h,s);p===1?h.eventPressedPointMove(v,d):h.eventPressedOtherMove(v,t.getWidget().getPane().getChart().getChartStore())}return!0}return!1})},e.prototype._createFigureEvents=function(t,i,n,o,a,s){var l=null;if(!t.isDrawing()){var u=[];if(T(s)&&(Ht(s)?s&&(u=["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]):u=s),u.length===0)return{mouseMoveEvent:this._figureMouseMoveEvent(t,i,n,o,a),mouseDownEvent:this._figureMouseDownEvent(t,i,n,o,a),mouseClickEvent:this._figureMouseClickEvent(t,i,n,o,a),mouseRightClickEvent:this._figureMouseRightClickEvent(t,i,n,o,a),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(t,i,n,o,a)};l={},u.includes("mouseMoveEvent")||u.includes("touchMoveEvent")||(l.mouseMoveEvent=this._figureMouseMoveEvent(t,i,n,o,a)),u.includes("mouseDownEvent")||u.includes("touchStartEvent")||(l.mouseDownEvent=this._figureMouseDownEvent(t,i,n,o,a)),u.includes("mouseClickEvent")||u.includes("tapEvent")||(l.mouseClickEvent=this._figureMouseClickEvent(t,i,n,o,a)),u.includes("mouseDoubleClickEvent")||u.includes("doubleTapEvent")||(l.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(t,i,n,o,a)),u.includes("mouseRightClickEvent")||(l.mouseRightClickEvent=this._figureMouseRightClickEvent(t,i,n,o,a))}return l??void 0},e.prototype._figureMouseMoveEvent=function(t,i,n,o,a){var s=this;return function(l){var u=s.getWidget().getPane();return u.getChart().getChartStore().setHoverOverlayInfo({paneId:u.getId(),overlay:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a},l),!0}},e.prototype._figureMouseDownEvent=function(t,i,n,o,a){var s=this;return function(l){var u,c=s.getWidget().getPane(),h=c.getId();return t.startPressedMove(s._coordinateToPoint(t,l)),(u=t.onPressedMoveStart)===null||u===void 0||u.call(t,M({chart:c.getChart(),overlay:t,figureIndex:o,figureKey:n},l)),c.getChart().getChartStore().setPressedOverlayInfo({paneId:h,overlay:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a}),!0}},e.prototype._figureMouseClickEvent=function(t,i,n,o,a){var s=this;return function(l){var u=s.getWidget().getPane(),c=u.getId();return u.getChart().getChartStore().setClickOverlayInfo({paneId:c,overlay:t,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a},l),!0}},e.prototype._figureMouseDoubleClickEvent=function(t,i,n,o,a){var s=this;return function(l){var u;return(u=t.onDoubleClick)===null||u===void 0||u.call(t,M(M({},l),{chart:s.getWidget().getPane().getChart(),figureIndex:o,figureKey:n,overlay:t})),!0}},e.prototype._figureMouseRightClickEvent=function(t,i,n,o,a){var s=this;return function(l){var u,c;return(c=(u=t.onRightClick)===null||u===void 0?void 0:u.call(t,M({chart:s.getWidget().getPane().getChart(),overlay:t,figureIndex:o,figureKey:n},l)))!==null&&c!==void 0&&c||s.getWidget().getPane().getChart().getChartStore().removeOverlay(t),!0}},e.prototype._coordinateToPoint=function(t,i){var n,o={},a=this.getWidget().getPane(),s=a.getChart(),l=a.getId(),u=s.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=s.getXAxisPane().getAxisComponent().convertFromPixel(i.x),h=(n=u.dataIndexToTimestamp(c))!==null&&n!==void 0?n:void 0;o.dataIndex=c,o.timestamp=h}if(this.coordinateToPointValueFlag()){var p=a.getAxisComponent(),d=p.convertFromPixel(i.y);if(t.mode!==x.OverlayMode.Normal&&l===q&&R(o.dataIndex)){var g=u.getDataByDataIndex(o.dataIndex);if(g!==null){var v=t.modeSensitivity;if(d>g.high)if(t.mode===x.OverlayMode.WeakMagnet){var f=p.convertToPixel(g.high);d<p.convertFromPixel(f-v)&&(d=g.high)}else d=g.high;else if(d<g.low)if(t.mode===x.OverlayMode.WeakMagnet){var y=p.convertToPixel(g.low);d>p.convertFromPixel(y-v)&&(d=g.low)}else d=g.low;else{var _=Math.max(g.open,g.close),m=Math.min(g.open,g.close);d=d>_?d-_<g.high-d?_:g.high:d<m?d-g.low<m-d?g.low:m:_-d<d-m?_:m}}}o.value=d}return o},e.prototype.coordinateToPointValueFlag=function(){return!0},e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.dispatchEvent=function(t,i,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(t,i,n):r.prototype.dispatchEvent.call(this,t,i,n)},e.prototype.checkEventOn=function(){return!0},e.prototype.drawImp=function(t){var i=this;this.getCompleteOverlays().forEach(function(o){o.visible&&i._drawOverlay(t,o)});var n=this.getProgressOverlay();T(n)&&n.visible&&this._drawOverlay(t,n)},e.prototype._drawOverlay=function(t,i){var n=i.points,o=this.getWidget().getPane(),a=o.getChart(),s=a.getChartStore(),l=o.getAxisComponent(),u=a.getXAxisPane().getAxisComponent(),c=n.map(function(p){var d,g=p.dataIndex;R(p.timestamp)&&(g=s.timestampToDataIndex(p.timestamp));var v={x:0,y:0};return R(g)&&(v.x=u.convertToPixel(g)),R(p.value)&&(v.y=(d=l?.convertToPixel(p.value))!==null&&d!==void 0?d:0),v});if(c.length>0){var h=new Array().concat(this.getFigures(i,c));this.drawFigures(t,i,h)}this.drawDefaultFigures(t,i,c)},e.prototype.drawFigures=function(t,i,n){var o=this,a=this.getWidget().getPane().getChart().getStyles().overlay;n.forEach(function(s,l){var u=s.type,c=s.styles,h=s.attrs,p=s.ignoreEvent;[].concat(h).forEach(function(d,g){var v,f,y,_=o._createFigureEvents(i,2,(v=s.key)!==null&&v!==void 0?v:"",l,g,p),m=M(M(M({},a[u]),(f=i.styles)===null||f===void 0?void 0:f[u]),c);(y=o.createFigure({name:u,attrs:d,styles:m},_))===null||y===void 0||y.draw(t)})})},e.prototype.getCompleteOverlays=function(){var t=this.getWidget().getPane();return t.getChart().getChartStore().getOverlaysByPaneId(t.getId())},e.prototype.getProgressOverlay=function(){var t=this.getWidget().getPane(),i=t.getChart().getChartStore().getProgressOverlayInfo();return T(i)&&i.paneId===t.getId()?i.overlay:null},e.prototype.getFigures=function(t,i){var n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(n=t.createPointFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e.prototype.drawDefaultFigures=function(t,i,n){var o,a,s=this;if(i.needDefaultPointFigure){var l=this.getWidget().getPane().getChart().getChartStore(),u=l.getHoverOverlayInfo(),c=l.getClickOverlayInfo();if(((o=u.overlay)===null||o===void 0?void 0:o.id)===i.id&&u.figureType!==0||((a=c.overlay)===null||a===void 0?void 0:a.id)===i.id&&c.figureType!==0){var h=l.getStyles().overlay,p=i.styles,d=M(M({},h.point),p?.point);n.forEach(function(g,v){var f,y,_,m=g.x,b=g.y,S=d.radius,C=d.color,w=d.borderColor,E=d.borderSize;((f=u.overlay)===null||f===void 0?void 0:f.id)===i.id&&u.figureType===1&&u.figureIndex===v&&(S=d.activeRadius,C=d.activeColor,w=d.activeBorderColor,E=d.activeBorderSize),(y=s.createFigure({name:"circle",attrs:{x:m,y:b,r:S+E},styles:{color:w}},s._createFigureEvents(i,1,"".concat(Ot,"point_").concat(v),v,0)))===null||y===void 0||y.draw(t),(_=s.createFigure({name:"circle",attrs:{x:m,y:b,r:S},styles:{color:C}}))===null||_===void 0||_.draw(t)})}}},e}(rt),Pi=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._gridView=new Yn(n),n._indicatorView=new Hn(n),n._crosshairLineView=new Xn(n),n._tooltipView=n.createTooltipView(),n._overlayView=new Ei(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return i.getChart().getChartStore().setActiveTooltipIcon(),!1}),n}return V(e,r),e.prototype.getName=function(){return Q},e.prototype.updateMain=function(t){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(t),this._indicatorView.draw(t),this._gridView.draw(t))},e.prototype.createTooltipView=function(){return new Si(this)},e.prototype.updateMainContent=function(t){},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(t),this._crosshairLineView.draw(t)),this._tooltipView.draw(t)},e}(Ie),Gn=function(r){function e(){var t=r.apply(this,Yt([],dt(arguments),!1))||this;return t._ripplePoint=t.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),t._animationFrameTime=0,t._animation=new Te({iterationCount:1/0}).doFrame(function(i){t._animationFrameTime=i;var n=t.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),t}return V(e,r),e.prototype.drawImp=function(t){var i,n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=l.getDataList().length-1,c=a.getBounding(),h=s.getAxisComponent(),p=l.getStyles().candle.area,d=[],g=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,f=null;if(this.eachChildren(function(C){var w=C.data,E=C.x,P=w?.[p.value];if(R(P)){var D=h.convertToPixel(P);v===Number.MIN_SAFE_INTEGER&&(v=E),d.push({x:E,y:D}),g=Math.min(g,D),C.dataIndex===u&&(f={x:E,y:D})}}),d.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:d},styles:{color:p.lineColor,size:p.lineSize,smooth:p.smooth}}))===null||i===void 0||i.draw(t);var y=p.backgroundColor,_="";if(st(y)){var m=t.createLinearGradient(0,c.height,0,g);try{y.forEach(function(C){var w=C.offset,E=C.color;m.addColorStop(w,E)})}catch{}_=m}else _=y;t.fillStyle=_,t.beginPath(),t.moveTo(v,c.height),t.lineTo(d[0].x,d[0].y),oi(t,d,p.smooth),t.lineTo(d[d.length-1].x,c.height),t.closePath(),t.fill()}var b=p.point;if(b.show&&T(f)){(n=this.createFigure({name:"circle",attrs:{x:f.x,y:f.y,r:b.radius},styles:{style:"fill",color:b.color}}))===null||n===void 0||n.draw(t);var S=b.rippleRadius;b.animation&&(S=b.radius+this._animationFrameTime/b.animationDuration*(b.rippleRadius-b.radius),this._animation.setDuration(b.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:f.x,y:f.y,r:S}).setStyles({style:"fill",color:b.rippleColor}).draw(t)}else this.stopAnimation()},e.prototype.stopAnimation=function(){this._animation.stop()},e}(Ti),Kn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget().getPane(),n=i.getChart().getChartStore(),o=n.getStyles().candle.priceMark,a=o.high,s=o.low;if(o.show&&(a.show||s.show)){var l=n.getVisibleRangeHighLowPrice(),u=n.getPrecision(),c=i.getAxisComponent(),h=l[0],p=h.price,d=h.x,g=l[1],v=g.price,f=g.x,y=c.convertToPixel(p),_=c.convertToPixel(v),m=n.getDecimalFold(),b=n.getThousandsSeparator();a.show&&p!==Number.MIN_SAFE_INTEGER&&this._drawMark(t,m.format(b.format(Z(p,u.price))),{x:d,y},y<_?[-2,-5]:[2,5],a),s.show&&v!==Number.MAX_SAFE_INTEGER&&this._drawMark(t,m.format(b.format(Z(v,u.price))),{x:f,y:_},y<_?[2,5]:[-2,-5],s)}},e.prototype._drawMark=function(t,i,n,o,a){var s,l,u,c=n.x,h=n.y+o[0];(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:h+o[0]},{x:c,y:h},{x:c+2,y:h+o[0]}]},styles:{color:a.color}}))===null||s===void 0||s.draw(t);var p=0,d=0,g="left";c>this.getWidget().getBounding().width/2?(d=(p=c-5)-a.textOffset,g="right"):(g="left",d=(p=c+5)+a.textOffset);var v=h+o[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:h},{x:c,y:v},{x:p,y:v}]},styles:{color:a.color}}))===null||l===void 0||l.draw(t),(u=this.createFigure({name:"text",attrs:{x:d,y:v,text:i,align:g,baseline:"middle"},styles:{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}}))===null||u===void 0||u.draw(t)},e}(rt),Un=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.line;if(l.show&&u.show&&c.show){var h=o.getAxisComponent(),p=s.getDataList(),d=p[p.length-1];if(T(d)){var g=d.close,v=d.open,f=h.convertToNicePixel(g),y="";y=g>v?u.upColor:g<v?u.downColor:u.noChangeColor,(i=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:f},{x:a.width,y:f}]},styles:{style:c.style,color:y,size:c.size,dashedValue:c.dashedValue}}))===null||i===void 0||i.draw(t)}}},e}(rt);(function(r){r.Left="left",r.Right="right"})(ft||(ft={}));var Ii=function(){function r(e){this.scrollZoomEnabled=!0,this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=e}return r.prototype.getParent=function(){return this._parent},r.prototype.buildTicks=function(e){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),!(this._prevRange.from===this._range.from&&this._prevRange.to===this._range.to&&!e)&&(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0)},r.prototype.getTicks=function(){return this._ticks},r.prototype.setRange=function(e){this._autoCalcTickFlag=!1,this._range=e},r.prototype.getRange=function(){return this._range},r.prototype.setAutoCalcTickFlag=function(e){this._autoCalcTickFlag=e},r.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},r}(),se={"zh-CN":{time:"\u65F6\u95F4\uFF1A",open:"\u5F00\uFF1A",high:"\u9AD8\uFF1A",low:"\u4F4E\uFF1A",close:"\u6536\uFF1A",volume:"\u6210\u4EA4\u91CF\uFF1A",turnover:"\u6210\u4EA4\u989D\uFF1A",change:"\u6DA8\u5E45\uFF1A"},"en-US":{time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "}},Zn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this.getWidget(),n=i.getPane().getChart().getChartStore(),o=n.getCrosshair();if(T(o.kLineData)){var a=i.getBounding(),s=n.getStyles(),l=s.candle,u=s.indicator;if(l.tooltip.showType===x.TooltipShowType.Rect&&u.tooltip.showType===x.TooltipShowType.Rect){var c=this.isDrawTooltip(o,l.tooltip),h=this.isDrawTooltip(o,u.tooltip);this._drawRectTooltip(t,c,h,l.tooltip.offsetTop)}else if(l.tooltip.showType===x.TooltipShowType.Standard&&u.tooltip.showType===x.TooltipShowType.Standard){var p=l.tooltip,d=p.offsetLeft,g=p.offsetTop,v=p.offsetRight,f=a.width-v,y=this._drawCandleStandardTooltip(t,d,g,f);this.drawIndicatorTooltip(t,d,y,f)}else if(l.tooltip.showType===x.TooltipShowType.Rect&&u.tooltip.showType===x.TooltipShowType.Standard){var _=l.tooltip,m=(d=_.offsetLeft,g=_.offsetTop,v=_.offsetRight,f=a.width-v,this.drawIndicatorTooltip(t,d,g,f));c=this.isDrawTooltip(o,l.tooltip),this._drawRectTooltip(t,c,!1,m)}else{var b=l.tooltip,S=(d=b.offsetLeft,g=b.offsetTop,v=b.offsetRight,f=a.width-v,this._drawCandleStandardTooltip(t,d,g,f));h=this.isDrawTooltip(o,u.tooltip),this._drawRectTooltip(t,!1,h,S)}}},e.prototype._drawCandleStandardTooltip=function(t,i,n,o){var a=this.getWidget().getPane().getChart().getChartStore(),s=a.getStyles().candle.tooltip,l=s.text,u=0,c={x:i,y:n},h=a.getCrosshair();if(this.isDrawTooltip(h,s)){var p=this._getCandleTooltipLegends(),d=dt(this.classifyTooltipIcons(s.icons),3),g=d[0],v=d[1],f=d[2];u=this.drawStandardTooltipIcons(t,g,c,"",i,u,o),u=this.drawStandardTooltipIcons(t,v,c,"",i,u,o),p.length>0&&(u=this.drawStandardTooltipLegends(t,p,c,i,u,o,l)),u=this.drawStandardTooltipIcons(t,f,c,"",i,u,o)}return c.y+u},e.prototype._drawRectTooltip=function(t,i,n,o){var a,s,l=this,u=this.getWidget(),c=u.getPane(),h=c.getChart().getChartStore(),p=h.getStyles(),d=p.candle,g=p.indicator,v=d.tooltip,f=g.tooltip;if(i||n){var y=this._getCandleTooltipLegends(),_=v.offsetLeft,m=v.offsetTop,b=v.offsetRight,S=v.offsetBottom,C=v.text,w=C.marginLeft,E=C.marginRight,P=C.marginTop,D=C.marginBottom,A=C.size,B=C.weight,k=C.family,I=v.rect,F=I.position,O=I.paddingLeft,L=I.paddingRight,N=I.paddingTop,j=I.paddingBottom,K=I.offsetLeft,tt=I.offsetRight,H=I.offsetTop,yt=I.offsetBottom,X=I.borderSize,wt=I.borderRadius,St=I.borderColor,mt=I.color,ot=0,_t=0,ut=0;i&&(t.font=Dt(A,B,k),y.forEach(function(bt){var at=bt.title,it=bt.value,ht="".concat(at.text).concat(it.text),Ct=t.measureText(ht).width+w+E;ot=Math.max(ot,Ct)}),ut+=(D+P+A)*y.length);var xt=f.text,Nt=xt.marginLeft,zi=xt.marginRight,Yi=xt.marginTop,Hi=xt.marginBottom,Jt=xt.size,Re=xt.weight,Be=xt.family,Xi=[];if(n){var yr=h.getIndicatorsByPaneId(c.getId());t.font=Dt(Jt,Re,Be),yr.forEach(function(bt){var at=l.getIndicatorTooltipData(bt).legends;Xi.push(at),at.forEach(function(it){var ht=it.title,Ct=it.value,de="".concat(ht.text).concat(Ct.text),br=t.measureText(de).width+Nt+zi;ot=Math.max(ot,br),ut+=Yi+Hi+Jt})})}if((_t+=ot)!==0&&ut!==0){var ue=h.getCrosshair(),ce=u.getBounding(),Gi=c.getYAxisWidget().getBounding();_t+=2*X+O+L,ut+=2*X+N+j;var mr=ce.width/2,Ki=F===x.CandleTooltipRectPosition.Pointer&&ue.paneId===q,Ui=((a=ue.realX)!==null&&a!==void 0?a:0)>mr,ct=0;if(Ki){var Zi=ue.realX;ct=Ui?Zi-tt-_t:Zi+K}else{var he=this.getWidget().getPane().getAxisComponent();Ui?(ct=K+_,he.inside&&he.position===ft.Left&&(ct+=Gi.width)):(ct=ce.width-tt-_t-b,he.inside&&he.position===ft.Right&&(ct-=Gi.width))}var zt=o+H;Ki&&((zt=ue.y-ut/2)+ut>ce.height-yt-S&&(zt=ce.height-yt-ut-S),zt<o+H&&(zt=o+H+m)),(s=this.createFigure({name:"rect",attrs:{x:ct,y:zt,width:_t,height:ut},styles:{style:x.PolygonType.StrokeFill,color:mt,borderColor:St,borderSize:X,borderRadius:wt}}))===null||s===void 0||s.draw(t);var _r=ct+X+O+w,Et=zt+X+N;if(i&&y.forEach(function(bt){var at,it;Et+=P;var ht=bt.title;(at=l.createFigure({name:"text",attrs:{x:_r,y:Et,text:ht.text},styles:{color:ht.color,size:A,family:k,weight:B}}))===null||at===void 0||at.draw(t);var Ct=bt.value;(it=l.createFigure({name:"text",attrs:{x:ct+_t-X-E-L,y:Et,text:Ct.text,align:"right"},styles:{color:Ct.color,size:A,family:k,weight:B}}))===null||it===void 0||it.draw(t),Et+=A+D}),n){var xr=ct+X+O+Nt;Xi.forEach(function(bt){bt.forEach(function(at){var it,ht;Et+=Yi;var Ct=at.title,de=at.value;(it=l.createFigure({name:"text",attrs:{x:xr,y:Et,text:Ct.text},styles:{color:Ct.color,size:Jt,family:Be,weight:Re}}))===null||it===void 0||it.draw(t),(ht=l.createFigure({name:"text",attrs:{x:ct+_t-X-zi-L,y:Et,text:de.text,align:"right"},styles:{color:de.color,size:Jt,family:Be,weight:Re}}))===null||ht===void 0||ht.draw(t),Et+=Jt+Hi})})}}}},e.prototype._getCandleTooltipLegends=function(){var t,i,n,o,a,s,l=this.getWidget().getPane().getChart().getChartStore(),u=l.getStyles().candle,c=l.getDataList(),h=l.getCustomApi(),p=l.getDecimalFold(),d=l.getThousandsSeparator(),g=l.getLocale(),v=l.getPrecision(),f=v.price,y=v.volume,_=(t=l.getCrosshair().dataIndex)!==null&&t!==void 0?t:0,m=u.tooltip,b=m.text.color,S=(i=c[_-1])!==null&&i!==void 0?i:null,C=c[_],w=(n=S?.close)!==null&&n!==void 0?n:C.close,E=C.close-w,P={"{time}":h.formatDate(C.timestamp,"YYYY-MM-DD HH:mm",x.FormatDateType.Tooltip),"{open}":p.format(d.format(Z(C.open,f))),"{high}":p.format(d.format(Z(C.high,f))),"{low}":p.format(d.format(Z(C.low,f))),"{close}":p.format(d.format(Z(C.close,f))),"{volume}":p.format(d.format(h.formatBigNumber(Z((o=C.volume)!==null&&o!==void 0?o:m.defaultValue,y)))),"{turnover}":p.format(d.format(Z((a=C.turnover)!==null&&a!==void 0?a:m.defaultValue,f))),"{change}":w===0?m.defaultValue:"".concat(d.format(Z(E/w*100)),"%")};return(U(m.custom)?m.custom({prev:S,current:C,next:(s=c[_+1])!==null&&s!==void 0?s:null},u):m.custom).map(function(D){var A,B=D.title,k=D.value,I={text:"",color:""};nt(B)?I=M({},B):(I.text=B,I.color=b),I.text=function(N,j){var K;return(K=se[j][N])!==null&&K!==void 0?K:N}(I.text,g);var F={text:m.defaultValue,color:""};nt(k)?F=M({},k):(F.text=k,F.color=b);var O=/{(\S*)}/.exec(F.text);if(O!==null&&O.length>1){var L="{".concat(O[1],"}");F.text=F.text.replace(L,(A=P[L])!==null&&A!==void 0?A:m.defaultValue),L==="{change}"&&(F.color=E===0?u.priceMark.last.noChangeColor:E>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:I,value:F}})},e}(Si),jn=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._candleBarView=new wi(n),n._candleAreaView=new Gn(n),n._candleHighLowPriceView=new Kn(n),n._candleLastPriceLineView=new Un(n),n.addChild(n._candleBarView),n}return V(e,r),e.prototype.updateMainContent=function(t){this.getPane().getChart().getStyles().candle.type!==x.CandleType.Area?(this._candleBarView.draw(t),this._candleHighLowPriceView.draw(t),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(t),this._candleLastPriceLineView.draw(t)},e.prototype.createTooltipView=function(){return new Zn(this)},e}(Pi),ki=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t,i){var n,o,a=this,s=this.getWidget(),l=s.getPane(),u=s.getBounding(),c=l.getAxisComponent(),h=this.getAxisStyles(l.getChart().getStyles());if(h.show&&(h.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(u,h),styles:h.axisLine}))===null||n===void 0||n.draw(t)),!i[0])){var p=c.getTicks();if(h.tickLine.show&&this.createTickLines(p,u,h).forEach(function(g){var v;(v=a.createFigure({name:"line",attrs:g,styles:h.tickLine}))===null||v===void 0||v.draw(t)}),h.tickText.show){var d=this.createTickTexts(p,u,h);(o=this.createFigure({name:"text",attrs:d,styles:h.tickText}))===null||o===void 0||o.draw(t)}}},e}(rt),qn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.getAxisStyles=function(t){return t.yAxis},e.prototype.createAxisLine=function(t,i){var n=this.getWidget().getPane().getAxisComponent(),o=i.axisLine.size,a=0;return{coordinates:[{x:a=n.isFromZero()?0:t.width-o,y:0},{x:a,y:t.height}]}},e.prototype.createTickLines=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=0,u=0;return o.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=i.width,a.show&&(l-=a.size),u=l-s.length),t.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},e.prototype.createTickTexts=function(t,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=n.tickText,u=0;o.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=i.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return t.map(function(h){return{x:u,y:h.coord,text:h.text,align:c,baseline:"middle"}})},e}(ki),Jn=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.text;if(l.show&&u.show&&c.show){var h=s.getPrecision(),p=o.getAxisComponent(),d=s.getDataList(),g=d[d.length-1];if(T(g)){var v=g.close,f=g.open,y=p.convertToNicePixel(v),_="";_=v>f?u.upColor:v<f?u.downColor:u.noChangeColor;var m=p.getRange(),b=p.displayValueToText(p.realValueToDisplayValue(p.valueToRealValue(v,{range:m}),{range:m}),h.price);b=s.getDecimalFold().format(s.getThousandsSeparator().format(b));var S=0,C="left";p.isFromZero()?(S=0,C="left"):(S=a.width,C="right"),(i=this.createFigure({name:"text",attrs:{x:S,y,text:b,align:C,baseline:"middle"},styles:M(M({},c),{backgroundColor:_})}))===null||i===void 0||i.draw(t)}}},e}(rt),$n=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i=this,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().indicator,u=l.lastValueMark,c=u.text;if(u.show){var h=o.getAxisComponent(),p=h.getRange(),d=s.getDataList().length-1,g=s.getIndicatorsByPaneId(o.getId()),v=s.getCustomApi(),f=s.getDecimalFold(),y=s.getThousandsSeparator();g.forEach(function(_){var m,b,S=_.result,C=(b=(m=S[d])!==null&&m!==void 0?m:S[d-1])!==null&&b!==void 0?b:{};if(T(C)&&_.visible){var w=_.precision;be(_,d,l,function(E,P){var D,A=C[E.key];if(R(A)){var B=h.convertToNicePixel(A),k=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(A,{range:p}),{range:p}),w);_.shouldFormatBigNumber&&(k=v.formatBigNumber(k)),k=f.format(y.format(k));var I=0,F="left";h.isFromZero()?(I=0,F="left"):(I=a.width,F="right"),(D=i.createFigure({name:"text",attrs:{x:I,y:B,text:k,align:F,baseline:"middle"},styles:M(M({},c),{backgroundColor:P.color})}))===null||D===void 0||D.draw(t)}})}})}},e}(rt),Mi=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},e.prototype.drawDefaultFigures=function(t,i,n){this.drawFigures(t,i,this.getDefaultFigures(i,n))},e.prototype.getDefaultFigures=function(t,i){var n,o=this.getWidget(),a=o.getPane(),s=a.getChart().getChartStore(),l=s.getClickOverlayInfo(),u=[];if(t.needDefaultYAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)&&l.paneId===a.getId()){var c=a.getAxisComponent(),h=o.getBounding(),p=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,g=c.isFromZero(),v="left",f=0;g?(v="left",f=0):(v="right",f=h.width);var y=s.getDecimalFold(),_=s.getThousandsSeparator();i.forEach(function(m,b){var S=t.points[b];if(R(S.value)){p=Math.min(p,m.y),d=Math.max(d,m.y);var C=y.format(_.format(Z(S.value,s.getPrecision().price)));u.push({type:"text",attrs:{x:f,y:m.y,text:C,align:v,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&u.unshift({type:"rect",attrs:{x:0,y:p,width:h.width,height:d-p},ignoreEvent:!0})}return u},e.prototype.getFigures=function(t,i){var n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(n=t.createYAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(Ei),Di=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.drawImp=function(t){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=n.getPane().getChart().getChartStore(),l=s.getCrosshair(),u=s.getStyles().crosshair;if(W(l.paneId)&&this.compare(l,o.getId())&&u.show){var c=this.getDirectionStyles(u),h=c.text;if(c.show&&h.show){var p=o.getAxisComponent(),d=this.getText(l,s,p);t.font=Dt(h.size,h.weight,h.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(d,t.measureText(d).width,l,a,p,h),styles:h}))===null||i===void 0||i.draw(t)}}},e.prototype.compare=function(t,i){return t.paneId===i},e.prototype.getDirectionStyles=function(t){return t.horizontal},e.prototype.getText=function(t,i,n){var o=n,a=n.convertFromPixel(t.y),s=0,l=!1;o.isInCandle()?s=i.getPrecision().price:i.getIndicatorsByPaneId(t.paneId).forEach(function(h){s=Math.max(h.precision,s),l||(l=h.shouldFormatBigNumber)});var u=o.getRange(),c=o.displayValueToText(o.realValueToDisplayValue(o.valueToRealValue(a,{range:u}),{range:u}),s);return l&&(c=i.getCustomApi().formatBigNumber(c)),i.getDecimalFold().format(i.getThousandsSeparator().format(c))},e.prototype.getTextAttrs=function(t,i,n,o,a,s){var l=0,u="left";return a.isFromZero()?(l=0,u="left"):(l=o.width,u="right"),{x:l,y:n.y,text:t,align:u,baseline:"middle"}},e}(rt),Qn=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._yAxisView=new qn(n),n._candleLastPriceLabelView=new Jn(n),n._indicatorLastValueView=new $n(n),n._overlayYAxisView=new Mi(n),n._crosshairHorizontalLabelView=new Di(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return V(e,r),e.prototype.getName=function(){return lt},e.prototype.updateMain=function(t){var i=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(t,i),i||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(t),this._indicatorLastValueView.draw(t))},e.prototype.updateOverlay=function(t){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(t),this._crosshairHorizontalLabelView.draw(t))},e}(Ie),qt=function(r){function e(t,i){var n=r.call(this,t)||this;return n.reverse=!1,n.inside=!1,n.position=ft.Right,n.gap={top:.2,bottom:.1},n.createRange=function(o){return o.defaultRange},n.minSpan=function(o){return At(-o)},n.valueToRealValue=function(o){return o},n.realValueToDisplayValue=function(o){return o},n.displayValueToRealValue=function(o){return o},n.realValueToValue=function(o){return o},n.displayValueToText=function(o,a){return Z(o,a)},n.override(i),n}return V(e,r),e.prototype.override=function(t){var i=t.name,n=t.gap,o=$t(t,["name","gap"]);W(this.name)||(this.name=i),Y(this.gap,n),Y(this,o)},e.prototype.createRangeImp=function(){var t=this.getParent(),i=t.getChart(),n=i.getChartStore(),o=t.getId(),a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=!1,u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,p=n.getIndicatorsByPaneId(o);p.forEach(function(H){l||(l=H.shouldOhlc),h=Math.min(h,H.precision),R(H.minValue)&&(u=Math.min(u,H.minValue)),R(H.maxValue)&&(c=Math.max(c,H.maxValue))});var d=4,g=this.isInCandle();if(g){var v=n.getPrecision().price;d=h!==Number.MAX_SAFE_INTEGER?Math.min(h,v):v}else h!==Number.MAX_SAFE_INTEGER&&(d=h);var f=n.getVisibleRangeDataList(),y=i.getStyles().candle,_=y.type===x.CandleType.Area,m=y.area.value,b=g&&!_||!g&&l;f.forEach(function(H){var yt=H.dataIndex,X=H.data;if(T(X)&&(b&&(a=Math.min(a,X.low),s=Math.max(s,X.high)),g&&_)){var wt=X[m];R(wt)&&(a=Math.min(a,wt),s=Math.max(s,wt))}p.forEach(function(St){var mt,ot=St.result,_t=St.figures,ut=(mt=ot[yt])!==null&&mt!==void 0?mt:{};_t.forEach(function(xt){var Nt=ut[xt.key];R(Nt)&&(a=Math.min(a,Nt),s=Math.max(s,Nt))})})}),a!==Number.MAX_SAFE_INTEGER&&s!==Number.MIN_SAFE_INTEGER?(a=Math.min(u,a),s=Math.max(c,s)):(a=0,s=10);var S=s-a,C={from:a,to:s,range:S,realFrom:a,realTo:s,realRange:S,displayFrom:a,displayTo:s,displayRange:S},w=this.createRange({chart:i,paneId:o,defaultRange:C}),E=w.realFrom,P=w.realTo,D=w.realRange,A=this.minSpan(d);if(E===P||D<A){var B=u===E,k=c===P;E=B?E:k?E-8*A:E-4*A,P=k?P:B?P+8*A:P+4*A}var I=this.getBounding().height,F=this.gap,O=F.top;O>=1&&(O/=I);var L=F.bottom;L>=1&&(L/=I),E-=(D=P-E)*L,P+=D*O;var N=this.realValueToValue(E,{range:w}),j=this.realValueToValue(P,{range:w}),K=this.realValueToDisplayValue(E,{range:w}),tt=this.realValueToDisplayValue(P,{range:w});return{from:N,to:j,range:j-N,realFrom:E,realTo:P,realRange:P-E,displayFrom:K,displayTo:tt,displayRange:tt-K}},e.prototype.isInCandle=function(){return this.getParent().getId()===q},e.prototype.isFromZero=function(){return this.position===ft.Left&&this.inside||this.position===ft.Right&&!this.inside},e.prototype.createTicksImp=function(){var t,i,n=this,o=this.getRange(),a=o.displayFrom,s=o.displayTo,l=o.displayRange,u=[];if(l>=0){var c=function(I){var F=Math.floor(gt(I)),O=At(F),L=I/O;return+(I=(L<1.5?1:L<2.5?2:L<3.5?3:L<4.5?4:L<5.5?5:L<6.5?6:8)*O).toFixed(Math.abs(F))}(l/8),h=function(I){var F=I.toString(),O=F.indexOf("e");if(O>0){var L=+F.slice(O+1);return L<0?-L:0}var N=F.indexOf(".");return N<0?0:F.length-1-N}(c),p=$e(Math.ceil(a/c)*c,h),d=$e(Math.floor(s/c)*c,h),g=0,v=p;if(c!==0)for(;v<=d;){var f=v.toFixed(h);u[g]={text:f,coord:0,value:f},++g,v+=c}}var y=this.getParent(),_=(i=(t=y.getYAxisWidget())===null||t===void 0?void 0:t.getBounding().height)!==null&&i!==void 0?i:0,m=y.getChart().getChartStore(),b=[],S=m.getIndicatorsByPaneId(y.getId()),C=m.getStyles(),w=0,E=!1;this.isInCandle()?w=m.getPrecision().price:S.forEach(function(I){w=Math.max(w,I.precision),E||(E=I.shouldFormatBigNumber)});var P=m.getCustomApi(),D=m.getThousandsSeparator(),A=m.getDecimalFold(),B=C.xAxis.tickText.size,k=NaN;return u.forEach(function(I){var F=I.value,O=n.displayValueToText(+F,w),L=n.convertToPixel(n.realValueToValue(n.displayValueToRealValue(+F,{range:o}),{range:o}));E&&(O=P.formatBigNumber(F)),O=A.format(D.format(O));var N=R(k);L>B&&L<_-B&&(N&&Math.abs(k-L)>2*B||!N)&&(b.push({text:O,coord:L,value:F}),k=L)}),U(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:b}):b},e.prototype.getAutoSize=function(){var t=this.getParent(),i=t.getChart().getChartStore(),n=i.getStyles(),o=n.yAxis,a=o.size;if(a!=="auto")return a;var s=0;if(o.show&&(o.axisLine.show&&(s+=o.axisLine.size),o.tickLine.show&&(s+=o.tickLine.length),o.tickText.show)){var l=0;this.getTicks().forEach(function(_){l=Math.max(l,Xt(_.text,o.tickText.size,o.tickText.weight,o.tickText.family))}),s+=o.tickText.marginStart+o.tickText.marginEnd+l}var u=n.crosshair,c=0;if(u.show&&u.horizontal.show&&u.horizontal.text.show){var h=i.getIndicatorsByPaneId(t.getId()),p=0,d=!1;h.forEach(function(_){p=Math.max(_.precision,p),d||(d=_.shouldFormatBigNumber)});var g=2;if(this.isInCandle()){var v=i.getPrecision().price,f=n.indicator.lastValueMark;g=f.show&&f.text.show?Math.max(p,v):v}else g=p;var y=Z(this.getRange().displayTo,g);d&&(y=i.getCustomApi().formatBigNumber(y)),y=i.getDecimalFold().format(y),c+=u.horizontal.text.paddingLeft+u.horizontal.text.paddingRight+2*u.horizontal.text.borderSize+Xt(y,u.horizontal.text.size,u.horizontal.text.weight,u.horizontal.text.family)}return Math.max(s,c)},e.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},e.prototype.convertFromPixel=function(t){var i=this.getBounding().height,n=this.getRange(),o=n.realFrom,a=n.realRange,s=(this.reverse?t/i:1-t/i)*a+o;return this.realValueToValue(s,{range:n})},e.prototype.convertToPixel=function(t){var i,n,o=this.getRange(),a=this.valueToRealValue(t,{range:o}),s=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,l=(a-o.realFrom)/o.realRange;return this.reverse?Math.round(l*s):Math.round((1-l)*s)},e.prototype.convertToNicePixel=function(t){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.convertToPixel(t);return Math.round(Math.max(.05*o,Math.min(a,.98*o)))},e.extend=function(t){var i=function(n){function o(a){return n.call(this,a,t)||this}return V(o,n),o}(e);return i},e}(Ii),tr={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(r){return"".concat(Z(r,2),"%")},valueToRealValue:function(r,e){var t=e.range;return(r-t.from)/t.range*t.realRange+t.realFrom},realValueToValue:function(r,e){var t=e.range;return(r-t.realFrom)/t.realRange*t.range+t.from},createRange:function(r){var e=r.chart,t=r.defaultRange,i=e.getDataList()[e.getVisibleRange().from];if(T(i)){var n=t.from,o=t.to,a=t.range,s=(t.from-i.close)/i.close*100,l=(t.to-i.close)/i.close*100,u=l-s;return{from:n,to:o,range:a,realFrom:s,realTo:l,realRange:u,displayFrom:s,displayTo:l,displayRange:u}}return t}},er={name:"logarithm",minSpan:function(r){return .05*At(-r)},valueToRealValue:function(r){return r<0?-gt(Math.abs(r)):gt(r)},realValueToDisplayValue:function(r){return r<0?-At(Math.abs(r)):At(r)},displayValueToRealValue:function(r){return r<0?-gt(Math.abs(r)):gt(r)},realValueToValue:function(r){return r<0?-At(Math.abs(r)):At(r)},createRange:function(r){var e=r.defaultRange,t=e.from,i=e.to,n=e.range,o=t<0?-gt(Math.abs(t)):gt(t),a=i<0?-gt(Math.abs(i)):gt(i);return{from:t,to:i,range:n,realFrom:o,realTo:a,realRange:a-o,displayFrom:t,displayTo:i,displayRange:n}}},ke={normal:qt.extend({name:"normal"}),percentage:qt.extend(tr),logarithm:qt.extend(er)},Ai=function(){function r(e,t,i,n){this._bounding=ne(),this._originalBounding=ne(),this._visible=!0,this._chart=i,this._id=n,this._init(e,t)}return r.prototype._init=function(e,t){this._rootContainer=e,this._container=pt("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),t!==null?e.insertBefore(this._container,t):e.appendChild(this._container)},r.prototype.getContainer=function(){return this._container},r.prototype.setVisible=function(e){this._visible!==e&&(this._container.style.display=e?"block":"none",this._visible=e)},r.prototype.getVisible=function(){return this._visible},r.prototype.getId=function(){return this._id},r.prototype.getChart=function(){return this._chart},r.prototype.getBounding=function(){return this._bounding},r.prototype.setOriginalBounding=function(e){Y(this._originalBounding,e)},r.prototype.getOriginalBounding=function(){return this._originalBounding},r.prototype.update=function(e){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(e??3,this._container,this._bounding)},r.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},r}(),Fi=function(r){function e(t,i,n,o,a){var s=r.call(this,t,i,n,o)||this;s._yAxisWidget=null,s._options={id:"",minHeight:30,dragEnabled:!0,order:0,height:100,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var l=s.getContainer();return s._mainWidget=s.createMainWidget(l),s._yAxisWidget=s.createYAxisWidget(l),s.setOptions(a),s}return V(e,r),e.prototype.setOptions=function(t){var i,n,o,a,s,l=this.getId();if(l===q||l===z){var u=(i=t.axis)===null||i===void 0?void 0:i.name;(!T(this._axis)||T(u)&&this._options.axis.name!==u)&&(this._axis=this.createAxisComponent(u??"normal"))}else T(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof qt&&this._axis.setAutoCalcTickFlag(!0),Y(this._options,t),this._axis.override(M(M({},this._options.axis),{name:(o=(n=t.axis)===null||n===void 0?void 0:n.name)!==null&&o!==void 0?o:"normal"}));var c=null,h="default";return this.getId()===z?(c=this.getMainWidget().getContainer(),h="ew-resize"):(c=this.getYAxisWidget().getContainer(),h="ns-resize"),(s=(a=t.axis)===null||a===void 0?void 0:a.scrollZoomEnabled)===null||s===void 0||s?c.style.cursor=h:c.style.cursor="default",this},e.prototype.getOptions=function(){return this._options},e.prototype.getAxisComponent=function(){return this._axis},e.prototype.setBounding=function(t,i,n,o){var a,s,l,u;Y(this.getBounding(),t);var c={};T(t.height)&&(c.height=t.height),T(t.top)&&(c.top=t.top),this._mainWidget.setBounding(c);var h=T(i);return h&&this._mainWidget.setBounding(i),T(this._yAxisWidget)&&(this._yAxisWidget.setBounding(c),this._axis.position===ft.Left?T(n)&&this._yAxisWidget.setBounding(M(M({},n),{left:0})):T(o)&&(this._yAxisWidget.setBounding(o),h&&this._yAxisWidget.setBounding({left:((a=i.left)!==null&&a!==void 0?a:0)+((s=i.width)!==null&&s!==void 0?s:0)+((l=i.right)!==null&&l!==void 0?l:0)-((u=o.width)!==null&&u!==void 0?u:0)}))),this},e.prototype.getMainWidget=function(){return this._mainWidget},e.prototype.getYAxisWidget=function(){return this._yAxisWidget},e.prototype.updateImp=function(t){var i;this._mainWidget.update(t),(i=this._yAxisWidget)===null||i===void 0||i.update(t)},e.prototype.destroy=function(){var t;r.prototype.destroy.call(this),this._mainWidget.destroy(),(t=this._yAxisWidget)===null||t===void 0||t.destroy()},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=pt("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=Tt(a);a.width=n*l,a.height=o*l,s.scale(l,l);var u=this._mainWidget.getBounding();if(s.drawImage(this._mainWidget.getImage(t),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();s.drawImage(this._yAxisWidget.getImage(t),c.left,0,c.width,c.height)}return a},e.prototype.createYAxisWidget=function(t){return null},e}(Ai),Ri=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.createAxisComponent=function(t){var i=function(n){var o;return(o=ke[n])!==null&&o!==void 0?o:ke.normal}(t??"default");return new i(this)},e.prototype.createMainWidget=function(t){return new Pi(t,this)},e.prototype.createYAxisWidget=function(t){return new Qn(t,this)},e}(Fi),ir=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.createMainWidget=function(t){return new jn(t,this)},e}(Ri),nr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.getAxisStyles=function(t){return t.xAxis},e.prototype.createAxisLine=function(t){return{coordinates:[{x:0,y:0},{x:t.width,y:0}]}},e.prototype.createTickLines=function(t,i,n){var o=n.tickLine,a=n.axisLine.size;return t.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+o.length}]}})},e.prototype.createTickTexts=function(t,i,n){var o=n.tickText,a=n.axisLine.size,s=n.tickLine.length;return t.map(function(l){return{x:l.coord,y:a+s+o.marginStart,text:l.text,align:"center",baseline:"top"}})},e}(ki),rr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},e.prototype.coordinateToPointValueFlag=function(){return!1},e.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},e.prototype.getProgressOverlay=function(){var t,i;return(i=(t=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||t===void 0?void 0:t.overlay)!==null&&i!==void 0?i:null},e.prototype.getDefaultFigures=function(t,i){var n,o=[],a=this.getWidget(),s=a.getPane().getChart().getChartStore(),l=s.getClickOverlayInfo();if(t.needDefaultXAxisFigure&&t.id===((n=l.overlay)===null||n===void 0?void 0:n.id)){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;i.forEach(function(h,p){u=Math.min(u,h.x),c=Math.max(c,h.x);var d=t.points[p];if(R(d.timestamp)){var g=s.getCustomApi().formatDate(d.timestamp,"YYYY-MM-DD HH:mm",x.FormatDateType.Crosshair);o.push({type:"text",attrs:{x:h.x,y:0,text:g,align:"center"},ignoreEvent:!0})}}),i.length>1&&o.unshift({type:"rect",attrs:{x:u,y:0,width:c-u,height:a.getBounding().height},ignoreEvent:!0})}return o},e.prototype.getFigures=function(t,i){var n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=s.getAxisComponent(),c=l.getXAxisPane().getAxisComponent(),h=a.getBounding();return(o=(n=t.createXAxisFigures)===null||n===void 0?void 0:n.call(t,{chart:l,overlay:t,coordinates:i,bounding:h,xAxis:c,yAxis:u}))!==null&&o!==void 0?o:[]},e}(Mi),or=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.compare=function(t){return T(t.kLineData)&&t.dataIndex===t.realDataIndex},e.prototype.getDirectionStyles=function(t){return t.vertical},e.prototype.getText=function(t,i){var n,o=(n=t.kLineData)===null||n===void 0?void 0:n.timestamp;return i.getCustomApi().formatDate(o,"YYYY-MM-DD HH:mm",x.FormatDateType.Crosshair)},e.prototype.getTextAttrs=function(t,i,n,o,a,s){var l=n.realX,u=0,c="center";return l-i/2-s.paddingLeft<0?(u=0,c="left"):l+i/2+s.paddingRight>o.width?(u=o.width,c="right"):u=l,{x:u,y:0,text:t,align:c,baseline:"top"}},e}(Di),ar=function(r){function e(t,i){var n=r.call(this,t,i)||this;return n._xAxisView=new nr(n),n._overlayXAxisView=new rr(n),n._crosshairVerticalLabelView=new or(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return V(e,r),e.prototype.getName=function(){return vt},e.prototype.updateMain=function(t){this._xAxisView.draw(t)},e.prototype.updateOverlay=function(t){this._overlayXAxisView.draw(t),this._crosshairVerticalLabelView.draw(t)},e}(Ie),Bi=function(r){function e(t,i){var n=r.call(this,t)||this;return n.override(i),n}return V(e,r),e.prototype.override=function(t){var i=t.name,n=t.scrollZoomEnabled,o=t.createTicks;W(this.name)||(this.name=i),this.scrollZoomEnabled=n??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},e.prototype.createRangeImp=function(){var t=this.getParent().getChart().getChartStore().getVisibleRange(),i=t.from,n=t.to,o=n-1,a=n-i;return{from:i,to:o,range:a,realFrom:i,realTo:o,realRange:a,displayFrom:i,displayTo:o,displayRange:a}},e.prototype.createTicksImp=function(){var t=this,i=this.getParent().getChart().getChartStore(),n=i.getCustomApi().formatDate,o=i.getVisibleRangeTimeTickList().map(function(a){var s=a.dataIndex,l=a.weight,u=a.timestamp,c="";switch(l){case li:c=n(u,"YYYY",x.FormatDateType.XAxis);break;case ui:c=n(u,"YYYY-MM",x.FormatDateType.XAxis);break;case ci:c=n(u,"MM-DD",x.FormatDateType.XAxis);break;case hi:case di:c=n(u,"HH:mm",x.FormatDateType.XAxis);break;default:c=n(u,"HH:mm:ss",x.FormatDateType.XAxis)}return{coord:t.convertToPixel(s),text:c,value:u}});return U(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:o}):o},e.prototype.getAutoSize=function(){var t=this.getParent().getChart().getStyles(),i=t.xAxis,n=i.size;if(n!=="auto")return n;var o=t.crosshair,a=0;i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show&&(a+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var s=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(s+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+2*o.vertical.text.borderSize+o.vertical.text.size),Math.max(a,s)},e.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},e.prototype.convertTimestampFromPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.coordinateToDataIndex(t);return i.dataIndexToTimestamp(n)},e.prototype.convertTimestampToPixel=function(t){var i=this.getParent().getChart().getChartStore(),n=i.timestampToDataIndex(t);return i.dataIndexToCoordinate(n)},e.prototype.convertFromPixel=function(t){return this.getParent().getChart().getChartStore().coordinateToDataIndex(t)},e.prototype.convertToPixel=function(t){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(t)},e.extend=function(t){var i=function(n){function o(a){return n.call(this,a,t)||this}return V(o,n),o}(e);return i},e}(Ii),Me={normal:Bi.extend({name:"normal"})},sr=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return V(e,r),e.prototype.createAxisComponent=function(t){var i=function(n){var o;return(o=Me[n])!==null&&o!==void 0?o:Me.normal}(t);return new i(this)},e.prototype.createMainWidget=function(t){return new ar(t,this)},e}(Fi),lr=function(r){function e(t,i){var n,o,a,s=r.call(this,t,i)||this;return s._dragFlag=!1,s._dragStartY=0,s._topPaneHeight=0,s._bottomPaneHeight=0,s._topPane=null,s._bottomPane=null,s._pressedMouseMoveEvent=(n=s._pressedTouchMouseMoveEvent,o=20,a=0,function(){var l=Date.now();l-a>o&&(n.apply(this,arguments),a=l)}),s.registerEvent("touchStartEvent",s._mouseDownEvent.bind(s)).registerEvent("touchMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("touchEndEvent",s._mouseUpEvent.bind(s)).registerEvent("mouseDownEvent",s._mouseDownEvent.bind(s)).registerEvent("mouseUpEvent",s._mouseUpEvent.bind(s)).registerEvent("pressedMouseMoveEvent",s._pressedMouseMoveEvent.bind(s)).registerEvent("mouseEnterEvent",s._mouseEnterEvent.bind(s)).registerEvent("mouseLeaveEvent",s._mouseLeaveEvent.bind(s)),s}return V(e,r),e.prototype.getName=function(){return Zt},e.prototype.checkEventOn=function(){return!0},e.prototype._mouseDownEvent=function(t){var i=this;this._dragFlag=!0,this._dragStartY=t.pageY;var n=this.getPane(),o=n.getChart();this._topPane=n.getTopPane(),this._bottomPane=n.getBottomPane();var a=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var s=a.findIndex(function(h){var p;return h.getId()===((p=i._topPane)===null||p===void 0?void 0:p.getId())}),l=s-1;l>-1;l--){var u=a[l];if(u.getOptions().state!=="minimize"){this._topPane=u;break}}if(this._bottomPane.getOptions().state==="minimize")for(s=a.findIndex(function(h){var p;return h.getId()===((p=i._bottomPane)===null||p===void 0?void 0:p.getId())}),l=s+1;l<a.length;l++){var c=a[l];if(c.getOptions().state!=="minimize"){this._bottomPane=c;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},e.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},e.prototype._pressedTouchMouseMoveEvent=function(t){var i=t.pageY-this._dragStartY,n=i<0;if(T(this._topPane)&&T(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var a=null,s=null,l=0,u=0;n?(a=this._topPane,s=this._bottomPane,l=this._topPaneHeight,u=this._bottomPaneHeight):(a=this._bottomPane,s=this._topPane,l=this._bottomPaneHeight,u=this._topPaneHeight);var c=a.getOptions().minHeight;if(l>c){var h=Math.max(l-Math.abs(i),c),p=l-h;a.setBounding({height:h}),s.setBounding({height:u+p});var d=this.getPane(),g=d.getChart();g.getChartStore().executeAction(x.ActionType.OnPaneDrag,{paneId:d.getId()}),g.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},e.prototype._mouseEnterEvent=function(){var t=this.getPane();if(t.getBottomPane().getOptions().dragEnabled){var i=t.getChart().getStyles().separator;return this.getContainer().style.background=i.activeBackgroundColor,!0}return!1},e.prototype._mouseLeaveEvent=function(){return!this._dragFlag&&(this.getContainer().style.background="transparent",!0)},e.prototype.createContainer=function(){return pt("div",{width:"100%",height:"".concat(7,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},e.prototype.updateImp=function(t,i,n){if(n===4||n===2){var o=this.getPane().getChart().getStyles().separator;t.style.top="".concat(-Math.floor((7-o.size)/2),"px"),t.style.height="".concat(7,"px")}},e}(vi),Li=function(r){function e(t,i,n,o,a,s){var l=r.call(this,t,i,n,o)||this;return l.getContainer().style.overflow="",l._topPane=a,l._bottomPane=s,l._separatorWidget=new lr(l.getContainer(),l),l}return V(e,r),e.prototype.setBounding=function(t){return Y(this.getBounding(),t),this},e.prototype.getTopPane=function(){return this._topPane},e.prototype.setTopPane=function(t){return this._topPane=t,this},e.prototype.getBottomPane=function(){return this._bottomPane},e.prototype.setBottomPane=function(t){return this._bottomPane=t,this},e.prototype.getWidget=function(){return this._separatorWidget},e.prototype.getImage=function(t){var i=this.getBounding(),n=i.width,o=i.height,a=this.getChart().getStyles().separator,s=pt("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=Tt(s);return s.width=n*u,s.height=o*u,l.scale(u,u),l.fillStyle=a.color,l.fillRect(0,0,n,o),s},e.prototype.updateImp=function(t,i,n){if(t===4||t===2){var o=this.getChart().getStyles().separator;i.style.backgroundColor=o.color,i.style.height="".concat(n.height,"px"),i.style.marginLeft="".concat(n.left,"px"),i.style.width="".concat(n.width,"px"),this._separatorWidget.update(t)}},e}(Ai);function Oi(){return typeof window<"u"&&window.navigator.userAgent.toLowerCase().includes("firefox")}function De(){return typeof window<"u"&&/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var Ae,ur=5,cr=5,Vi=5,Wi=30,Fe=0,hr=1,dr=2,pr=function(){function r(e,t,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!De(),this._onFirefoxOutsideMouseUp=function(o){n._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){n._firesTouchEvents(o)?(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._tapCoordinate).manhattanDistance<Wi&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(o),n._handler.doubleTapEvent),n._resetTapTimeout())):(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1&&(n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._clickCoordinate).manhattanDistance<Vi&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(o),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()))},this._target=e,this._handler=t,this._options=i,this._init()}return r.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},r.prototype._mouseEnterHandler=function(e){var t,i,n,o=this;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){o._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){o._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){o._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},r.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._mouseMoveHandler=function(e){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},r.prototype._mouseWheelHandler=function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(!T(this._handler.mouseWheelHortEvent)||(this._preventDefault(e),Math.abs(e.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(e),-e.deltaX)}else{if(!T(this._handler.mouseWheelVertEvent))return;var t=-e.deltaY/100;if(t===0)return;switch(this._preventDefault(e),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(t!==0){var i=Math.sign(t)*Math.min(1,Math.abs(t));this._handler.mouseWheelVertEvent(this._makeCompatEvent(e),i)}}},r.prototype._contextMenuHandler=function(e){this._preventDefault(e)},r.prototype._touchMoveHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._touchMoveStartCoordinate),n=i.xOffset,o=i.yOffset,a=i.manhattanDistance;if(this._touchMoveExceededManhattanDistance||!(a<cr)){if(!this._touchMoveExceededManhattanDistance){var s=.5*n,l=o>=s&&!this._options.treatVertDragAsPageScroll(),u=s>o&&!this._options.treatHorzDragAsPageScroll();l||u||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(e,t),this._handler.touchMoveEvent)}}},r.prototype._mouseMoveWithDownHandler=function(e){e.button===Fe&&(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._mouseMoveStartCoordinate).manhattanDistance>=ur&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(e),this._handler.pressedMouseMoveEvent))},r.prototype._mouseTouchMoveWithDownInfo=function(e,t){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return{xOffset:i,yOffset:n,manhattanDistance:i+n}},r.prototype._touchEndHandler=function(e){var t=this._touchWithId(e.changedTouches,this._activeTouchId);if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(e),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(e,t);this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._tapCoordinate).manhattanDistance<Wi&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()):this._cancelTap||(this._processEvent(i,this._handler.tapEvent),T(this._handler.tapEvent)&&this._preventDefault(e)),this._tapCount===0&&this._preventDefault(e),e.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(e))}},r.prototype._mouseUpHandler=function(e){if(e.button===Fe){var t=this._makeCompatEvent(e);this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Oi()&&this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._firesTouchEvents(e)||(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1?(this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._clickCoordinate).manhattanDistance<Vi&&!this._cancelClick&&this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent))}},r.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},r.prototype._touchStartHandler=function(e){if(this._activeTouchId===null){var t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(e);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),500),this._processEvent(this._makeCompatEvent(e,t),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(t))}},r.prototype._mouseDownHandler=function(e){if(e.button===dr)return this._preventDefault(e),void this._processEvent(this._makeCompatEvent(e),this._handler.mouseRightClickEvent);if(e.button===Fe){var t=this._target.ownerDocument.documentElement;Oi()&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",n),this._mousePressed=!0,this._firesTouchEvents(e)||(this._processEvent(this._makeCompatEvent(e),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(e)))}},r.prototype._init=function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,i=function(n){e._handler.mouseDownOutsideEvent!=null&&(n.composed&&e._target.contains(n.composedPath()[0])||n.target!==null&&e._target.contains(n.target)||e._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){t.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0}),De()&&(this._unsubscribeMobileSafariEvents=function(){e._target.removeEventListener("dblclick",e._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===hr)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},r.prototype._initPinch=function(){var e=this;(T(this._handler.pinchStartEvent)||T(this._handler.pinchEvent)||T(this._handler.pinchEndEvent))&&(this._target.addEventListener("touchstart",function(t){e._checkPinchState(t.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(t){if(t.touches.length===2&&e._startPinchMiddleCoordinate!==null&&T(e._handler.pinchEvent)){var i=e._getTouchDistance(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(M(M({},e._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),e._preventDefault(t)}},{passive:!1}),this._target.addEventListener("touchend",function(t){e._checkPinchState(t.touches)}))},r.prototype._checkPinchState=function(e){e.length===1&&(this._pinchPrevented=!1),e.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)},r.prototype._startPinch=function(e){var t=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=this._getTouchDistance(e[0],e[1]),T(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},r.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,T(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},r.prototype._mouseLeaveHandler=function(e){var t,i,n;(t=this._unsubscribeMousemove)===null||t===void 0||t.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),this._firesTouchEvents(e)||this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(e),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!De())},r.prototype._longTapHandler=function(e){var t=this._touchWithId(e.touches,this._activeTouchId);t!==null&&(this._processEvent(this._makeCompatEvent(e,t),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},r.prototype._firesTouchEvents=function(e){var t;return T((t=e.sourceCapabilities)===null||t===void 0?void 0:t.firesTouchEvents)?e.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(e)<this._lastTouchEventTimeStamp+500},r.prototype._processEvent=function(e,t){t?.call(this._handler,e)},r.prototype._makeCompatEvent=function(e,t){var i=this,n=t??e,o=this._target.getBoundingClientRect();return{x:n.clientX-o.left,y:n.clientY-o.top,pageX:n.pageX,pageY:n.pageY,isTouch:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click"&&e.type!=="wheel",preventDefault:function(){e.type!=="touchstart"&&i._preventDefault(e)}}},r.prototype._getTouchDistance=function(e,t){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},r.prototype._preventDefault=function(e){e.cancelable&&e.preventDefault()},r.prototype._getCoordinate=function(e){return{x:e.pageX,y:e.pageY}},r.prototype._eventTimeStamp=function(e){var t;return(t=e.timeStamp)!==null&&t!==void 0?t:performance.now()},r.prototype._touchWithId=function(e,t){for(var i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null},r}(),gr=function(){function r(e,t){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":i._chart.getChartStore().zoom(.5);break;case"Minus":i._chart.getChartStore().zoom(-.5);break;case"ArrowLeft":(o=i._chart.getChartStore()).startScroll(),o.scroll(-3*o.getBarSpace().bar);break;case"ArrowRight":var o;(o=i._chart.getChartStore()).startScroll(),o.scroll(3*o.getBarSpace().bar)}},this._container=e,this._chart=t,this._event=new pr(e,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),e.addEventListener("keydown",this._boundKeyBoardDownEvent)}return r.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},r.prototype.pinchEvent=function(e,t){var i=this._findWidgetByEvent(e),n=i.pane,o=i.widget;if(n?.getId()!==z&&o?.getName()===Q){var a=this._makeWidgetEvent(e,o),s=5*(t-this._pinchScale);return this._pinchScale=t,this._chart.getChartStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},r.prototype.mouseWheelHortEvent=function(e,t){var i=this._chart.getChartStore();return i.startScroll(),i.scroll(t),!0},r.prototype.mouseWheelVertEvent=function(e,t){var i=this._findWidgetByEvent(e).widget,n=this._makeWidgetEvent(e,i);return i?.getName()===Q&&(this._chart.getChartStore().zoom(t,{x:n.x,y:n.y}),!0)},r.prototype.mouseDownEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(this._mouseDownWidget=n,n!==null){var o=this._makeWidgetEvent(e,n);switch(n.getName()){case Zt:return n.dispatchEvent("mouseDownEvent",o);case Q:var a=i.getAxisComponent().getRange();return this._prevYAxisRange=M({},a),this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),n.dispatchEvent("mouseDownEvent",o);case vt:return(s=n.dispatchEvent("mouseDownEvent",o))&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:o.x,y:o.y},this._xAxisStartScaleDistance=o.pageX,s;case lt:var s;return(s=n.dispatchEvent("mouseDownEvent",o))&&this._chart.updatePane(1),a=i.getAxisComponent().getRange(),this._prevYAxisRange=M({},a),this._yAxisStartScaleDistance=o.pageY,s}}return!1},r.prototype.mouseMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),a=o.pane,s=o.widget,l=this._makeWidgetEvent(e,s);if(((t=this._mouseMoveTriggerWidgetInfo.pane)===null||t===void 0?void 0:t.getId())===a?.getId()&&((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())===s?.getName()||(s?.dispatchEvent("mouseEnterEvent",l),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null)switch(s.getName()){case Q:var u=s.dispatchEvent("mouseMoveEvent",l),c=this._chart.getChartStore(),h={x:l.x,y:l.y,paneId:a?.getId()};return u&&c.getActiveTooltipIcon()!==null&&(h=void 0,s.getContainer().style.cursor="pointer"),this._chart.getChartStore().setCrosshair(h),u;case Zt:case vt:case lt:return u=s.dispatchEvent("mouseMoveEvent",l),this._chart.getChartStore().setCrosshair(),u}return!1},r.prototype.pressedMouseMoveEvent=function(e){var t,i,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Zt)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",e);var o=this._findWidgetByEvent(e),a=o.pane,s=o.widget;if(s!==null&&((t=this._mouseDownWidget)===null||t===void 0?void 0:t.getPane().getId())===a?.getId()&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===s.getName()){var l=this._makeWidgetEvent(e,s);switch(s.getName()){case Q:var u=s.getBounding();if(!(w=s.dispatchEvent("pressedMouseMoveEvent",l))&&this._startScrollCoordinate!==null){var c=a.getAxisComponent();if(this._prevYAxisRange!==null&&!c.getAutoCalcTickFlag()&&c.scrollZoomEnabled){var h=this._prevYAxisRange,p=h.from,d=h.to,g=p+(P=(E=h.range)*(S=(c.reverse?this._startScrollCoordinate.y-l.y:l.y-this._startScrollCoordinate.y)/u.height)),v=d+P,f=c.valueToRealValue(g,{range:this._prevYAxisRange}),y=c.valueToRealValue(v,{range:this._prevYAxisRange}),_=c.realValueToDisplayValue(f,{range:this._prevYAxisRange}),m=c.realValueToDisplayValue(y,{range:this._prevYAxisRange});c.setRange({from:g,to:v,range:v-g,realFrom:f,realTo:y,realRange:y-f,displayFrom:_,displayTo:m,displayRange:m-_})}var b=l.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(b)}return this._chart.getChartStore().setCrosshair({x:l.x,y:l.y,paneId:a?.getId()}),w;case vt:if(w=s.dispatchEvent("pressedMouseMoveEvent",l))this._chart.updatePane(1);else if(a.getAxisComponent().scrollZoomEnabled){var S=this._xAxisStartScaleDistance/l.pageX;if(Number.isFinite(S)){var C=10*(S-this._xAxisScale);this._xAxisScale=S,this._chart.getChartStore().zoom(C,(n=this._xAxisStartScaleCoordinate)!==null&&n!==void 0?n:void 0)}}return w;case lt:var w;if(w=s.dispatchEvent("pressedMouseMoveEvent",l))this._chart.updatePane(1);else if(c=a.getAxisComponent(),this._prevYAxisRange!==null&&c.scrollZoomEnabled){var E,P,D=this._prevYAxisRange,A=(p=D.from,d=D.to,(E=D.range)*(S=l.pageY/this._yAxisStartScaleDistance));g=p-(P=(A-E)/2),v=d+P,f=c.valueToRealValue(g,{range:this._prevYAxisRange}),y=c.valueToRealValue(v,{range:this._prevYAxisRange}),_=c.realValueToDisplayValue(f,{range:this._prevYAxisRange}),m=c.realValueToDisplayValue(y,{range:this._prevYAxisRange}),c.setRange({from:g,to:v,range:A,realFrom:f,realTo:y,realRange:y-f,displayFrom:_,displayTo:m,displayRange:m-_}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}return w}}return!1},r.prototype.mouseUpEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case Q:case Zt:case vt:case lt:i=t.dispatchEvent("mouseUpEvent",n)}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},r.prototype.mouseClickEvent=function(e){var t=this._findWidgetByEvent(e).widget;if(t!==null){var i=this._makeWidgetEvent(e,t);return t.dispatchEvent("mouseClickEvent",i)}return!1},r.prototype.mouseRightClickEvent=function(e){var t=this._findWidgetByEvent(e).widget,i=!1;if(t!==null){var n=this._makeWidgetEvent(e,t);switch(t.getName()){case Q:case vt:case lt:i=t.dispatchEvent("mouseRightClickEvent",n)}i&&this._chart.updatePane(1)}return!1},r.prototype.mouseDoubleClickEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null)switch(n.getName()){case Q:var o=this._makeWidgetEvent(e,n);return n.dispatchEvent("mouseDoubleClickEvent",o);case lt:var a=i.getAxisComponent();if(!a.getAutoCalcTickFlag())return a.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0}return!1},r.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},r.prototype.touchStartEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null){var o=this._makeWidgetEvent(e,n);switch(n.getName()){case Q:var a=this._chart.getChartStore();if(n.dispatchEvent("mouseDownEvent",o))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,a.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._flingScrollRequestId!==null&&(Ze(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:o.x,y:o.y},a.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var s=o.x-this._touchCoordinate.x,l=o.y-this._touchCoordinate.y;Math.sqrt(s*s+l*l)<10?(this._touchCoordinate={x:o.x,y:o.y},a.setCrosshair({x:o.x,y:o.y,paneId:i?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,a.setCrosshair())}return!0;case vt:case lt:var u=n.dispatchEvent("mouseDownEvent",o);return u&&this._chart.updatePane(1),u}}return!1},r.prototype.touchMoveEvent=function(e){var t,i,n,o=this._findWidgetByEvent(e),a=o.pane,s=o.widget;if(s!==null){var l=this._makeWidgetEvent(e,s),u=s.getName(),c=this._chart.getChartStore();switch(u){case Q:if(s.dispatchEvent("pressedMouseMoveEvent",l))return(t=l.preventDefault)===null||t===void 0||t.call(l),c.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._touchCoordinate!==null)(i=l.preventDefault)===null||i===void 0||i.call(l),c.setCrosshair({x:l.x,y:l.y,paneId:a?.getId()});else if(this._startScrollCoordinate!==null&&Math.abs(this._startScrollCoordinate.x-l.x)>this._startScrollCoordinate.y-l.y){var h=l.x-this._startScrollCoordinate.x;c.scroll(h)}return!0;case vt:case lt:var p=s.dispatchEvent("pressedMouseMoveEvent",l);return p&&((n=l.preventDefault)===null||n===void 0||n.call(l),this._chart.updatePane(1)),p}}return!1},r.prototype.touchEndEvent=function(e){var t=this,i=this._findWidgetByEvent(e).widget;if(i!==null){var n=this._makeWidgetEvent(e,i);switch(i.getName()){case Q:if(i.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var o=new Date().getTime()-this._flingStartTime,a=(n.x-this._startScrollCoordinate.x)/(o>0?o:1)*20;if(o<200&&Math.abs(a)>0){var s=this._chart.getChartStore(),l=function(){t._flingScrollRequestId=re(function(){s.startScroll(),s.scroll(a),a*=.975,Math.abs(a)<1?t._flingScrollRequestId!==null&&(Ze(t._flingScrollRequestId),t._flingScrollRequestId=null):l()})};l()}}return!0;case vt:case lt:i.dispatchEvent("mouseUpEvent",n)&&this._chart.updatePane(1)}}return!1},r.prototype.tapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget,o=!1;if(n!==null){var a=this._makeWidgetEvent(e,n),s=n.dispatchEvent("mouseClickEvent",a);if(n.getName()===Q){var l=this._makeWidgetEvent(e,n),u=this._chart.getChartStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,!0),o=!0):(this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:l.x,y:l.y},u.setCrosshair({x:l.x,y:l.y,paneId:i?.getId()},!0),o=!0),this._touchCancelCrosshair=!1)}(o||s)&&this._chart.updatePane(1)}return o},r.prototype.doubleTapEvent=function(e){return this.mouseDoubleClickEvent(e)},r.prototype.longTapEvent=function(e){var t=this._findWidgetByEvent(e),i=t.pane,n=t.widget;if(n!==null&&n.getName()===Q){var o=this._makeWidgetEvent(e,n);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:i?.getId()}),!0}return!1},r.prototype._findWidgetByEvent=function(e){var t,i,n,o,a=e.x,s=e.y,l=this._chart.getSeparatorPanes(),u=this._chart.getStyles().separator.size;try{for(var c=J(l),h=c.next();!h.done;h=c.next()){var p=dt(h.value,2)[1],d=(_=p.getBounding()).top-Math.round((7-u)/2);if(a>=_.left&&a<=_.left+_.width&&s>=d&&s<=d+7)return{pane:p,widget:p.getWidget()}}}catch(P){t={error:P}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}var g=this._chart.getDrawPanes(),v=null;try{for(var f=J(g),y=f.next();!y.done;y=f.next()){var _,m=y.value;if(a>=(_=m.getBounding()).left&&a<=_.left+_.width&&s>=_.top&&s<=_.top+_.height){v=m;break}}}catch(P){n={error:P}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}var b=null;if(v!==null){if(!T(b)){var S=v.getMainWidget(),C=S.getBounding();a>=C.left&&a<=C.left+C.width&&s>=C.top&&s<=C.top+C.height&&(b=S)}if(!T(b)){var w=v.getYAxisWidget();if(w!==null){var E=w.getBounding();a>=E.left&&a<=E.left+E.width&&s>=E.top&&s<=E.top+E.height&&(b=w)}}}return{pane:v,widget:b}},r.prototype._makeWidgetEvent=function(e,t){var i,n,o,a=(i=t?.getBounding())!==null&&i!==void 0?i:null;return M(M({},e),{x:e.x-((n=a?.left)!==null&&n!==void 0?n:0),y:e.y-((o=a?.top)!==null&&o!==void 0?o:0)})},r.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},r}();x.DomPosition=void 0,(Ae=x.DomPosition||(x.DomPosition={})).Root="root",Ae.Main="main",Ae.YAxis="yAxis";var Ni=function(){function r(e,t){this._chartBounding=ne(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._initContainer(e),this._chartEvent=new gr(this._chartContainer,this),this._chartStore=new Ln(this,t),this._initPanes(t),this._layout()}return r.prototype._initContainer=function(e){this._container=e,this._chartContainer=pt("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,e.appendChild(this._chartContainer),this._cacheChartBounding()},r.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},r.prototype._initPanes=function(e){var t,i=this,n=(t=e?.layout)!==null&&t!==void 0?t:[{type:"candle"}],o=function(s){var l,u;if(!T(i._candlePane)){var c=(l=s.options)!==null&&l!==void 0?l:{};Y(c,{id:q}),i._candlePane=i._createPane(ir,q,c),((u=s.content)!==null&&u!==void 0?u:[]).forEach(function(h){i.createIndicator(h,!0,c)})}},a=function(s){if(!T(i._xAxisPane)){var l=i._createPane(sr,z,s??{});i._xAxisPane=l}};n.forEach(function(s){var l;switch(s.type){case"candle":o(s);break;case"indicator":var u=(l=s.content)!==null&&l!==void 0?l:[];if(u.length>0){var c=null;u.forEach(function(h){T(c)?i.createIndicator(h,!0,{id:c}):c=i.createIndicator(h,!0,s.options)})}break;case"xAxis":a(s.options)}}),o({type:"candle"}),a({order:Number.MAX_SAFE_INTEGER})},r.prototype._createPane=function(e,t,i){var n,o,a,s=null,l=null,u=(n=i?.order)!==null&&n!==void 0?n:0;if(this._drawPanes.length>0&&(u<this._drawPanes[0].getOptions().order&&(l=new e(this._chartContainer,this._drawPanes[0].getContainer(),this,t,i??{}),s=0),!T(l)))for(var c=1;c<this._drawPanes.length;c++){var h=this._drawPanes[c-1],p=this._drawPanes[c];if(u>=h.getOptions().order&&u<p.getOptions().order){var d=null;d=p.getId()!==z?(a=(o=this._separatorPanes.get(p))===null||o===void 0?void 0:o.getContainer())!==null&&a!==void 0?a:null:p.getContainer(),l=new e(this._chartContainer,d,this,t,i??{}),s=c;break}}T(l)||(l=new e(this._chartContainer,null,this,t,i??{}));var g=0;if(R(s)?(this._drawPanes.splice(s,0,l),g=s):(this._drawPanes.push(l),g=this._drawPanes.length-1),l.getId()!==z){var v=this._drawPanes[g+1];if(T(v)&&v.getId()===z&&(v=this._drawPanes[g+2]),T(v)&&(T(f=this._separatorPanes.get(v))?f.setTopPane(l):(f=new Li(this._chartContainer,v.getContainer(),this,"",l,v),this._separatorPanes.set(v,f))),T(h=this._drawPanes[g-1])&&h.getId()===z&&(h=this._drawPanes[g-2]),T(h)){var f=new Li(this._chartContainer,l.getContainer(),this,"",h,l);this._separatorPanes.set(l,f)}}return l},r.prototype._recalculatePaneHeight=function(e,t,i){if(i===0)return!1;var n=this._drawPanes.filter(function(h){var p=h.getId();return h.getOptions().state==="normal"&&p!==e.getId()&&p!==z}),o=n.length;if(o===0)return!1;if(e.getId()!==q&&T(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var a=this._candlePane.getBounding().height;if(a>0){var s=this._candlePane.getOptions().minHeight,l=a+i;l<s&&(t-=a+i-(l=s)),this._candlePane.setBounding({height:l})}}else{var u=i,c=Math.floor(i/o);n.forEach(function(h,p){var d=h.getBounding().height,g=0;(g=p===o-1?d+u:d+c)<h.getOptions().minHeight&&(g=h.getOptions().minHeight),h.setBounding({height:g}),u-=g-d}),Math.abs(u)>0&&(t-=u)}return e.setBounding({height:t}),!0},r.prototype.getDrawPaneById=function(e){if(e===q)return this._candlePane;if(e===z)return this._xAxisPane;var t=this._drawPanes.find(function(i){return i.getId()===e});return t??null},r.prototype.getContainer=function(){return this._container},r.prototype.getChartStore=function(){return this._chartStore},r.prototype.getXAxisPane=function(){return this._xAxisPane},r.prototype.getDrawPanes=function(){return this._drawPanes},r.prototype.getSeparatorPanes=function(){return this._separatorPanes},r.prototype.layout=function(e){var t,i,n,o,a,s=this;(t=e.measureHeight)!==null&&t!==void 0&&t&&(this._layoutOptions.measureHeight=e.measureHeight),(i=e.measureWidth)!==null&&i!==void 0&&i&&(this._layoutOptions.measureWidth=e.measureWidth),(n=e.update)!==null&&n!==void 0&&n&&(this._layoutOptions.update=e.update),(o=e.buildYAxisTick)!==null&&o!==void 0&&o&&(this._layoutOptions.buildYAxisTick=e.buildYAxisTick),(a=e.buildYAxisTick)!==null&&a!==void 0&&a&&(this._layoutOptions.forceBuildYAxisTick=e.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(l){s._layout(),s._layoutPending=!1}).catch(function(l){}))},r.prototype._layout=function(){var e=this,t=this._layoutOptions,i=t.measureHeight,n=t.measureWidth,o=t.update,a=t.buildYAxisTick,s=t.forceBuildYAxisTick;if(i){var l=this._chartBounding.height,u=this.getStyles().separator.size,c=this._xAxisPane.getAxisComponent().getAutoSize(),h=l-c;h<0&&(h=0),this._drawPanes.forEach(function(k){var I=k.getId();if(T(e._separatorPanes.get(k))&&(h-=u),I!==z&&I!==q&&k.getVisible()){var F=k.getBounding().height;F>h?(F=h,h=0):h-=F,k.setBounding({height:F})}}),this._candlePane.setBounding({height:Math.max(h,0)}),this._xAxisPane.setBounding({height:c});var p=0;this._drawPanes.forEach(function(k){var I=e._separatorPanes.get(k);T(I)&&(I.setBounding({height:u,top:p}),p+=u),k.setBounding({top:p}),p+=k.getBounding().height})}var d=n;if((a||s)&&this._drawPanes.forEach(function(k){var I=k.getAxisComponent().buildTicks(s);d||(d=I)}),d){var g=this._chartBounding.width,v=this.getStyles(),f=0,y=!0,_=0,m=!0;this._drawPanes.forEach(function(k){if(k.getId()!==z){var I=k.getAxisComponent(),F=I.inside,O=I.getAutoSize();I.position===ft.Left?(f=Math.max(f,O),F&&(y=!1)):(_=Math.max(_,O),F&&(m=!1))}});var b=g,S=0,C=0;y&&(b-=f,S=f),m&&(b-=_,C=_),this._chartStore.setTotalBarSpace(b);var w={width:g},E={width:b,left:S,right:C},P={width:f},D={width:_},A=v.separator.fill,B={};B=A?w:E,this._drawPanes.forEach(function(k){var I;(I=e._separatorPanes.get(k))===null||I===void 0||I.setBounding(B),k.setBounding(w,E,P,D)})}o&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,forceBuildYAxisTick:!1}},r.prototype.updatePane=function(e,t){var i=this;if(T(t)){var n=this.getDrawPaneById(t);n?.update(e)}else this._drawPanes.forEach(function(o){var a;o.update(e),(a=i._separatorPanes.get(o))===null||a===void 0||a.update(e)})},r.prototype.crosshairChange=function(e){var t=this;if(this._chartStore.hasAction(x.ActionType.OnCrosshairChange)){var i={};this._drawPanes.forEach(function(n){var o=n.getId(),a={};t._chartStore.getIndicatorsByPaneId(o).forEach(function(s){var l,u=s.result;a[s.name]=u[(l=e.dataIndex)!==null&&l!==void 0?l:u.length-1]}),i[o]=a}),W(e.paneId)&&this._chartStore.executeAction(x.ActionType.OnCrosshairChange,M(M({},e),{indicatorData:i}))}},r.prototype.getDom=function(e,t){var i,n;if(!T(e))return this._chartContainer;var o=this.getDrawPaneById(e);if(T(o))switch(t??x.DomPosition.Root){case x.DomPosition.Root:return o.getContainer();case x.DomPosition.Main:return o.getMainWidget().getContainer();case x.DomPosition.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&n!==void 0?n:null}return null},r.prototype.getSize=function(e,t){var i,n;if(!T(e))return this._chartBounding;var o=this.getDrawPaneById(e);if(T(o))switch(t??x.DomPosition.Root){case x.DomPosition.Root:return o.getBounding();case x.DomPosition.Main:return o.getMainWidget().getBounding();case x.DomPosition.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&n!==void 0?n:null}return null},r.prototype.setPrecision=function(e){this._chartStore.setPrecision(e)},r.prototype.getPrecision=function(){return this._chartStore.getPrecision()},r.prototype.setStyles=function(e){var t=this;this._setOptions(function(){t._chartStore.setStyles(e)})},r.prototype.getStyles=function(){return this._chartStore.getStyles()},r.prototype.setCustomApi=function(e){var t=this;this._setOptions(function(){t._chartStore.setCustomApi(e)})},r.prototype.getCustomApi=function(){return this._chartStore.getCustomApi()},r.prototype.setLocale=function(e){var t=this;this._setOptions(function(){t._chartStore.setLocale(e)})},r.prototype.getLocale=function(){return this._chartStore.getLocale()},r.prototype.setTimezone=function(e){var t=this;this._setOptions(function(){t._chartStore.setTimezone(e)})},r.prototype.getTimezone=function(){return this._chartStore.getTimezone()},r.prototype.setThousandsSeparator=function(e){var t=this;this._setOptions(function(){t._chartStore.setThousandsSeparator(e)})},r.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},r.prototype.setDecimalFold=function(e){var t=this;this._setOptions(function(){t._chartStore.setDecimalFold(e)})},r.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},r.prototype._setOptions=function(e){e(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.setOffsetRightDistance=function(e){this._chartStore.setOffsetRightDistance(e,!0)},r.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},r.prototype.setMaxOffsetLeftDistance=function(e){e<0||this._chartStore.setMaxOffsetLeftDistance(e)},r.prototype.setMaxOffsetRightDistance=function(e){e<0||this._chartStore.setMaxOffsetRightDistance(e)},r.prototype.setLeftMinVisibleBarCount=function(e){e<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(e))},r.prototype.setRightMinVisibleBarCount=function(e){e<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(e))},r.prototype.setBarSpace=function(e){this._chartStore.setBarSpace(e)},r.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},r.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},r.prototype.clearData=function(){this._chartStore.clearData()},r.prototype.getDataList=function(){return this._chartStore.getDataList()},r.prototype.applyNewData=function(e,t){this._drawPanes.forEach(function(n){n.getAxisComponent().setAutoCalcTickFlag(!0)});var i={forward:!1,backward:!1};Ht(t)?(i.forward=t,i.backward=t):i=M(M({},i),t),this._chartStore.addData(e,$.Init,i)},r.prototype.updateData=function(e){this._chartStore.addData(e,$.Update)},r.prototype.setLoadMoreDataCallback=function(e){this._chartStore.setLoadMoreDataCallback(e)},r.prototype.createIndicator=function(e,t,i){var n,o=W(e)?{name:e}:e;if(ii(o.name)===null)return null;var a=M({},i);W(a.id)||(a.id=Je(Fn));var s=this.getDrawPaneById(a.id);return T(s)||(s=this._createPane(Ri,a.id,a),(n=a.height)!==null&&n!==void 0||(a.height=100)),this.setPaneOptions(a),this._chartStore.addIndicator(o,a.id,t!=null&&t)&&this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),a.id},r.prototype.overrideIndicator=function(e,t){return this._chartStore.overrideIndicator(e,t)},r.prototype.getIndicators=function(e){return this._chartStore.getIndicatorsByFilter(e??{})},r.prototype.removeIndicator=function(e){var t=this,i=this._chartStore.removeIndicator(e??{});if(i){var n=!1,o=[];this._drawPanes.forEach(function(a){var s=a.getId();s!==q&&s!==z&&o.push(s)}),o.forEach(function(a){var s,l,u;if(!t._chartStore.hasIndicators(a)){var c=t._drawPanes.findIndex(function(_){return _.getId()===a}),h=t._drawPanes[c];if(T(h)){n=!0;var p=t._separatorPanes.get(h);if(T(p)){var d=p.getTopPane();try{for(var g=J(t._separatorPanes),v=g.next();!v.done;v=g.next()){var f=v.value;if(f[1].getTopPane().getId()===a){f[1].setTopPane(d);break}}}catch(_){s={error:_}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(s)throw s.error}}p.destroy(),t._separatorPanes.delete(h)}t._recalculatePaneHeight(h,0,h.getBounding().height),t._drawPanes.splice(c,1),h.destroy();var y=t._drawPanes[0];T(y)&&y.getId()===z&&(y=t._drawPanes[1]),(u=t._separatorPanes.get(y))===null||u===void 0||u.destroy(),t._separatorPanes.delete(y)}}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({measureHeight:n,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return i},r.prototype.createOverlay=function(e){var t=this,i=[],n=[],o=function(s){T(s.paneId)&&t.getDrawPaneById(s.paneId)!==null?n.push(!0):(s.paneId=q,n.push(!1)),i.push(s)};W(e)?o({name:e}):st(e)?e.forEach(function(s){var l=null;l=W(s)?{name:s}:s,o(l)}):o(e);var a=this._chartStore.addOverlays(i,n);return st(e)?a:a[0]},r.prototype.getOverlays=function(e){return this._chartStore.getOverlaysByFilter(e??{})},r.prototype.overrideOverlay=function(e){return this._chartStore.overrideOverlay(e)},r.prototype.removeOverlay=function(e){return this._chartStore.removeOverlay(e??{})},r.prototype.setPaneOptions=function(e){var t,i,n,o=this,a=!1,s=!1,l=T(e.id),u=function(d){var g=d.getId();if(l&&e.id===g||!l){if(g!==z){if(R(e.height)&&e.height>0){var v=Math.max((n=e.minHeight)!==null&&n!==void 0?n:d.getOptions().minHeight,0),f=Math.max(v,e.height);s=!0,a=!0,d.setOriginalBounding({height:f}),c._recalculatePaneHeight(d,f,-f)}if(T(e.state)&&d.getOptions().state!==e.state){a=!0,s=!0;var y=e.state;switch(y){case"maximize":if(!T(c._drawPanes.find(function(C){var w=C.getId();return C.getOptions().state==="maximize"&&w!==z}))){d.getOptions().state==="normal"&&d.setOriginalBounding({height:d.getBounding().height}),d.setOptions({state:y});var _=c._chartBounding.height;d.setBounding({height:_-c._xAxisPane.getBounding().height}),c._drawPanes.forEach(function(C){var w;C.getId()!==z&&C.getId()!==g&&(C.setBounding({height:C.getOriginalBounding().height}),C.setVisible(!1),(w=o._separatorPanes.get(C))===null||w===void 0||w.setVisible(!1))})}break;case"minimize":f=d.getBounding().height;var m=d.getOptions().state,b=f-30;m==="maximize"&&(b=d.getOriginalBounding().height-30),c._recalculatePaneHeight(d,30,b)&&(m==="normal"&&d.setOriginalBounding({height:f}),d.setOptions({state:y})),c._drawPanes.forEach(function(C){var w;C.getId()!==z&&(C.setVisible(!0),(w=o._separatorPanes.get(C))===null||w===void 0||w.setVisible(!0))});break;default:f=d.getOriginalBounding().height,c._recalculatePaneHeight(d,f,d.getBounding().height-f)&&d.setOptions({state:y}),c._drawPanes.forEach(function(C){var w;C.getId()!==z&&(C.setVisible(!0),(w=o._separatorPanes.get(C))===null||w===void 0||w.setVisible(!0))})}}}T(e.axis)&&(s=!0);var S=M({},e);if(delete S.state,d.setOptions(S),g===e.id)return"break"}},c=this;try{for(var h=J(this._drawPanes),p=h.next();!p.done&&u(p.value)!=="break";p=h.next());}catch(d){t={error:d}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}s&&this.layout({measureHeight:a,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.getPaneOptions=function(e){var t;if(T(e)){var i=this.getDrawPaneById(e);return(t=i?.getOptions())!==null&&t!==void 0?t:null}return this._drawPanes.map(function(n){return n.getOptions()})},r.prototype.setZoomEnabled=function(e){this._chartStore.setZoomEnabled(e)},r.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},r.prototype.setScrollEnabled=function(e){this._chartStore.setScrollEnabled(e)},r.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},r.prototype.scrollByDistance=function(e,t){var i=this,n=R(t)&&t>0?t:0;if(this._chartStore.startScroll(),n>0){var o=new Te({duration:n});o.doFrame(function(a){var s=e*(a/n);i._chartStore.scroll(s)}),o.start()}else this._chartStore.scroll(e)},r.prototype.scrollToRealTime=function(e){var t=this._chartStore.getBarSpace().bar,i=(this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/t)*t;this.scrollByDistance(i,e)},r.prototype.scrollToDataIndex=function(e,t){var i=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-e))*this._chartStore.getBarSpace().bar;this.scrollByDistance(i,t)},r.prototype.scrollToTimestamp=function(e,t){var i=Se(this.getDataList(),"timestamp",e);this.scrollToDataIndex(i,t)},r.prototype.zoomAtCoordinate=function(e,t,i){var n=this,o=R(i)&&i>0?i:0,a=this._chartStore.getBarSpace().bar,s=a*e-a;if(o>0){var l=0,u=new Te({duration:o});u.doFrame(function(c){var h=s*(c/o),p=(h-l)/n._chartStore.getBarSpace().bar*10;n._chartStore.zoom(p,t),l=h}),u.start()}else this._chartStore.zoom(s/a*10,t)},r.prototype.zoomAtDataIndex=function(e,t,i){var n=this._chartStore.dataIndexToCoordinate(t);this.zoomAtCoordinate(e,{x:n,y:0},i)},r.prototype.zoomAtTimestamp=function(e,t,i){var n=Se(this.getDataList(),"timestamp",t);this.zoomAtDataIndex(e,n,i)},r.prototype.convertToPixel=function(e,t){var i,n=this,o=t??{},a=o.paneId,s=a===void 0?q:a,l=o.absolute,u=l!==void 0&&l,c=[];if(s!==z){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=new Array().concat(e),g=this._xAxisPane.getAxisComponent(),v=h.getAxisComponent();c=d.map(function(f){var y={},_=f.dataIndex;if(R(f.timestamp)&&(_=n._chartStore.timestampToDataIndex(f.timestamp)),R(_)&&(y.x=g.convertToPixel(_)),R(f.value)){var m=v.convertToPixel(f.value);y.y=u?p.top+m:m}return y})}}return st(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},r.prototype.convertFromPixel=function(e,t){var i,n=this,o=t??{},a=o.paneId,s=a===void 0?q:a,l=o.absolute,u=l!==void 0&&l,c=[];if(s!==z){var h=this.getDrawPaneById(s);if(h!==null){var p=h.getBounding(),d=new Array().concat(e),g=this._xAxisPane.getAxisComponent(),v=h.getAxisComponent();c=d.map(function(f){var y,_={};if(R(f.x)){var m=g.convertFromPixel(f.x);_.dataIndex=m,_.timestamp=(y=n._chartStore.dataIndexToTimestamp(m))!==null&&y!==void 0?y:void 0}if(R(f.y)){var b=u?f.y-p.top:f.y;_.value=v.convertFromPixel(b)}return _})}}return st(e)?c:(i=c[0])!==null&&i!==void 0?i:{}},r.prototype.executeAction=function(e,t){var i;if(e===x.ActionType.OnCrosshairChange){var n=M({},t);n.paneId=(i=n.paneId)!==null&&i!==void 0?i:q,this._chartStore.setCrosshair(n)}},r.prototype.subscribeAction=function(e,t){this._chartStore.subscribeAction(e,t)},r.prototype.unsubscribeAction=function(e,t){this._chartStore.unsubscribeAction(e,t)},r.prototype.getConvertPictureUrl=function(e,t,i){var n=this,o=this._chartBounding,a=o.width,s=o.height,l=pt("canvas",{width:"".concat(a,"px"),height:"".concat(s,"px"),boxSizing:"border-box"}),u=l.getContext("2d"),c=Tt(l);l.width=a*c,l.height=s*c,u.scale(c,c),u.fillStyle=i??"#FFFFFF",u.fillRect(0,0,a,s);var h=e!=null&&e;return this._drawPanes.forEach(function(p){var d=n._separatorPanes.get(p);if(T(d)){var g=d.getBounding();u.drawImage(d.getImage(h),g.left,g.top,g.width,g.height)}var v=p.getBounding();u.drawImage(p.getImage(h),0,v.top,a,v.height)}),l.toDataURL("image/".concat(t??"jpeg"))},r.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.destroy=function(){var e=this;this._chartEvent.destroy(),this._drawPanes.forEach(function(t){var i;t.destroy(),(i=e._separatorPanes.get(t))===null||i===void 0||i.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},r}(),le=new Map,vr=1,fr={clone:Bt,merge:Y,isString:W,isNumber:R,isValid:T,isObject:nt,isArray:st,isFunction:U,isBoolean:Ht,formatValue:G,formatPrecision:Z,formatBigNumber:He,formatDate:Ye,formatThousands:Xe,formatFoldDecimal:Ge,calcTextWidth:Xt,getLinearSlopeIntercept:ae,getLinearYFromSlopeIntercept:Pe,getLinearYFromCoordinates:Kt,checkCoordinateOnArc:Ci,checkCoordinateOnCircle:fi,checkCoordinateOnLine:ri,checkCoordinateOnPolygon:yi,checkCoordinateOnRect:mi,checkCoordinateOnText:bi};x.dispose=function(r){var e,t,i=null;if(r instanceof Ni)i=r.id;else{var n=null;i=(e=(n=W(r)?document.getElementById(r):r)==null?void 0:n.getAttribute("k-line-chart-id"))!==null&&e!==void 0?e:null}i!==null&&((t=le.get(i))===null||t===void 0||t.destroy(),le.delete(i))},x.getFigureClass=function(r){var e;return(e=jt[r])!==null&&e!==void 0?e:null},x.getOverlayClass=function(r){var e;return(e=Ut[r])!==null&&e!==void 0?e:null},x.getSupportedFigures=function(){return Object.keys(jt)},x.getSupportedIndicators=function(){return Object.keys(oe)},x.getSupportedLocales=function(){return Object.keys(se)},x.getSupportedOverlays=function(){return Object.keys(Ut)},x.init=function(r,e){var t=null;if((t=W(r)?document.getElementById(r):r)===null)return null;var i=le.get(t.id);if(T(i))return i;var n="k_line_chart_".concat(vr++);return(i=new Ni(t,e)).id=n,t.setAttribute("k-line-chart-id",n),le.set(n,i),i},x.registerFigure=function(r){jt[r.name]=ni.extend(r)},x.registerIndicator=function(r){oe[r.name]=Ke.extend(r)},x.registerLocale=function(r,e){se[r]=M(M({},se[r]),e)},x.registerOverlay=function(r){Ut[r.name]=Ue.extend(r)},x.registerStyles=function(r,e){si[r]=e},x.registerXAxis=function(r){Me[r.name]=Bi.extend(r)},x.registerYAxis=function(r){ke[r.name]=qt.extend(r)},x.utils=fr,x.version=function(){return"10.0.0-alpha1"}});</script>
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f5f0d6d79a8fb0825e285ab72dc542cb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1e8a59c6><!--[--><div class="banner top" role="banner" data-v-601fe2e0><span data-v-601fe2e0>ðŸŽ‰Â ðŸŽ‰Â ðŸŽ‰Â Â v10.0.0-alpha1 has been released.</span><button class="banner-close" data-v-601fe2e0><span class="close" data-v-601fe2e0>Ã—</span></button></div><!--]--><!--[--><span tabindex="-1" data-v-0e0b2513></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0e0b2513> Skip to content </a><!--]--><!----><header class="VPNav" data-v-1e8a59c6 data-v-29f352a4><div class="VPNavBar" data-v-29f352a4 data-v-e50de5ce><div class="wrapper" data-v-e50de5ce><div class="container" data-v-e50de5ce><div class="title" data-v-e50de5ce><div class="VPNavBarTitle has-sidebar" data-v-e50de5ce data-v-8dad447e><a class="title" href="/en-US/" data-v-8dad447e><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo.svg" alt data-v-db78a05d><!--]--><span data-v-8dad447e>KLineChart</span><!--[--><!--]--></a></div></div><div class="content" data-v-e50de5ce><div class="content-body" data-v-e50de5ce><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e50de5ce><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e50de5ce data-v-471316ee><span id="main-nav-aria-label" class="visually-hidden" data-v-471316ee> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/en-US/guide/introduction" tabindex="0" data-v-471316ee data-v-da8a3695><!--[--><span data-v-da8a3695>Guide</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-471316ee data-v-b27a214d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b27a214d><span class="text" data-v-b27a214d><!----><span data-v-b27a214d>API</span><span class="vpi-chevron-down text-icon" data-v-b27a214d></span></span></button><div class="menu" data-v-b27a214d><div class="VPMenu" data-v-b27a214d data-v-909829cc><div class="items" data-v-909829cc><!--[--><!--[--><div class="VPMenuLink" data-v-909829cc data-v-6da59ed4><a class="VPLink link" href="/en-US/api/chart/init" data-v-6da59ed4><!--[--><span data-v-6da59ed4>Chart API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-909829cc data-v-6da59ed4><a class="VPLink link" href="/en-US/api/instance/getDom" data-v-6da59ed4><!--[--><span data-v-6da59ed4>Instance API</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://pro.klinecharts.com/en-US" target="_blank" rel="noreferrer" tabindex="0" data-v-471316ee data-v-da8a3695><!--[--><span data-v-da8a3695>Pro</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://preview.klinecharts.com/#en-US" target="_blank" rel="noreferrer" tabindex="0" data-v-471316ee data-v-da8a3695><!--[--><span data-v-da8a3695>Preview</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/customize" tabindex="0" data-v-471316ee data-v-da8a3695><!--[--><span data-v-da8a3695>Customize</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/sponsor" tabindex="0" data-v-471316ee data-v-da8a3695><!--[--><span data-v-da8a3695>Sponsor</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-471316ee data-v-b27a214d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b27a214d><span class="text" data-v-b27a214d><!----><span data-v-b27a214d>10.0.0-alpha1</span><span class="vpi-chevron-down text-icon" data-v-b27a214d></span></span></button><div class="menu" data-v-b27a214d><div class="VPMenu" data-v-b27a214d data-v-909829cc><div class="items" data-v-909829cc><!--[--><!--[--><div class="VPMenuLink" data-v-909829cc data-v-6da59ed4><a class="VPLink link vp-external-link-icon" href="https://v9.klinecharts.com/en-US" target="_blank" rel="noreferrer" data-v-6da59ed4><!--[--><span data-v-6da59ed4>9.x Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-909829cc data-v-6da59ed4><a class="VPLink link vp-external-link-icon" href="https://v8.klinecharts.com" target="_blank" rel="noreferrer" data-v-6da59ed4><!--[--><span data-v-6da59ed4>8.x Docs</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-e50de5ce data-v-e9336e9c data-v-b27a214d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-b27a214d><span class="text" data-v-b27a214d><span class="vpi-languages option-icon" data-v-b27a214d></span><!----><span class="vpi-chevron-down text-icon" data-v-b27a214d></span></span></button><div class="menu" data-v-b27a214d><div class="VPMenu" data-v-b27a214d data-v-909829cc><!----><!--[--><!--[--><div class="items" data-v-e9336e9c><p class="title" data-v-e9336e9c>ðŸ‡¬ðŸ‡§ English</p><!--[--><div class="VPMenuLink" data-v-e9336e9c data-v-6da59ed4><a class="VPLink link" href="/guide/figure" data-v-6da59ed4><!--[--><span data-v-6da59ed4>ðŸ‡¨ðŸ‡³ ç®€ä½“ä¸­æ–‡</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-e50de5ce data-v-b541ffca><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-b541ffca data-v-62a0a576 data-v-5d36c70a><span class="check" data-v-5d36c70a><span class="icon" data-v-5d36c70a><!--[--><span class="vpi-sun sun" data-v-62a0a576></span><span class="vpi-moon moon" data-v-62a0a576></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e50de5ce data-v-191c0761 data-v-d8abf2fe><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-d8abf2fe data-v-c5c9e861><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-d8abf2fe data-v-c5c9e861><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/more/feedback" aria-label target="_blank" rel="noopener" data-v-d8abf2fe data-v-c5c9e861><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e50de5ce data-v-cb2509aa data-v-b27a214d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b27a214d><span class="vpi-more-horizontal icon" data-v-b27a214d></span></button><div class="menu" data-v-b27a214d><div class="VPMenu" data-v-b27a214d data-v-909829cc><!----><!--[--><!--[--><div class="group translations" data-v-cb2509aa><p class="trans-title" data-v-cb2509aa>ðŸ‡¬ðŸ‡§ English</p><!--[--><div class="VPMenuLink" data-v-cb2509aa data-v-6da59ed4><a class="VPLink link" href="/guide/figure" data-v-6da59ed4><!--[--><span data-v-6da59ed4>ðŸ‡¨ðŸ‡³ ç®€ä½“ä¸­æ–‡</span><!--]--></a></div><!--]--></div><div class="group" data-v-cb2509aa><div class="item appearance" data-v-cb2509aa><p class="label" data-v-cb2509aa>Appearance</p><div class="appearance-action" data-v-cb2509aa><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-cb2509aa data-v-62a0a576 data-v-5d36c70a><span class="check" data-v-5d36c70a><span class="icon" data-v-5d36c70a><!--[--><span class="vpi-sun sun" data-v-62a0a576></span><span class="vpi-moon moon" data-v-62a0a576></span><!--]--></span></span></button></div></div></div><div class="group" data-v-cb2509aa><div class="item social-links" data-v-cb2509aa><div class="VPSocialLinks social-links-list" data-v-cb2509aa data-v-d8abf2fe><!--[--><a class="VPSocialLink no-icon" href="https://github.com/klinecharts/KLineChart" aria-label="github" target="_blank" rel="noopener" data-v-d8abf2fe data-v-c5c9e861><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/klinecharts" aria-label target="_blank" rel="noopener" data-v-d8abf2fe data-v-c5c9e861><svg viewBox="0 0 1024 1024"><path d="M679.424 746.862l84.005-395.996c7.424-34.852-12.581-48.567-35.438-40.009L234.277 501.138c-33.72 13.13-33.134 32-5.706 40.558l126.282 39.424 293.156-184.576c13.714-9.143 26.295-3.986 16.018 5.157L426.898 615.973l-9.143 130.304c13.13 0 18.871-5.706 25.71-12.581l61.696-59.429 128 94.282c23.442 13.129 40.01 6.29 46.3-21.724zM1024 512c0 282.843-229.157 512-512 512S0 794.843 0 512 229.157 0 512 0s512 229.157 512 512z"/></svg></a><a class="VPSocialLink no-icon" href="/more/feedback" aria-label target="_blank" rel="noopener" data-v-d8abf2fe data-v-c5c9e861><svg viewBox="0 0 1193 1024"><path d="M806.287212 309.998684c13.642769 0 27.127442 1.050875 40.528417 2.631837C810.407012 133.842355 629.080008 1.032275 422.076327 1.032275 190.688636 1.032275 1.112733 167.275045 1.112733 378.379926c0 121.864245 63.061771 221.92052 168.465415 299.536438l-42.100079 133.470365 147.122433-77.783315c52.692523 10.992333 94.922799 22.27296 147.475825 22.27296 13.20568 0 26.309062-0.678884 39.310147-1.757657-8.2396-29.666281-13.001085-60.727528-13.001085-92.960546 0-193.8538 157.910172-351.159486 357.901823-351.159487z m-226.356512-120.301883c31.684332 0 52.683223 21.975367 52.683222 55.370858 0 33.255994-20.998891 55.519654-52.692522 55.519654-31.544835 0-63.191968-22.27296-63.191968-55.519654 0-33.39549 31.647133-55.370858 63.191968-55.370858zM285.323142 300.596612c-31.554135 0-63.405863-22.27296-63.405863-55.528953 0-33.39549 31.851728-55.370858 63.405863-55.370858 31.544835 0 52.543726 21.975367 52.543726 55.370858 0 33.255994-20.998891 55.519654-52.543726 55.519654z" p-id="3781"></path><path d="M1190.460898 655.8201c0-177.393199-168.400317-321.986094-357.557732-321.986094-200.289244 0-358.04132 144.592894-358.041319 321.986094 0 177.700092 157.752075 321.976794 358.041319 321.976794 41.923384 0 84.237358-11.159729 126.328138-22.27296l115.447401 66.651484-31.656433-110.881212c84.507051-66.80958 147.438625-155.417832 147.438626-255.474106z m-473.618918-55.519654c-20.961692 0-42.127979-21.966067-42.127978-44.387824 0-22.114864 21.166287-44.369224 42.127978-44.369224 31.823828 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-20.859394 44.387824-52.683223 44.387824z m231.536487 0c-20.831495 0-41.830386-21.966067-41.830386-44.387824 0-22.114864 20.998891-44.369224 41.830386-44.369224 31.544835 0 52.683223 22.25436 52.683223 44.369224 0 22.412457-21.138388 44.387824-52.683223 44.387824z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e50de5ce data-v-0b23646c><span class="container" data-v-0b23646c><span class="top" data-v-0b23646c></span><span class="middle" data-v-0b23646c></span><span class="bottom" data-v-0b23646c></span></span></button></div></div></div></div><div class="divider" data-v-e50de5ce><div class="divider-line" data-v-e50de5ce></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-1e8a59c6 data-v-23a1c509><div class="container" data-v-23a1c509><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-23a1c509><span class="vpi-align-left menu-icon" data-v-23a1c509></span><span class="menu-text" data-v-23a1c509>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-23a1c509 data-v-997dae13><button data-v-997dae13>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-1e8a59c6 data-v-4995634f><div class="curtain" data-v-4995634f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4995634f><span class="visually-hidden" id="sidebar-aria-label" data-v-4995634f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-6303e4ba><section class="VPSidebarItem level-0 collapsible" data-v-6303e4ba data-v-a4c630ed><div class="item" role="button" tabindex="0" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><h2 class="text" data-v-a4c630ed>Started</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4c630ed><span class="vpi-chevron-right caret-icon" data-v-a4c630ed></span></div></div><div class="items" data-v-a4c630ed><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/introduction" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/quick-start" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Quick Start</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6303e4ba><section class="VPSidebarItem level-0 collapsible" data-v-6303e4ba data-v-a4c630ed><div class="item" role="button" tabindex="0" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><h2 class="text" data-v-a4c630ed>Basic</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4c630ed><span class="vpi-chevron-right caret-icon" data-v-a4c630ed></span></div></div><div class="items" data-v-a4c630ed><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/styles" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Style Configuration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/data-source" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Data Source</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/i18n" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Internationalization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/environment" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Environment</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/hot-key" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Hot Key</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6303e4ba><section class="VPSidebarItem level-0 collapsible has-active" data-v-6303e4ba data-v-a4c630ed><div class="item" role="button" tabindex="0" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><h2 class="text" data-v-a4c630ed>Advanced</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4c630ed><span class="vpi-chevron-right caret-icon" data-v-a4c630ed></span></div></div><div class="items" data-v-a4c630ed><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/figure" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Figure</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/indicator" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Indicator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/overlay" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Overlay</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/local-development" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Local Development</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6303e4ba><section class="VPSidebarItem level-0 collapsible" data-v-6303e4ba data-v-a4c630ed><div class="item" role="button" tabindex="0" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><h2 class="text" data-v-a4c630ed>Others</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4c630ed><span class="vpi-chevron-right caret-icon" data-v-a4c630ed></span></div></div><div class="items" data-v-a4c630ed><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/v9-to-v10" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>9.x to 10.x</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/faq" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>FAQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/feedback" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Feedback</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4c630ed data-v-a4c630ed><div class="item" data-v-a4c630ed><div class="indicator" data-v-a4c630ed></div><a class="VPLink link link" href="/en-US/guide/changelog" data-v-a4c630ed><!--[--><p class="text" data-v-a4c630ed>Changelog</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1e8a59c6 data-v-6f5df8e6><div class="VPDoc has-sidebar has-aside" data-v-6f5df8e6 data-v-4d1dc25e><!--[--><!--]--><div class="container" data-v-4d1dc25e><div class="aside" data-v-4d1dc25e><div class="aside-curtain" data-v-4d1dc25e></div><div class="aside-container" data-v-4d1dc25e><div class="aside-content" data-v-4d1dc25e><div class="VPDocAside" data-v-4d1dc25e data-v-b6c4f76a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-b6c4f76a data-v-db3db4be><div class="content" data-v-db3db4be><div class="outline-marker" data-v-db3db4be></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-db3db4be>On this page</div><ul class="VPDocOutlineItem root" data-v-db3db4be data-v-a8ecaec1><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-b6c4f76a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4d1dc25e><div class="content-container" data-v-4d1dc25e><!--[--><!--]--><main class="main" data-v-4d1dc25e><div style="position:relative;" class="vp-doc _en-US_guide_figure" data-v-4d1dc25e><div><h1 id="figure" tabindex="-1">Figure <a class="header-anchor" href="#figure" aria-label="Permalink to &quot;Figure&quot;">â€‹</a></h1><p>Figure are an important part of the chart. All elements on the chart are composed of figures. If you need to make complex custom technical indicators and overlays, it is recommended to read carefully. This document describes the built-in figures and how to customize a figure. The basic figure can be obtained through the chart method <code>klinecharts.getFigureClass(name)</code>.</p><h2 id="example-of-use" tabindex="-1">Example of use <a class="header-anchor" href="#example-of-use" aria-label="Permalink to &quot;Example of use&quot;">â€‹</a></h2><div class="warning custom-block"><p class="custom-block-title">Note</p><p>It needs to be used when there is a canvas context.</p></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get the figure class</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// name is the name of the figure, such as &#39;arc&#39;, &#39;circle&#39;, etc.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Figure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> klinecharts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFigureClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// instantiate and draw</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// attrs attribute</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// styles styles</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ctx canvas context</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Figure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(attrs, styles).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span></code></pre></div><h2 id="built-in-figures" tabindex="-1">Built-in figures <a class="header-anchor" href="#built-in-figures" aria-label="Permalink to &quot;Built-in figures&quot;">â€‹</a></h2><p>These figures are built into the chart, <code>arc</code>, <code>circle</code>, <code>line</code>, <code>polygon</code>, <code>rect</code>, <code>text</code>, <code>rectText</code>.</p><h3 id="arc" tabindex="-1">arc <a class="header-anchor" href="#arc" aria-label="Permalink to &quot;arc&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The x-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The y-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // radius</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     r: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // start angle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     startAngle: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // end angle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     endAngle: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // style, optional `solid`, `dashed`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     dashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="circle" tabindex="-1">circle <a class="header-anchor" href="#circle" aria-label="Permalink to &quot;circle&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The x-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // The y-axis coordinate value of the center of the circle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // radius</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     r: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // border dotted line parameters</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="line" tabindex="-1">line <a class="header-anchor" href="#line" aria-label="Permalink to &quot;line&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // set of coordinates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    coordinates: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `solid`, `dashed`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><p>###polygon</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // set of coordinates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    coordinates: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="rect" tabindex="-1">rect <a class="header-anchor" href="#rect" aria-label="Permalink to &quot;rect&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The x-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The y-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // width</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // high</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border dotted line parameters</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Border fillet value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderRadius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h3 id="text" tabindex="-1">text <a class="header-anchor" href="#text" aria-label="Permalink to &quot;text&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attrs: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The x-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The y-axis coordinate value of the starting point</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    y: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Fixed width</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Fixed height</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // text content</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    text: any</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // alignment</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    align: CanvasTextAlign</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // benchmark</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseline: CanvasTextBaseline</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  styles: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // style, optional `fill`, `stroke`, `stroke_fill`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;stroke_fill&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // font</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    family</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // thickness</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // left padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingLeft</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // right padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingRight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // top padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingTop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Bottom padding</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    paddingBottom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;solid&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dashed&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // frame size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // border dotted line parameter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderDashedValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number[]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Border fillet value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    borderRadius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // background color</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    backgroundColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CanvasGradient</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Figure</span></span></code></pre></div><h2 id="customize-figure" tabindex="-1">Customize figure <a class="header-anchor" href="#customize-figure" aria-label="Permalink to &quot;Customize figure&quot;">â€‹</a></h2><p>To create a custom figure, you only need to generate the basic figure information, and then add it globally through the chart API <a href="/en-US/api/chart/registerFigure">registerFigure(figure)</a> , and add it to the chart to use it like a built-in basic figure. For more examples, refer to the files under <a href="https://github.com/klinecharts/KLineChart/tree/main/src/extension/figure" target="_blank" rel="noreferrer">https://github.com/klinecharts/KLineChart/tree/main/src/extension/figure</a> .</p></div></div></main><footer class="VPDocFooter" data-v-4d1dc25e data-v-b9c19f9e><!--[--><!--]--><div class="edit-info" data-v-b9c19f9e><div class="edit-link" data-v-b9c19f9e><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/klinecharts/KLineChart/edit/main/docs/en-US/guide/figure.md" target="_blank" rel="noreferrer" data-v-b9c19f9e><!--[--><span class="vpi-square-pen edit-link-icon" data-v-b9c19f9e></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-b9c19f9e><p class="VPLastUpdated" data-v-b9c19f9e data-v-c08c859d>Last updated: <time datetime="2024-11-29T18:41:48.000Z" data-v-c08c859d></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-b9c19f9e><span class="visually-hidden" id="doc-footer-aria-label" data-v-b9c19f9e>Pager</span><div class="pager" data-v-b9c19f9e><a class="VPLink link pager-link prev" href="/en-US/guide/hot-key" data-v-b9c19f9e><!--[--><span class="desc" data-v-b9c19f9e>Previous page</span><span class="title" data-v-b9c19f9e>Hot Key</span><!--]--></a></div><div class="pager" data-v-b9c19f9e><a class="VPLink link pager-link next" href="/en-US/guide/indicator" data-v-b9c19f9e><!--[--><span class="desc" data-v-b9c19f9e>Next page</span><span class="title" data-v-b9c19f9e>Indicator</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-1e8a59c6 data-v-76a711b2><div class="container" data-v-76a711b2><p class="message" data-v-76a711b2>Released under the <a href="https://github.com/klinecharts/KLineChart/blob/main/LICENSE">Apache License V2</a>.</p><p class="copyright" data-v-76a711b2>Copyright Â© 2018-2024 <a href="https://github.com/liihuu">liihuu</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>